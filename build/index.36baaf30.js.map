{"mappings":"AAAA,IAAIA,cAAgB,CAAC,EACrBC,OAAOC,QAAQC,gBAAgBC,SAAQC,GAAKL,cAAcK,EAAE,IAAMA,EAAE,KACpEJ,OAAOC,QAAQI,eAAeF,SAAQC,GAAKL,cAAcK,EAAE,IAAMA,EAAE,KACnEJ,OAAOC,QAAQK,eAAeH,SAAQC,GAAKL,cAAcK,EAAE,IAAMA,EAAE,KAEnE,IAAIG,eAAiB,CAAC,EAClBC,YAAa,EAGbC,SAAW,IAAIC,IAEnB,SAASC,aACL,OAAOZ,aACX,CAEA,SAASa,4BACL,OAAOC,sBACX,CAEA,SAASC,yBACL,IAAIC,EAAS,CAAC,EAId,OAHAA,EAAOC,WAAaC,SAASC,eAAe,cAAcC,MAC1DJ,EAAOK,WAAaH,SAASC,eAAe,cAAcC,MAC1DJ,EAAOM,WAAaJ,SAASC,eAAe,cAAcC,MACnDJ,CACX,CAEA,SAASO,cACP,OAAOC,SACT,CAEA,SAASC,eAAeC,GACpB,IAAIC,EAAa,IAAIhB,IASrB,OAPAe,EAAYtB,SAAQwB,IAChB,IAAIC,EAAOD,EAAQE,QAEfC,EADKH,EAAQI,OACAC,MAAM,KACvBN,EAAWO,IAAIL,EAAM,IAAIM,OAAON,EAAME,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIH,EAAQQ,QAAM,IAGjGT,CACX,CAEAU,eAAeC,SAASC,GAEpBC,WAAa,CAAC,EACdC,wBAA0B,CAAC,EAE3B,IAAIzB,EAASD,yBACT2B,EAAUC,kBACVC,EAAWrB,cACff,eAAiBK,4BAA4BgC,MAAM,KAAM,CAACN,EAAMG,EAASE,EAAU5B,IACnFN,SAAWe,eAAeqB,yBAAyBtC,iBAErB,oBAAnBuC,gBACTA,eAAeC,QAAQ,iBAAkB,IAAIC,aAAaV,EAAMvB,EAAQN,UAE9E,CAEA,SAASI,uBAAuByB,EAAMG,EAASE,EAAU5B,GAErD,IAAIkC,EAAM,IAAIC,IAAIC,QAAQb,IACtBc,EAAmBC,iBAAiBZ,EAASjC,WAAY,IAAI8C,iBAAiBX,EAAU5B,IAG5F,IADA,IAAIwC,GAAiB,EACfA,GACFA,EAAiBC,cAAcP,EAAK,WAAYG,GAChDA,EAAmBK,uBAAuBL,EAAkB,YAGjE,OAAOM,sBACV,CAEA,SAASC,cAAclB,GACnB,OAAO,IAAI/B,IAAI,IAAI+B,GAASmB,QAAOC,IAAMA,EAAE,GAAGC,SAClD,CAEA,SAASC,eAAeC,EAAcjD,GAalC,OAZAiD,EAAe,IAAItD,IAAI,IAAIsD,GAAcJ,QAAOK,IAC5C,IAAIC,EAAc,KASlB,MARe,KAAXD,EAAE,GAAG,GACLC,EAAcnD,EAAOM,WACH,KAAX4C,EAAE,GAAG,GACZC,EAAcnD,EAAOC,WACH,KAAXiD,EAAE,GAAG,KACZC,EAAcnD,EAAOK,YAGlB4C,EAAaG,IAAIF,EAAE,IAAIG,QAAWJ,EAAaG,IAAIF,EAAE,IAAIG,QAAUF,CAAA,IAGlF,CAEA,SAASG,oBAAoB5B,GACzB,OAAO,IAAI/B,IAAI,IAAI+B,GAASmB,QAAOC,GAAKA,EAAE,GAAGS,YAAcT,EAAE,GAAGU,UACpE,CAEA,SAASC,UAAUC,GACf,IAAIC,EAAMD,EAAEzC,MAAM,KAClB,OAAO0C,EAAI,GAAK,IAAMA,EAAI,GAAK,IAAMA,EAAI,EAC7C,CAEA,SAASpB,iBAAiBX,EAAU5B,GAClC4D,KAAKC,0BAA4B,IAAIC,IACrCF,KAAKG,MAAQ,IAAID,IACjBF,KAAKhC,SAAWA,EAChBgC,KAAK5D,OAASA,EAEd4D,KAAKI,kBAAoB,IAAIrE,IAAIV,OAAOC,QAAQ0C,EAASqC,oBACzDL,KAAKM,cAAgB,IAAIvE,IAAIV,OAAOC,QAAQ0C,EAASuC,kBAErDP,KAAKQ,qBAAuB,IAAIzE,IAAIV,OAAOC,QAAQ0C,EAASyC,eAC9D,CAqEA,SAASpC,aAAaV,EAAMvB,EAAQN,GAClCkE,KAAKlE,SAAW4E,MAAMzD,KAAKnB,EAASR,WACpC0E,KAAKrC,KAAOA,EACZqC,KAAK5D,OAASA,CAChB,CAEA,SAASuE,gBACPxC,eAAeyC,KAAK,kBAAkBC,MAAKf,IACvC,IAAIgB,EAAOC,KAAKC,UAAUlB,GACtBmB,EAAO,IAAIC,KAAK,CAACJ,GAAO,mBAAoB,CAACK,KAAM,mCACvDC,OAAOH,EAAA,GAEb,CAEA,SAASI,gBACP,IAAIJ,EAAOjB,KAAKsB,MAAM,GAElBC,EAAS,IAAIC,WACjBD,EAAOE,WAAWR,EAAK,SAEvBM,EAAOG,OAASC,IACZ,IAAIC,EAAUD,EAAYvE,OAAOyE,OAC7BC,EAAef,KAAKgB,MAAMH,GAC9BI,mBAAmBF,GACnB3D,eAAeC,QAAQ,iBAAkB0D,EAAA,CAE/C,CAEA,SAASE,mBAAmBF,GAC1BxF,SAASC,eAAe,mBAAmBC,MAAQsF,EAAanE,KAEhErB,SAASC,eAAe,cAAcC,MAAQsF,EAAa1F,OAAOC,WAClEC,SAASC,eAAe,cAAcC,MAAQsF,EAAa1F,OAAOK,WAClEH,SAASC,eAAe,cAAcC,MAAQsF,EAAa1F,OAAOM,WAClEuF,EAAEC,WAAWC,YAAY7F,SAASC,eAAe,eAAe6F,2BAChEH,EAAEC,WAAWC,YAAY7F,SAASC,eAAe,eAAe6F,2BAChEH,EAAEC,WAAWC,YAAY7F,SAASC,eAAe,eAAe6F,2BAEhEtG,SAAW,IAAIC,IAAI+F,EAAahG,SAClC,CAKC,SAASyB,OAAOL,EAASmF,EAASC,EAAMC,EAAKC,EAAQhF,GAClDwC,KAAK9C,QAAUA,EACf8C,KAAKyC,UAAYJ,EACjBrC,KAAK0C,OAASJ,EACdtC,KAAK2C,MAAQJ,EACbvC,KAAK4C,SAAWJ,EAChBxC,KAAKxC,OAASA,CAClB,CAMA,SAASgB,QAAQqE,GAEb,IADA,IAAIC,EAAO,EAAGC,EAAMF,EAAMG,OACjBC,EAAI,EAAGA,EAAIF,EAAKE,IACvBH,GAAUA,GAAQ,GAAKA,EAAQD,EAAMK,WAAWD,GAChDH,GAAQ,EAEV,OAAOA,CACX,CAEA,SAASvE,IAAIZ,GAETqC,KAAKmD,EAAI,WACTnD,KAAKoD,EAAI,WACTpD,KAAKqD,EAAI,MAETrD,KAAKsD,MAAQ3F,GAAc4F,KAAKC,MAAMD,KAAKE,UAAYzD,KAAKmD,EAAI,GACpE,CAwBC,SAASO,WAAWC,GACjB3D,KAAKc,KAAO,CAAC,EACbd,KAAKc,KAAK6C,GAAKA,EACf3D,KAAK4D,QAAU,QACnB,CAEA,SAASC,SAASF,GACd3D,KAAKc,KAAO,CAAC,EACbd,KAAKc,KAAK6C,GAAKA,EACf3D,KAAKc,KAAKgD,OAASC,SAASJ,GAC5B3D,KAAKc,KAAKkD,MAAQC,UAAUN,GAAMA,EAAK,KAAOM,UAAUN,GAAM,IAAMA,CACxE,CAEA,SAASO,SAASpD,GACdd,KAAKc,KAAO,CAAC,EACbd,KAAKc,KAAK6C,GAAK7C,EAAK,GACpBd,KAAKc,KAAKgD,OAASjE,UAAUiB,EAAK,IAClCd,KAAKc,KAAKkD,MAAQlD,EAAK,GAAGqD,KAAOrD,EAAK,GAAKA,EAAK,GAAGqD,KAAK9G,MAAM,KAAK,GAAKyD,EAAK,GAAK,aAClFd,KAAK4D,QAAU,UACf5D,KAAKc,KAAKsD,QAAS,EACnBpE,KAAKc,KAAKuD,UAAW,CACzB,CAEA,SAASC,UAAU9G,EAAQJ,GACvB4C,KAAKc,KAAO,CAAC,EACbd,KAAKc,KAAK6C,GAAKnG,EAAS,KAAOJ,EAC/B4C,KAAKc,KAAKtD,OAASA,EACnBwC,KAAKc,KAAK1D,OAASA,EACnB4C,KAAK4D,QAAU,OACnB,CAEA,SAASW,iBAAiB/G,EAAQJ,EAAQoH,GACxCxE,KAAKc,KAAO,CAAC,EACbd,KAAKc,KAAK6C,GAAKnG,EAAS,KAAOJ,EAC/B4C,KAAKc,KAAKtD,OAASA,EACnBwC,KAAKc,KAAK1D,OAASA,EACnB4C,KAAK4D,QAAU,cACf5D,KAAKwE,UAAYA,CACnB,CAEA,SAASC,SAASjH,EAAQJ,EAAQsH,GAChC1E,KAAKc,KAAO,CAAC,EACbd,KAAKc,KAAK6C,GAAKnG,EAAS,KAAOJ,EAAS,IAAMuH,OAAOC,GAAGrI,eAAeiB,EAAS,KAAOJ,GAAQ4F,OAC/FhD,KAAKc,KAAKtD,OAASA,EACnBwC,KAAKc,KAAK1D,OAASA,EACnB4C,KAAKc,KAAKsD,QAAS,EACnBpE,KAAK4D,QAAU,MACjB,CAEA,SAAS1F,yBAAyB2G,GAKhC,OAFAA,EAAgBC,eADhBD,EAAgBE,mBAAmBF,GAIrC,CAEA,SAASE,mBAAmBF,GAE1B,IAAIG,EAAgB,GAWpB,OATAH,EAAcrJ,SAAQ2H,IACpB,IAAI8B,EAASjJ,aAAamH,EAAE3F,QAAQoC,QAChCqF,GACFA,EAAOzJ,SAAQ0J,IACbF,EAAcG,KAAK,CAAC3H,OAAQ0H,EAAG9H,OAAQ+F,EAAE/F,QAAM,GACjD,IAIG,IAAIyH,KAAkBG,EAC/B,CAEA,SAASF,eAAeD,GAEtB,OAAOA,EAActC,KAAIY,IACvBA,EAAEjG,QAAUlB,aAAamH,EAAE3F,QAAQ4H,GAC5BjC,IAGX,CAEA,SAASpE,uBACP,OAAO6F,GAAGS,QAAQpG,QAAOxD,GAAKA,EAAEqF,OAAOsD,SAAQ7B,KAAI9G,IAAc,CAAC+B,OAAQ/B,EAAEqF,OAAOtD,OAAQJ,OAAQ3B,EAAEqF,OAAO1D,UAC9G,CAEA,SAASW,kBACL,IAAIuH,EAAa,IAAIvJ,IAAIV,OAAOC,QAAQU,eAIxC,OAHAsJ,EAAatG,cAAcsG,GAC3BA,EAAa5F,oBAAoB4F,GACjCA,EAAalG,eAAekG,EAAYnJ,0BACjCmJ,CACX,CAEA,SAASvB,SAASJ,GACd,OAAOA,EAAG,IACN,IAAK,IAAK,MAAO,QACjB,IAAK,IAAK,MAAO,QACjB,IAAK,IAAK,MAAO,QAEzB,CAEA,SAAS4B,4BAA4BC,EAAIC,GACvC,IAAIC,EAAU,IAAIxF,IAQlB,OAPAsF,EAAGG,WAAWC,IAAI,CAACC,MAAOL,EAAGjJ,eAAekJ,GAAOK,UAAU,EAAMC,MAAO,CAACC,EAAGvK,EAAGwK,EAAGhD,EAAGiD,KAEjFF,EAAElF,OAAOuD,UACXqB,EAAQS,IAAIH,EAAA,IAITN,CACT,CAEA,SAAS7G,cAAcP,EAAKmH,EAAMhH,GAC9B,IAAI2H,EAAkBb,4BAA4BZ,OAAOC,GAAIa,GACzDY,EAAmBzB,GAAG0B,QAAQC,IAAIH,GAAiBnH,QAAOxD,GAAKA,EAAEqF,OAAOsD,SAAW3I,EAAEqF,OAAOuD,WAC5FmC,EAA2BH,EAAiBpH,QAAOwH,GAAKhI,EAAiB2B,kBAAkBsG,IAAID,EAAE3F,OAAO6C,MACxGgD,EAA0BN,EAAiBpH,QAAOwH,GAAKhI,EAAiB2B,kBAAkBsG,IAAID,EAAE3F,OAAO6C,MAE3G,GAA2B,GAAxByC,EAAgBQ,MAAwC,GAA3BP,EAAiBrD,OAC/C,OAAO,EAGT,IAAI6D,EAAQ,IAAIT,GAAiB9H,EAAIwI,UAAU,EAAGV,EAAgBQ,KAAO,IACzER,EAAgBW,OAAOF,GAEvB,IAAIG,EAAQ,KAqCZ,GAlCIX,EAAiBpH,QAAOxD,GAAKA,EAAEwL,QAAO,GAAQ,IAAGjE,OAAS,GAAKoD,EAAgBQ,MAD7C,IAIpCP,EAAmBA,EAAiBpH,QAAOxD,GAAKA,EAAEwL,QAAO,GAAQ,IACjED,EAAQX,EAAiB/H,EAAIwI,UAAU,EAAGT,EAAiBrD,OAAS,KAKpEgE,EAHSR,EAAyBxD,OAAS,EAGnCwD,EAAyBlI,EAAIwI,UAAU,EAAGN,EAAyBxD,OAAS,IAE3E2D,EAAwB3D,OAAS,EAGlC2D,EAAwBrI,EAAIwI,UAAU,EAAGH,EAAwB3D,OAAS,IAEzEqD,EAAiBrD,OAAS,EAG3BqD,EAAiB/H,EAAIwI,UAAU,EAAGT,EAAiBrD,OAAS,IAE3DoD,EAAgBQ,KAAO,EAGxB,IAAIR,GAAiB9H,EAAIwI,UAAU,EAAGV,EAAgBQ,KAAO,IAO7DhC,GAAGuB,IAAI,IAAIjC,SAAS,CAAC,aAAclI,aAAa,kBAGrD6K,EAAO,CAWV,GAT4B,GAAxBT,EAAgBQ,MAClBM,QAAQC,IAAI,oCACZf,EAAgB5K,SAAQiL,IACtBS,QAAQC,IAAIV,EAAE3F,OAAO6C,GAAE,KAGzBuD,QAAQC,IAAI,8BAGe,GAAzBd,EAAiBO,KAOnB,OANAM,QAAQC,IAAI,sCACZd,EAAiB7K,SAAQiL,IACvBS,QAAQC,IAAIV,EAAE3F,OAAO6C,GAAE,IAGzBqD,EAAMlG,OAAOuD,UAAW,GACjB,EAGP6C,QAAQC,IAAI,+BAGhB,CAWA,OATAxC,OAAOC,GAAGuB,IAAI,IAAI1B,SAASoC,EAAM/F,OAAO6C,GAAIqD,EAAMlG,OAAO6C,KAErDkD,GAASG,GACPrC,OAAOC,GAAGuB,IAAI,IAAI1B,SAASuC,EAAMlG,OAAO6C,GAAIkD,EAAM/F,OAAO6C,KAG/DkD,EAAM/F,OAAOuD,UAAW,EACxB2C,EAAMlG,OAAOuD,UAAW,GAEjB,CACX,CAGA,SAASvF,uBAAuBA,EAAwB2G,GAEtD,IAAI2B,EAAe,IAAIlH,IACvB0E,GAAGe,WAAWC,IAAI,CAACC,MAAOjB,GAAGrI,eAAekJ,GAAOK,UAAU,EAAMC,MAAO,CAACC,EAAGvK,EAAGwK,EAAGhD,EAAGiD,KACrFkB,EAAajB,IAAIH,EAAElF,OAAO6C,GAAE,IAG9B7E,EAAuBsB,kBAAkB5E,SAAQ,CAAC2I,EAAMkD,KAClDD,EAAaV,IAAIW,KACnBvI,EAAuBsB,kBAAkB2G,OAAOM,GAChDvI,EAAuBqB,MAAMgG,IAAIhC,GACnC,IAGFrF,EAAuBwB,cAAc9E,SAAQiL,IACvCA,EAAEjC,UAAU8C,OAAMC,GAAQzI,EAAuBqB,MAAMuG,IAAIa,OAC7DzI,EAAuBqB,MAAMgG,IAAIM,EAAEc,MACnCzI,EAAuBwB,cAAcyG,OAAON,EAAEc,MAChD,IAGF,IAAIC,EAAmB1I,EAAuBmB,0BAU9C,OATAuH,EAAiBhM,SAAQC,IACnBqD,EAAuBqB,MAAMuG,IAAIjL,EAAE+I,aACjCI,GAAGrI,eAAed,EAAEqF,KAAK1D,QAAQ4F,OAAS,GAAK4B,GAAGrI,eAAed,EAAEqF,KAAKtD,QAAQwF,OAAS,GAC3F4B,GAAGuB,IAAI1K,GAET+L,EAAiBT,OAAOtL,GAC1B,IAGKqD,CACT,CAEA,SAASJ,iBAAiBZ,EAASjC,EAAY4C,GAE7C,IAAI+G,EAAKb,OAAOC,GAAK6C,UAAU,CAC3BC,UAAW7L,EAAa,KAAOS,SAASC,eAAe,MACvDoL,SAAU9L,EACV+L,cAAe/L,EACfgM,qBAAqB,EACrBC,mBAAmB,EAEnBC,MAAO,CACL,CACEC,SAAU,OACVC,IAAK,CACHrG,QAAW,WACX,cAAe,SACf,cAAe,WAGnB,CACEoG,SAAU,UACVC,IAAK,CACH,cAAe,MACf,cAAe,UAEjBF,MAAO,CACLG,MAAU,mBAGd,CACEF,SAAU,OACVC,IAAK,CACH,cAAe,SACf,qBAAsB,aAG1B,CACED,SAAY,cACZD,MAAS,CACP/D,MAAS,cACT,cAAe,SACf,cAAe,WAGnB,CACEgE,SAAU,UACVC,IAAK,CACD,mBAAoB,YAG1B,CACED,SAAU,SACVC,IAAK,CACD,mBAAoB,YAG1B,CACED,SAAU,SACVC,IAAK,CACD,mBAAoB,YAG1B,CACED,SAAU,SACVC,IAAK,CACD,mBAAoB,YAG1B,CACED,SAAU,QACVC,IAAK,CACH,aAAc,UACd,cAAe,sBAGnB,CACED,SAAU,eACVC,IAAK,CACH,aAAc,YAGlB,CACED,SAAU,SACVC,IAAK,CACHE,QAAW,SAKjBxC,SAAU,CACRW,MAAO,GACPjB,MAAO,MAKXG,EAAGW,IAAI,IAAIzC,WAAW,UACtB8B,EAAGW,IAAI,IAAIzC,WAAW,UACtB8B,EAAGW,IAAI,IAAIzC,WAAW,UAEtB,IAAI5C,EAAO,IAAIhD,GAgDf,OA7CAgD,EAAKtF,SAAQ4M,IAEN5C,EAAGjJ,eAAesD,UAAUuI,EAAE,KAAKpF,QACpCwC,EAAGW,IAAI,IAAItC,SAAShE,UAAUuI,EAAE,MAAMC,SAAS,OAASD,EAAE,GAAG,IAGjE5C,EAAGW,IAAI,IAAIjC,SAASkE,GAAA,IAItBtH,EAAKtF,SAAQ4M,IAEX,IAAIE,EAAcF,EAAE,GAAGE,YAAcF,EAAE,GAAGE,YAAc,CAAC,EAEzDjN,OAAOC,QAAQgN,GAAa9M,SAAQ+M,IAEX,iBAAZA,EAAM,GAGf9J,EAAiBwB,0BAA0BkG,IAAI,IAAI5B,iBAAiB6D,EAAE,GAAIG,EAAM,GAAIA,EAAM,KAQtF/C,EAAGjJ,eAAegM,EAAM,IAAIvF,OAAS,GACvCwC,EAAGW,IAAI,IAAI7B,UAAU8D,EAAE,GAAIG,EAAM,IAAE,GAGzC,IAIF/C,EAAGc,QAAQ9K,SAAQ,SAASgN,GAC1BA,EAAKP,IAAI,QAAS,IAClBO,EAAKP,IAAI,SAAU,GACrB,IAEKpM,GACD2J,EAAGiD,OAAO,CAACtE,KAAM,eAAgBuE,kBAAmB,IAAMC,6BAA6B,IAAOC,MAGlGnK,EAAiBoK,wBACVpK,CACX,CAGA,SAASqK,QAAQzB,GACf,IAAIvJ,EAAU,IAAI/B,IAAIV,OAAOC,QAAQU,eACjC+M,EAAOjN,SAAS0D,IAAI1B,EAAQ0B,IAAI6H,GAAUjC,IAC9C,IAAK2D,EACH,MAAO,cAET,IAAIC,EAAOlL,EAAQ0B,IAAIuJ,EAAKtG,UAAY,IAAMsG,EAAKrG,OAAS,IAAMqG,EAAKpG,MAAQ,IAAMoG,EAAKnG,UAAUuB,KAEpG,OAD6B,KAAlB4E,EAAKtG,UAAmB,WAAgC,KAAlBsG,EAAKtG,UAAmB,WAAa,YACxEuG,EAAK3L,MAAM,KAAK,GAAG4L,OAAS,MAAQD,EAAK3L,MAAM,KAAK,GAAG4L,MACvE,CAjjBAtK,iBAAiBuK,UAAUL,sBAAwB,SAAUzM,GAE3D,IAAI+M,EAAiB,GAErB,OAAOnJ,KAAK5D,OAAOC,YACjB,IAAK,IAAK8M,EAAehE,KAAKiE,mBAAmB,OAAc,MAC/D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,OAAc,MAC/D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,aAAc,MAC/D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,OAAc,MAC/D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,MAAc,MAC/D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,SAAc,MAC/D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,QAAc,MAC/D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,UASnD,OAAOpJ,KAAK5D,OAAOK,YACjB,IAAK,IAAK0M,EAAehE,KAAKiE,mBAAmB,SAAa,MAC9D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,OAAa,MAC9D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,SAAa,MAC9D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,OAAa,MAC9D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,OAAa,MAC9D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,SAAa,MAC9D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,OAAa,MAC9D,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,OASnD,OAAOpJ,KAAK5D,OAAOM,YACjB,IAAK,IAAKyM,EAAehE,KAAKiE,mBAAmB,SAAmB,MACpE,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,QAAmB,MACpE,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,SAAmB,MACpE,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,UAAmB,MACpE,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,QAAmB,MACpE,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,QAAmB,MACpE,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,kBAAmB,MACpE,IAAK,IAAKD,EAAehE,KAAKiE,mBAAmB,MASnDD,EAAe3N,SAAQ6N,IACjBrJ,KAAKI,kBAAkBsG,IAAI2C,KAC7BrJ,KAAKQ,qBAAqBlD,IAAI+L,EAAGrJ,KAAKI,kBAAkBZ,IAAI6J,IAC5DrJ,KAAKI,kBAAkB2G,OAAOsC,GAChC,GAGJ,EA+EA9K,IAAI2K,UAAUI,QAAU,WAEtB,OADAtJ,KAAKsD,OAAStD,KAAKoD,EAAIpD,KAAKsD,MAAQtD,KAAKqD,GAAKrD,KAAKmD,EAC5CnD,KAAKsD,KACd,EACA/E,IAAI2K,UAAUK,UAAY,WAExB,OAAOvJ,KAAKsJ,WAAatJ,KAAKmD,EAAI,EACpC,EACA5E,IAAI2K,UAAUpC,UAAY,SAAS0C,EAAOC,GAGxC,IAAIC,EAAYD,EAAMD,EAClBG,EAAe3J,KAAKsJ,UAAYtJ,KAAKmD,EACzC,OAAOI,KAAKqG,IAAIJ,EAAQjG,KAAKC,MAAMmG,EAAeD,GACpD,EACAnL,IAAI2K,UAAUW,OAAS,SAASC,GAC9B,OAAOA,EAAM9J,KAAK8G,UAAU,EAAGgD,EAAM9G,QACvC,EAqZA,IAAIoG,mBAAqB,CACvBW,MAAwB,WACxBC,MAAwB,WACxB,WAAwB,WACxBC,MAAwB,aACxBC,KAAwB,YACxBC,QAAwB,YACxBC,OAAwB,YACxBC,SAAwB,WACxB,aAAwB,YACxB,gBAAwB,YACxB,YAAwB,YACxB,WAAwB,YACxB,iBAAwB,YAExBC,QAAuB,UACvBC,MAAuB,UACvBC,QAAuB,WACvBC,MAAuB,WACvBC,MAAuB,UACvBC,QAAuB,WACvBC,MAAuB,WACvBC,MAAuB,WACvB,UAAuB,WACvB,UAAuB,WACvB,eAAuB,WACvB,WAAuB,WACvB,iBAAuB,WAEvBC,QAAqB,WACrBC,OAAqB,UACrBC,QAAqB,WACrBC,SAAqB,UACrBC,OAAqB,UACrBC,OAAqB,WACrB,gBAAqB,WACrBC,KAAqB,WACrB,YAAqB,WACrB,YAAqB,WACrB,YAAqB,WACrB,WAAqB,WACrB,mBAAqB,WACrBC,OAAqB","sources":["dist/Randomiser/Randomisation.js"],"sourcesContent":["var mixedGameData = {};\nObject.entries(FIRE_RED_WARPS).forEach(e => mixedGameData[e[0]] = e[1]);\nObject.entries(CRYSTAL_WARPS).forEach(e => mixedGameData[e[0]] = e[1]);\nObject.entries(EMERALD_WARPS).forEach(e => mixedGameData[e[0]] = e[1]);\n\nvar remappingsData = {};\nvar isHeadless = true;\n\n// WarpList used by EmulationCoreHacks.js\nvar warpList = new Map();\n\nfunction getMapData() {\n    return mixedGameData;\n}\n\nfunction getRandomisationAlgorithm() {\n    return generateRandomMappings;\n}\n\nfunction getRandomisationConfig() {\n    let config = {};\n    config.kantoLevel = document.getElementById(\"kantoLevel\").value;\n    config.jhotoLevel = document.getElementById(\"jhotoLevel\").value;\n    config.hoennLevel = document.getElementById(\"hoennLevel\").value;\n    return config;\n}\n\nfunction getFlagData() {\n  return FLAG_DATA;\n}\n\nfunction mappingToWarps(mappingData) {\n    let mappedList = new Map();\n\n    mappingData.forEach(mapping => {\n        let from = mapping.trigger;\n        let to = mapping.target;\n        let toParts = to.split(\",\");\n        mappedList.set(from, new PKWarp(from, toParts[0], toParts[1], toParts[2], toParts[3], mapping.source));\n    });\n\n    return mappedList;\n}\n\nasync function mapWarps(seed) {\n\n    flagsState = {};\n    unaddedConditionalEdges = {};\n\n    let config = getRandomisationConfig();\n    let mapData = getFilteredData();\n    let flagData = getFlagData()\n    remappingsData = getRandomisationAlgorithm().apply(null, [seed, mapData, flagData, config]);\n    warpList = mappingToWarps(getAugmetedRemappingData(remappingsData));\n\n    if (typeof storageManager !== 'undefined') {\n      storageManager.persist(\"RANDOM_MAPPING\", new WarpListData(seed, config, warpList));\n    }\n}\n\nfunction generateRandomMappings(seed, mapData, flagData, config) {\n    \n    let rng = new RNG(getHash(seed));\n    let progressionState = initMappingGraph(mapData, isHeadless, new ProgressionState(flagData, config))\n\n    var moreWarpsToMap = true;\n    while(moreWarpsToMap) {\n        moreWarpsToMap = doNextMapping(rng, 'FR,3,1,0', progressionState);\n        progressionState = updateProgressionState(progressionState, 'FR,3,1,0');\n    }\n\n   return getBaseRemappingData();\n}\n\nfunction filterIgnored(mapData) {\n    return new Map([...mapData].filter(k => !k[1].ignore));\n}\n\nfunction filterByConfig(usabledWarps, config) {\n    usabledWarps = new Map([...usabledWarps].filter(w => {\n        let filterLevel = null;\n        if (w[0][0] == \"E\") {\n            filterLevel = config.hoennLevel;\n        } else if (w[0][0] == \"F\") {\n            filterLevel = config.kantoLevel;\n        } else if (w[0][0] == \"C\") {\n            filterLevel = config.jhotoLevel;\n        }\n\n        return usabledWarps.get(w[0]).level && (+usabledWarps.get(w[0]).level <= +filterLevel);\n    }));\n    return usabledWarps;\n}\n\nfunction filteGroupedNotMain(mapData) {\n    return new Map([...mapData].filter(k => k[1].groupMain || !k[1].grouped));\n} \n\nfunction toMapBank(s) { \n    let arr = s.split(\",\"); \n    return arr[0] + \",\" + arr[1] + \",\" + arr[2] \n}\n\nfunction ProgressionState(flagData, config) {\n  this.remainingConditionalEdges = new Set();\n  this.flags = new Set();\n  this.flagData = flagData;\n  this.config = config;\n  // Locations that may grant further progress\n  this.unmarkedLocations = new Map(Object.entries(flagData.LOCATIONS_TRIGGER));\n  this.unmarkedFlags = new Map(Object.entries(flagData.COMPOSITE_FLAGS));\n  // Locations that will not grant progress but should be included anyway\n  this.unmarkedKeyLocations = new Map(Object.entries(flagData.KEY_LOCATIONS))\n}\n\nProgressionState.prototype.makeFinalLocationsKey = function (config) {\n\n  let finalLocations = [];\n\n  switch(this.config.kantoLevel) {\n    case \"1\": finalLocations.push(HINTABLE_LOCATIONS[\"BROCK\"])   ; break;\n    case \"2\": finalLocations.push(HINTABLE_LOCATIONS[\"MISTY\"])   ; break;\n    case \"3\": finalLocations.push(HINTABLE_LOCATIONS[\"LT SURGE\"]); break; \n    case \"4\": finalLocations.push(HINTABLE_LOCATIONS[\"ERIKA\"])   ; break;\n    case \"5\": finalLocations.push(HINTABLE_LOCATIONS[\"KOGA\"])    ; break;\n    case \"6\": finalLocations.push(HINTABLE_LOCATIONS[\"SABRIBA\"]) ; break;\n    case \"7\": finalLocations.push(HINTABLE_LOCATIONS[\"BLAINE\"])  ; break;\n    case \"8\": finalLocations.push(HINTABLE_LOCATIONS[\"GIOVANNI\"]); break;\n    case \"9\": \n    case \"0\": \n    case \"10\":\n    default: \n      // E4 and upwards are key locations not progression anyway  \n      break;\n  }\n\n  switch(this.config.jhotoLevel) {\n    case \"1\": finalLocations.push(HINTABLE_LOCATIONS[\"FALKNER\"]); break;\n    case \"2\": finalLocations.push(HINTABLE_LOCATIONS[\"BUGSY\"])  ; break;\n    case \"3\": finalLocations.push(HINTABLE_LOCATIONS[\"WHITNEY\"]); break; \n    case \"4\": finalLocations.push(HINTABLE_LOCATIONS[\"MORTY\"])  ; break;\n    case \"5\": finalLocations.push(HINTABLE_LOCATIONS[\"CHUCK\"])  ; break;\n    case \"6\": finalLocations.push(HINTABLE_LOCATIONS[\"JASMINE\"]); break;\n    case \"7\": finalLocations.push(HINTABLE_LOCATIONS[\"PRYCE\"])  ; break;\n    case \"8\": finalLocations.push(HINTABLE_LOCATIONS[\"CLAIR\"])  ; break;\n    case \"9\": \n    case \"0\": \n    case \"10\": \n    default:\n      // E4 and upwards are key locations not progression anyway  \n      break;\n  }\n\n  switch(this.config.hoennLevel) {\n    case \"1\": finalLocations.push(HINTABLE_LOCATIONS[\"ROXANNE\"])      ; break;\n    case \"2\": finalLocations.push(HINTABLE_LOCATIONS[\"BRAWLY\"])       ; break;\n    case \"3\": finalLocations.push(HINTABLE_LOCATIONS[\"WATTSON\"])      ; break; \n    case \"4\": finalLocations.push(HINTABLE_LOCATIONS[\"FLANNERY\"])     ; break;\n    case \"5\": finalLocations.push(HINTABLE_LOCATIONS[\"NORMAN\"])       ; break;\n    case \"6\": finalLocations.push(HINTABLE_LOCATIONS[\"WINONA\"])       ; break;\n    case \"7\": finalLocations.push(HINTABLE_LOCATIONS[\"TATE AND LIZA\"]); break;\n    case \"8\": finalLocations.push(HINTABLE_LOCATIONS[\"JAUN\"])         ; break;\n    case \"9\": \n    case \"0\": \n    case \"10\": \n    default:\n      // E4 and upwards are key locations not progression anyway  \n      break;\n  }\n\n  finalLocations.forEach(l => {\n    if (this.unmarkedLocations.has(l)) {\n      this.unmarkedKeyLocations.set(l, this.unmarkedLocations.get(l))\n      this.unmarkedLocations.delete(l);\n    }\n  })\n\n}\n\n/** \n *  Warp data model\n */\nfunction WarpListData(seed, config, warpList) {\n  this.warpList = Array.from(warpList.entries());\n  this.seed = seed;\n  this.config = config;\n} \n\nfunction exportMapping() {\n  storageManager.find(\"RANDOM_MAPPING\").then(s => {\n      let data = JSON.stringify(s);\n      let file = new File([data], \"WarpMapping.json\", {type: \"application/json;charset=utf-8\"});\n      saveAs(file);\n  });\n}\n\nfunction importMapping() {\n  let file = this.files[0];\n\n  let reader = new FileReader();\n  reader.readAsText(file,'UTF-8');\n\n  reader.onload = readerEvent => {\n      let content = readerEvent.target.result;\n      let warpListData = JSON.parse(content);\n      updateWarpListData(warpListData);\n      storageManager.persist(\"RANDOM_MAPPING\", warpListData);\n   }\n}\n\nfunction updateWarpListData(warpListData) {\n  document.getElementById(\"input_seed_text\").value = warpListData.seed;\n\n  document.getElementById(\"kantoLevel\").value = warpListData.config.kantoLevel;\n  document.getElementById(\"jhotoLevel\").value = warpListData.config.jhotoLevel;\n  document.getElementById(\"hoennLevel\").value = warpListData.config.hoennLevel;\n  M.FormSelect.getInstance(document.getElementById(\"kantoLevel\"))._handleSelectChangeBound();\n  M.FormSelect.getInstance(document.getElementById(\"jhotoLevel\"))._handleSelectChangeBound();\n  M.FormSelect.getInstance(document.getElementById(\"hoennLevel\"))._handleSelectChangeBound();\n\n  warpList = new Map(warpListData.warpList);\n}\n\n/**\n *  Warp Script model \n */\n function PKWarp(trigger, romCode, bank, map, warpNo, source) {\n    this.trigger = trigger;\n    this.toRomCode = romCode;\n    this.toBank = bank;\n    this.toMap = map;\n    this.toWarpNo = warpNo;\n    this.source = source;\n}\n\n/**\n *  SEEDED RNG MANAGEMENT\n */\n\nfunction getHash(input){\n    var hash = 0, len = input.length;\n    for (var i = 0; i < len; i++) {\n      hash  = ((hash << 5) - hash) + input.charCodeAt(i);\n      hash |= 0; // to 32bit integer\n    }\n    return hash;\n}\n\nfunction RNG(seed) {\n    // LCG using GCC's constants\n    this.m = 0x80000000; // 2**31;\n    this.a = 1103515245;\n    this.c = 12345;\n  \n    this.state = seed ? seed : Math.floor(Math.random() * (this.m - 1));\n}\nRNG.prototype.nextInt = function() {\n  this.state = (this.a * this.state + this.c) % this.m;\n  return this.state;\n}\nRNG.prototype.nextFloat = function() {\n  // returns in range [0,1]\n  return this.nextInt() / (this.m - 1);\n}\nRNG.prototype.nextRange = function(start, end) {\n  // returns in range [start, end): including start, excluding end\n  // can't modulu nextInt because of weak randomness in lower bits\n  var rangeSize = end - start;\n  var randomUnder1 = this.nextInt() / this.m;\n  return Math.abs(start + Math.floor(randomUnder1 * rangeSize));\n}\nRNG.prototype.choice = function(array) {\n  return array[this.nextRange(0, array.length)];\n}\n\n/**\n *  GRAPHING / CONNECTION MANAGEMENT\n */\n\n function ReigonNode(id) {\n    this.data = {};\n    this.data.id = id;\n    this.classes = 'reigon';\n}\n\nfunction AreaNode(id) {\n    this.data = {};\n    this.data.id = id;\n    this.data.parent = toReigon(id);\n    this.data.label = MAP_NAMES[id] ? id + \" (\" + MAP_NAMES[id] + \")\" : id;\n}\n\nfunction WarpNode(data) {\n    this.data = {};\n    this.data.id = data[0];\n    this.data.parent = toMapBank(data[0]);\n    this.data.label = data[1].name ? data[0] + data[1].name.split(\"-\")[2] : data[0] + \" (Unnamed)\";\n    this.classes = 'outline';\n    this.data.isWarp = true;\n    this.data.isMapped = false;\n}\n\nfunction FixedEdge(source, target) {\n    this.data = {};\n    this.data.id = source + \"->\" + target;\n    this.data.source = source;\n    this.data.target = target;\n    this.classes = 'fixed';\n}\n\nfunction CondidtionalEdge(source, target, condition) {\n  this.data = {};\n  this.data.id = source + \"->\" + target;\n  this.data.source = source;\n  this.data.target = target;\n  this.classes = 'conditional';\n  this.condition = condition;\n}\n\nfunction WarpEdge(source, target, count) {\n  this.data = {};\n  this.data.id = source + \"->\" + target + \"#\" + window.cy.getElementById(source + \"->\" + target).length;\n  this.data.source = source;\n  this.data.target = target;\n  this.data.isWarp = true;\n  this.classes = 'warp';\n}\n\nfunction getAugmetedRemappingData(remappingData) {\n\n  remappingData = addGroupedMappings(remappingData);\n  remappingData = addTriggerData(remappingData);\n\n  return remappingData;\n}\n\nfunction addGroupedMappings(remappingData) {\n  \n  let groupMappings = [];\n\n  remappingData.forEach(m => {\n    let groups = getMapData()[m.source].grouped;\n    if (groups) {\n      groups.forEach(g => {\n        groupMappings.push({source: g, target: m.target});\n      });\n    }\n  })\n\n  return [...remappingData, ...groupMappings];\n}\n\nfunction addTriggerData(remappingData) {\n\n  return remappingData.map(m => {\n    m.trigger = getMapData()[m.source].to;\n    return m;\n  });\n\n}\n\nfunction getBaseRemappingData() {\n  return cy.edges().filter(e => e.data().isWarp).map(e => { return {source: e.data().source, target: e.data().target} });\n}\n\nfunction getFilteredData() {\n    let warpIdData = new Map(Object.entries(getMapData()));\n    warpIdData = filterIgnored(warpIdData);\n    warpIdData = filteGroupedNotMain(warpIdData);\n    warpIdData = filterByConfig(warpIdData, getRandomisationConfig());\n    return warpIdData;\n}\n\nfunction toReigon(id) {\n    switch(id[0]) {\n        case 'F': return 'KANTO'\n        case 'C': return 'JHOTO'\n        case 'E': return 'HOENN'\n    }\n}\n\nfunction findAccessibleUnmappedNodes(cy, root) {\n  let nodeSet = new Set();\n  cy.elements().bfs({roots: cy.getElementById(root), directed: true, visit: (v, e, u, i, depth) => {\n    \n    if(!v.data().isMapped) {\n      nodeSet.add(v)\n    }\n\n  }});\n  return nodeSet;\n}\n\nfunction doNextMapping(rng, root, progressionState) {\n    let accessibleNodes = findAccessibleUnmappedNodes(window.cy, root);\n    let inacessibleNodes = cy.nodes().not(accessibleNodes).filter(e => e.data().isWarp && !e.data().isMapped);\n    let inaccesibleFlagLocations = inacessibleNodes.filter(n => progressionState.unmarkedLocations.has(n.data().id));\n    let inaccesibleKeyLocations = inacessibleNodes.filter(n => progressionState.unmarkedLocations.has(n.data().id));\n\n    if(accessibleNodes.size == 0 && inacessibleNodes.length == 0) { \n      return false; \n    }\n\n    let warp1 = [...accessibleNodes][rng.nextRange(0, accessibleNodes.size - 1)];\n    accessibleNodes.delete(warp1);\n    \n    let warp2 = null;\n\n    let useConditionalOverHubThreashold = 10;\n    if (inacessibleNodes.filter(e => e.degree(true) > 0).length > 0 && accessibleNodes.size <= useConditionalOverHubThreashold) {\n\n      // Add nodes that have multiple connections\n      inacessibleNodes = inacessibleNodes.filter(e => e.degree(true) > 0);\n      warp2 = inacessibleNodes[rng.nextRange(0, inacessibleNodes.length - 1)];\n\n    } else if (inaccesibleFlagLocations.length > 0) { \n\n      // Add inacessible dead-ends that might allow flags givinb access to new locations\n      warp2 = inaccesibleFlagLocations[rng.nextRange(0, inaccesibleFlagLocations.length - 1)];\n\n    } else if (inaccesibleKeyLocations.length > 0) {\n\n      // Add key inacessible locations \n      warp2 = inaccesibleKeyLocations[rng.nextRange(0, inaccesibleKeyLocations.length - 1)];\n\n    } else if (inacessibleNodes.length > 0) {\n\n      // Add other inacessible dead-ends \n      warp2 = inacessibleNodes[rng.nextRange(0, inacessibleNodes.length - 1)];\n\n    } else if (accessibleNodes.size > 0) {\n\n      // map together nodes that are already acessible\n      warp2 = [...accessibleNodes][rng.nextRange(0, accessibleNodes.size - 1)];\n\n    } else {\n      //console.warn(\"Unevenly matched warps. \" + warp1.data().id + \" had to map to itself\");\n      // warp2 = warp1\n\n      // if one warp is left hanging we connect it to altering cave from fire red\n      warp2 = cy.add(new WarpNode(['FR,1,122,0', getMapData()[\"FR,1,122,0\"]]));\n    }\n\n    if (!warp1) {\n      \n      if (accessibleNodes.size != 0) {\n        console.log(\"Some accessible nodes were left:\")\n        accessibleNodes.forEach(n => {\n          console.log(n.data().id)\n        })\n      } else {\n        console.log(\"All accesible nodes mapped\")\n      }\n\n      if (inacessibleNodes.size != 0) {\n        console.log(\"Some inaccessible nodes were left:\")\n        inacessibleNodes.forEach(n => {\n          console.log(n.data().id)\n        })\n\n        warp2.data().isMapped = true;\n        return false;\n\n      } else {\n        console.log(\"All inaccesible nodes mapped\")\n      }\n\n    }\n\n    window.cy.add(new WarpEdge(warp1.data().id, warp2.data().id))\n\n    if (warp1 != warp2) {\n          window.cy.add(new WarpEdge(warp2.data().id, warp1.data().id))\n    }\n    \n    warp1.data().isMapped = true;\n    warp2.data().isMapped = true;\n\n    return true;\n}\n\n\nfunction updateProgressionState(updateProgressionState, root) {\n\n  let currentNodes = new Set();\n  cy.elements().bfs({roots: cy.getElementById(root), directed: true, visit: (v, e, u, i, depth) => { \n    currentNodes.add(v.data().id) \n  }});\n\n  updateProgressionState.unmarkedLocations.forEach((name, location) => {\n    if (currentNodes.has(location)) {\n      updateProgressionState.unmarkedLocations.delete(location);\n      updateProgressionState.flags.add(name);\n    }\n  });\n\n  updateProgressionState.unmarkedFlags.forEach(n => {\n    if (n.condition.every(flag => updateProgressionState.flags.has(flag))) {\n      updateProgressionState.flags.add(n.flag);\n      updateProgressionState.unmarkedFlags.delete(n.flag)\n    }\n  });\n\n  let conditionalEdges = updateProgressionState.remainingConditionalEdges;\n  conditionalEdges.forEach(e => {\n    if (updateProgressionState.flags.has(e.condition)) {\n      if (cy.getElementById(e.data.target).length > 0 && cy.getElementById(e.data.source).length > 0) {\n        cy.add(e);\n      }\n      conditionalEdges.delete(e);\n    }\n  });\n\n  return updateProgressionState;\n}\n\nfunction initMappingGraph(mapData, isHeadless, progressionState) {\n\n  var cy = window.cy = cytoscape({\n      container: isHeadless ? null : document.getElementById('cy'),\n      headless: isHeadless,\n      styleEnabled: !isHeadless,\n      boxSelectionEnabled: false,\n      textureOnViewport: true,\n    \n      style: [\n        {\n          selector: 'node',\n          css: {\n            'content': 'data(id)',\n            'text-valign': 'center',\n            'text-halign': 'center'\n          }\n        },\n        {\n          selector: ':parent',\n          css: {\n            'text-valign': 'top',\n            'text-halign': 'center'      \n          },\n          style: {\n            'shape' : 'roundrectangle',\n          }\n        },\n        {\n          selector: 'edge',\n          css: {\n            'curve-style': 'bezier',\n            'target-arrow-shape': 'triangle'\n          }\n        },\n        {\n          'selector': 'node[label]',\n          'style': {\n            'label': 'data(label)',\n            'text-valign': 'bottom',\n            'text-halign': 'center'\n          }\n        },\n        {\n          selector: '.reigon',\n          css: {\n              'background-color': '#2f3138'\n          }\n        },\n        {\n          selector: '.map-F',\n          css: {\n              'background-color': '#ffc0c3'\n          }\n        },\n        {\n          selector: '.map-C',\n          css: {\n              'background-color': '#c0c3ff'\n          }\n        },\n        {\n          selector: '.map-E',\n          css: {\n              'background-color': '#c3ffc0'\n          }\n        },\n        {\n          selector: '.warp',\n          css: {\n            'line-color': '#f92411',\n            \"curve-style\": \"straight-triangle\",\n          }\n        },\n        {\n          selector: '.conditional',\n          css: {\n            'line-color': '#1911f9'\n          }\n        },\n        {\n          selector: '.fixed',\n          css: {\n            'opacity': '0.5'\n          }\n        }\n      ],\n    \n      elements: {\n        nodes: [],\n        edges: []\n      }\n    });\n\n\n    cy.add(new ReigonNode(\"KANTO\"));\n    cy.add(new ReigonNode(\"JHOTO\"));\n    cy.add(new ReigonNode(\"HOENN\"));\n\n    let data = [...mapData];\n\n    // Add the nodes\n    data.forEach(d => {\n\n      if (!cy.getElementById(toMapBank(d[0])).length) {\n          cy.add(new AreaNode(toMapBank(d[0]))).addClass(\"map-\" + d[0][0]);\n      }\n\n      cy.add(new WarpNode(d));\n    })\n\n    // Add fixed edges\n    data.forEach(d => {\n\n      let connections = d[1].connections ? d[1].connections : {};\n\n      Object.entries(connections).forEach(entry => {\n\n        if (typeof entry[1] == 'string') {\n\n          // Conditional Connection\n          progressionState.remainingConditionalEdges.add(new CondidtionalEdge(d[0], entry[0], entry[1]));\n\n        } else {\n\n          // Fixed Connection       \n\n          // Only draw path if connection node is present in total list of warps\n          // i.e if I'm only doing warps to first gym, don't draw a connection to a gym 2 level warp \n          if (cy.getElementById(entry[0]).length > 0) {\n            cy.add(new FixedEdge(d[0], entry[0]))\n          }\n        }\n      });\n    });\n\n\n    cy.nodes().forEach(function(node){\n      node.css(\"width\", 80);\n      node.css(\"height\", 80);\n    });\n\n    if (!isHeadless) {\n        cy.layout({name: 'cose-bilkent', animationDuration: 1000, nodeDimensionsIncludeLabels: true}).run();\n    }\n\n    progressionState.makeFinalLocationsKey();\n    return progressionState;\n}\n\n/* HINTS */\nfunction getHint(location) {\n  let mapData = new Map(Object.entries(getMapData()));\n  let warp = warpList.get(mapData.get(location).to);\n  if (!warp) {\n    return \"NOT PRESENT\";\n  }\n  let info = mapData.get(warp.toRomCode + \",\" + warp.toBank + \",\" + warp.toMap + \",\" + warp.toWarpNo).name;\n  let hint = warp.toRomCode == \"E\" ? \"HOENN - \" : (warp.toRomCode == \"C\" ? \"JHOTO - \" : \"KANTO - \");\n  return hint + info.split(\"-\")[0].trim() + \" - \" + info.split(\"-\")[1].trim();\n}\n\nvar HINTABLE_LOCATIONS = {\n  \"BROCK\"               : \"FR,6,2,1\"  ,\n  \"MISTY\"               : \"FR,7,5,1\"  ,\n  \"LT SURGE\"            : \"FR,9,6,1\"  ,\n  \"ERIKA\"               : \"FR,10,16,1\",\n  \"KOGA\"                : \"FR,11,3,1\" ,\n  \"SABRINA\"             : \"FR,14,3,1\" ,\n  \"BLAINE\"              : \"FR,12,0,1\" ,\n  \"GIOVANNI\"            : \"FR,5,1,1\"  ,\n  \"E4 LORELEI\"          : \"FR,1,75,0\" ,\n  \"E4 BRUNO (FR)\"       : \"FR,1,76,0\" ,\n  \"E4 AGATHA\"           : \"FR,1,77,0\" ,\n  \"E4 LANCE\"            : \"FR,1,78,0\" ,\n  \"CHAMPION RIVAL\"      : \"FR,1,79,0\" ,\n\n  \"FALKNER\"            : \"C,8,1,0\" ,\n  \"BUGSY\"              : \"C,3,3,0\" ,\n  \"WHITNEY\"            : \"C,11,3,0\",\n  \"MORTY\"              : \"C,12,1,0\",\n  \"CHUCK\"              : \"C,4,1,0\" ,\n  \"JASMINE\"            : \"C,10,0,0\",\n  \"PRYCE\"              : \"C,14,0,0\",\n  \"CLAIR\"              : \"C,15,0,0\",\n  \"E4 WILL\"            : \"C,16,0,0\",\n  \"E4 KOGA\"            : \"C,16,1,0\",\n  \"E4 BRUNO (C)\"       : \"C,16,2,0\",\n  \"E4 KAREN\"           : \"C,16,3,0\",\n  \"CHAMPION LANCE\"     : \"C,16,4,0\", \n\n  \"ROXANNE\"          : \"E,11,3,0\"  ,\n  \"BRAWLY\"           : \"E,3,3,0\"   ,\n  \"WATTSON\"          : \"E,10,0,0\"  ,\n  \"FLANNERY\"         : \"E,4,1,0\"   ,\n  \"NORMAN\"           : \"E,8,1,0\"   ,\n  \"WINONA\"           : \"E,12,1,0\"  ,\n  \"TATE AND LIZA\"    : \"E,14,0,0\"  ,\n  \"JAUN\"             : \"E,15,0,0\"  , \n  \"E4 SIDNEY\"        : \"E,16,0,0\"  ,\n  \"E4 PHOEBE\"        : \"E,16,1,0\"  ,\n  \"E4 GLACIA\"        : \"E,16,2,0\"  ,\n  \"E4 DRAKE\"         : \"E,16,3,0\"  ,\n  \"CHAMPION WALLACE\" : \"E,16,4,0\"  ,\n  \"STEVEN\"           : \"E,24,107,0\",\n}\n"],"names":["mixedGameData","Object","entries","FIRE_RED_WARPS","forEach","e","CRYSTAL_WARPS","EMERALD_WARPS","remappingsData","isHeadless","warpList","Map","getMapData","getRandomisationAlgorithm","generateRandomMappings","getRandomisationConfig","config","kantoLevel","document","getElementById","value","jhotoLevel","hoennLevel","getFlagData","FLAG_DATA","mappingToWarps","mappingData","mappedList","mapping","from","trigger","toParts","target","split","set","PKWarp","source","async","mapWarps","seed","flagsState","unaddedConditionalEdges","mapData","getFilteredData","flagData","apply","getAugmetedRemappingData","storageManager","persist","WarpListData","rng","RNG","getHash","progressionState","initMappingGraph","ProgressionState","moreWarpsToMap","doNextMapping","updateProgressionState","getBaseRemappingData","filterIgnored","filter","k","ignore","filterByConfig","usabledWarps","w","filterLevel","get","level","filteGroupedNotMain","groupMain","grouped","toMapBank","s","arr","this","remainingConditionalEdges","Set","flags","unmarkedLocations","LOCATIONS_TRIGGER","unmarkedFlags","COMPOSITE_FLAGS","unmarkedKeyLocations","KEY_LOCATIONS","Array","exportMapping","find","then","data","JSON","stringify","file","File","type","saveAs","importMapping","files","reader","FileReader","readAsText","onload","readerEvent","content","result","warpListData","parse","updateWarpListData","M","FormSelect","getInstance","_handleSelectChangeBound","romCode","bank","map","warpNo","toRomCode","toBank","toMap","toWarpNo","input","hash","len","length","i","charCodeAt","m","a","c","state","Math","floor","random","ReigonNode","id","classes","AreaNode","parent","toReigon","label","MAP_NAMES","WarpNode","name","isWarp","isMapped","FixedEdge","CondidtionalEdge","condition","WarpEdge","count","window","cy","remappingData","addTriggerData","addGroupedMappings","groupMappings","groups","g","push","to","edges","warpIdData","findAccessibleUnmappedNodes","cy1","root","nodeSet","elements","bfs","roots","directed","visit","v","u","depth","add","accessibleNodes","inacessibleNodes","nodes","not","inaccesibleFlagLocations","n","has","inaccesibleKeyLocations","size","warp1","nextRange","delete","warp2","degree","console","log","currentNodes","location","every","flag","conditionalEdges","cytoscape","container","headless","styleEnabled","boxSelectionEnabled","textureOnViewport","style","selector","css","shape","opacity","d","addClass","connections","entry","node","layout","animationDuration","nodeDimensionsIncludeLabels","run","makeFinalLocationsKey","getHint","warp","info","trim","prototype","finalLocations","HINTABLE_LOCATIONS","l","nextInt","nextFloat","start","end","rangeSize","randomUnder1","abs","choice","array","BROCK","MISTY","ERIKA","KOGA","SABRINA","BLAINE","GIOVANNI","FALKNER","BUGSY","WHITNEY","MORTY","CHUCK","JASMINE","PRYCE","CLAIR","ROXANNE","BRAWLY","WATTSON","FLANNERY","NORMAN","WINONA","JAUN","STEVEN"],"version":3,"file":"index.36baaf30.js.map"}