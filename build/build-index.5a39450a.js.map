{"mappings":"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","sources":["dist/ui/ClientUI.js"],"sourcesContent":["const fileSystem = null;//window.__TAURI__ ? window.__TAURI__.fs : null;\nconst VERSION_NUMBER = \"0.9.23-ALPHA\";\n\nvar debugConsole;\ndocument.addEventListener('DOMContentLoaded', function() {\n\n    console.info(\"Version \" + VERSION_NUMBER);\n    document.getElementById(\"version\").innerHTML = VERSION_NUMBER;\n    \n    M.Modal.init(document.getElementById('menu'), {\n      \n      onOpenStart: () => IodineGUI.isPlaying && IodineGUI.Iodine.pause(),\n      onCloseEnd: () => !IodineGUI.isPlaying && IodineGUI.Iodine.playStatusCallback && IodineGUI.Iodine.play(),\n      dismissible: false\n    \n    }).open();      \n\n    initMenu();\n\n    let updateModal = M.Modal.init(document.getElementById('updateModal'), {\n      \n      onOpenStart: () => populateUpdateDialog(),\n      onCloseEnd: () => dissmissUpdateDialog(),\n      dismissible: true\n    \n    })\n    \n    if (!findValue(\"GBAXG_lastVersionMessage\") || VERSION_COMPARITOR.apply(this, [findValue(\"GBAXG_lastVersionMessage\"), VERSION_NUMBER]) < 0) {\n      updateModal.open();\n    }\n\n    createAndLoadConfig();\n\n     M.Autocomplete.init(document.getElementById(\"autocomplete-items\"), { limit: 4, data : Object.keys(ITEM_DATA).reduce((v1, v2) => { v1[v2] = null; return v1 }, {}) });\n     M.Autocomplete.init(document.getElementById(\"autocomplete-locations\"), { limit: 4, data : Object.keys(KEY_LOCATION_DATA).reduce((v1, v2) => { v1[v2] = null; return v1 }, {}), onAutocomplete : () => {\n        let locationParts = KEY_LOCATION_DATA[document.getElementById(\"autocomplete-locations\").value].split(\",\");\n        document.getElementById(\"game-value-input\").value = locationParts[0];\n        document.getElementById(\"bank-value-input\").value = locationParts[1];\n        document.getElementById(\"map-value-input\").value = locationParts[2];\n        document.getElementById(\"warp-value-input\").value = locationParts[3];\n        M.FormSelect.getInstance(document.getElementById(\"game-value-input\"))._handleSelectChangeBound();\n     }});\n\n    populateHints(); \n\n    M.FormSelect.init(document.querySelectorAll('select'), {});\n    debugConsole = M.Modal.init(document.getElementById('console'), {});\n\n    document.querySelectorAll(\"input[type=text]\").forEach(e => e.addEventListener('focusin', (event) => userInputEnabled = false));\n    document.querySelectorAll(\"input[type=text]\").forEach(e => e.addEventListener('focusout', (event) => userInputEnabled = true));\n});\n\n\nfunction debounce(func, timeout = 300){\n    let timer;\n    return (...args) => {\n      clearTimeout(timer);\n      timer = setTimeout(() => { func.apply(this, args); }, timeout);\n    };\n}\n\nfunction initMenu() {\n  M.Carousel.init(document.querySelectorAll('.carousel'), { numVisible: 5, dist: -20, noWrap: true, preventLoop: true, enableTouch: false, duration: 30});\n\n  document.querySelectorAll(\".carousel-item\").forEach(e => e.setAttribute(\"draggable\", false));\n  document.querySelectorAll(\".left-menu-button\").forEach(e => e.onclick = () =>  M.Carousel.getInstance(document.getElementById(\"menuCarousel\")).prev());\n  document.querySelectorAll(\".right-menu-button\").forEach(e => e.onclick = () =>  M.Carousel.getInstance(document.getElementById(\"menuCarousel\")).next());\n}\n\nwindow.addEventListener('resize', initMenu, true);\n\nfunction toggleMenu() {\n  let menu = M.Modal.getInstance(document.getElementById('menu'));\n  menu.isOpen ? menu.close() : menu.open();\n\n  // Fixes bug in materialize.js when resizing modals\n  window.dispatchEvent(new Event('resize'));\n}\n\nasync function createAndLoadConfig() {\n\n  if(fileSystem) {\n    fileSystem.readTextFile(DEFAULT_KEYBIND_CONFIG_PATH, {dir: fileSystem.BaseDirectory.App}).then(initKeybinds, e => {\n      initKeybinds(DEFAULT_KEYBIND_CONFIG);\n\n      fileSystem.createDir(fileToDirPath(DEFAULT_KEYBIND_CONFIG_PATH), { dir: fileSystem.BaseDirectory.App, recursive: true })\n      .then(fileSystem.writeTextFile(DEFAULT_KEYBIND_CONFIG_PATH, DEFAULT_KEYBIND_CONFIG, { dir: fileSystem.BaseDirectory.App }));\n    });\n  } else {\n    storageManager.find(\"keybinds\").then(initKeybinds, e => {\n      initKeybinds(DEFAULT_KEYBIND_CONFIG);\n      storageManager.persist(keybinds, DEFAULT_KEYBIND_CONFIG);\n    })\n  }\n}\n\nfunction fileToDirPath(path) {\n  return path.slice(0, path.lastIndexOf(\"/\"));\n}\n\nfunction dissmissUpdateDialog() {\n  setValue(\"GBAXG_lastVersionMessage\", VERSION_NUMBER);\n}\n\nfunction populateUpdateDialog() {\n  let element = document.getElementById(\"updateModalText\");\n  element.innerHTML += \"<h5 class='card-panel red darken-1 white-text'>UPDATE: \" + VERSION_NUMBER + \"</h5>\";\n\n  let ul = document.createElement('ul');\n  ul.classList.add(\"updateList\");\n  RELEASE_NOTES[VERSION_NUMBER].forEach(note => {\n      let li = document.createElement('li');\n      li.innerHTML=note;\n      ul.appendChild(li);\n  });\n\n  element.innerHTML += ul.outerHTML;\n\n  element.innerHTML += \"<div class='olderVersions'>\" + \n                       \"<a href='https://kittypboxx.github.io/GBAXG/dist/'>Latest Nightly Version (Unstable)</a> <br>\" + \n                       \"<a href='../Historic/index.html'>Older Versions</a> <br>\" + \n                       \"<a href='https://trello.com/b/esQs4wx3/multi-game-random-warps'>See Development Progress</a>\" + \n                       \"</div>\";\n}\n\n/* CONTROLS */\n\n\ndocument.addEventListener('keydown', e => doInput(e.code, true, false));\ndocument.addEventListener('keyup', e => doInput(e.code, false, false));\n\nCommandExecutor.register(\"toggleMenu\", args => toggleMenu());\n\nlet keybinds = new Map();\nfunction initKeybinds(conf) {\n\n  conf = JSON.parse(conf);\n\n  let table = document.getElementById(\"key-binding-table\");\n\n  conf.sort(sortCommands)\n  conf.forEach(binding => {\n    if (binding.type == \"exec\") {\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Down\", binding.command);\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Down\", binding.command);\n    }\n    else if (binding.type == \"button\") {\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Down\", binding.command + \"Down\");\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Up\"  , binding.command + \"Up\"  );\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Down\", binding.command + \"Down\");\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Up\"  , binding.command + \"Up\"  );\n    }\n\n    let row = table.insertRow(table.rows.length);\n\n    let keyCell = row.insertCell(0);\n    keyCell.innerHTML = `<td>&nbsp;${binding.command.replace(\"Key\", \"\")}</td>`;\n\n    let kbdCell = row.insertCell(1);\n    kbdCell.innerHTML = `<td>&nbsp;<span>${binding.kbd.replace(\"Key\", \"\") || \"N/A\"}</span></td>`;\n    kbdCell.setAttribute(\"data-command\", binding.command);\n    kbdCell.setAttribute(\"data-type\", binding.type);\n    kbdCell.addEventListener(\"click\", listenForKbdBinding)\n\n    let gmpdCell = row.insertCell(2);\n    gmpdCell.innerHTML = `<td>&nbsp;<span>${binding.gmpd || \"N/A\"}</span></td>`;\n    gmpdCell.setAttribute(\"data-command\", binding.command);\n    gmpdCell.setAttribute(\"data-type\", binding.type);\n    gmpdCell.addEventListener(\"click\", listenForGmpdBinding);\n  });\n}\n\nlet listenFor = false;\n\nfunction listenForKbdBinding(e) {\n  M.Toast.dismissAll();\n  listenFor = {\n    isGamepad: false, \n    command: e.currentTarget.getAttribute(\"data-command\"), \n    type: e.currentTarget.getAttribute(\"data-type\"),\n    elmnt: e.currentTarget,\n    oldCode: e.currentTarget.querySelector(\"span\").innerHTML\n  };\n  M.toast({html: 'Press any key...', displayLength:3000, completeCallback: () => freezeClic = listenFor = false });\n  freezeClic = true;\n}\n\nfunction listenForGmpdBinding(e) {\n  M.Toast.dismissAll();\n  listenFor = {\n    isGamepad: true, \n    command: e.currentTarget.getAttribute(\"data-command\"), \n    type: e.currentTarget.getAttribute(\"data-type\"),\n    elmnt: e.currentTarget,\n    oldCode: e.currentTarget.querySelector(\"span\").innerHTML\n  };\n  M.toast({html: 'Press any button...', displayLength:3000, completeCallback: () => freezeClic = listenFor = false });\n  freezeClic = true;\n}\n\nvar userInputEnabled = true;\nfunction doInput(code, isDown, isGamepad) {\n\n  if (!userInputEnabled) { return; }\n  //if (code == \"Slash\") { debugConsole.open(); return; }\n\n  if (listenFor && !listenFor.isGamepad && !isGamepad && isDown) {\n\n    if (listenFor.type == \"button\") {\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Down\");\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Up\");\n\n      keybinds.set(\"KBD-\" + code + \"-Down\", listenFor.command + \"Down\");\n      keybinds.set(\"KBD-\" + code + \"-Up\"  , listenFor.command + \"Up\"  );\n    } else if (listenFor.type == \"exec\") {\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Down\");\n\n      keybinds.set(\"KBD-\"  + code + \"-Down\", listenFor.command);\n    }\n\n    listenFor.elmnt.innerHTML = `<td>&nbsp;<span>${code.replace(\"Key\", \"\")}</span></td>`;\n    listenFor = false;\n    M.Toast.dismissAll();\n\n    writeKeybinds();\n\n  } else if (listenFor && listenFor.isGamepad && isGamepad && isDown) {\n\n    if (listenFor.type == \"button\") {\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Down\");\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Up\");\n\n      keybinds.set(\"GMPD-\" + code + \"-Down\", listenFor.command + \"Down\");\n      keybinds.set(\"GMPD-\" + code + \"-Up\"  , listenFor.command + \"Up\"  );\n    } else if (listenFor.type == \"exec\") {\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Down\");\n\n      keybinds.set(\"GMPD-\"  + code + \"-Down\", listenFor.command);\n    }\n\n    listenFor.elmnt.innerHTML = `<td>&nbsp;<span>${code}</span></td>`;\n    listenFor = false;\n    M.Toast.dismissAll();\n\n    writeKeybinds();\n\n  } else {\n\n    code = \"\" + (isGamepad ? \"GMPD-\" : \"KBD-\") + code + (isDown ? \"-Down\" : \"-Up\");\n    keybinds.get(code) && CommandExecutor.execute(keybinds.get(code));\n\n  }\n\n}\n\nfunction writeKeybinds() {\n\n  let config = [];\n\n  new Set([...keybinds.values()].filter(v => !v.includes(\"KeyUp\"))).forEach(c => {\n\n    let keybind = {};\n\n    let isButton = c.includes(\"Down\") && [...keybinds].filter(([k,v]) => v == c.replace(\"Down\", \"Up\") > 0);\n    keybind.type = isButton ? \"button\" : \"exec\";\n\n    keybind.command = isButton ? c.replace(/KeyDown$/, \"Key\") : c;\n\n    keybind.kbd = null;\n    keybind.gmpd = null;\n    [...keybinds].filter(([k,v]) => v == c).forEach(m => keybind[m[0].includes(\"KBD\") ? \"kbd\" : \"gmpd\"] = m[0].match(/-(.*)-/).pop());\n\n    config.push(keybind);\n\n  });\n  \n  config.sort(sortCommands)\n  let printPrettyJson = JSON.stringify(config, null, 2).replace(/([\\\"|(null)|\\{],?)\\n/g, \"$1\");\n\n  if (fileSystem) {\n    fileSystem.writeTextFile(DEFAULT_KEYBIND_CONFIG_PATH, printPrettyJson, { dir: fileSystem.BaseDirectory.App })\n  } else {\n    storageManager.persist(\"keybinds\", printPrettyJson);\n  }\n  \n}\n\nfunction sortCommands(a,b) {\n  return (a.type + commandToIndex(a.command) > b.type + commandToIndex(b.command)) ? 1: -1;\n}\n\nfunction commandToIndex(c) {\n  switch(c) {\n    case \"AKey\"      : return 0;\n    case \"BKey\"      : return 1;\n    case \"LKey\"      : return 2;\n    case \"RKey\"      : return 3;\n    case \"StartKey\"  : return 4;\n    case \"SelectKey\" : return 5;\n    case \"UpKey\"     : return 6;\n    case \"DownKey\"   : return 7;\n    case \"LeftKey\"   : return 8;\n    case \"RightKey\"  : return 9;\n    case \"SpeedUp\"   : return 10;\n    case \"Restart\"   : return 11;\n    case \"toggleMenu\": return 12;\n    default: return 999;\n  }\n}\n\nfunction menuInput(c) {\n  switch(c) {\n    case \"A\"      : \n    break;\n    case \"B\"      : \n    break;\n    case \"L\"      :\n      M.Carousel.getInstance(document.getElementById('menuCarousel')).prev();\n    break;\n    case \"R\"      : \n      M.Carousel.getInstance(document.getElementById('menuCarousel')).next();\n    break;\n    case \"START\"  : \n    break;\n    case \"SELECT\" : \n    break;\n    case \"UP\"     : \n    break;\n    case \"DOWN\"   : \n    break;\n    case \"LEFT\"   : \n    break;\n    case \"RIGHT\"  : \n    break;\n  }\n}\n\nlet freezeClic = false; \ndocument.addEventListener(\"click\", e => {\n    if (freezeClic) {\n        M.Toast.dismissAll();\n        e.stopPropagation();\n        e.preventDefault();\n    }\n}, true);\n\n/* Hints */\nfunction populateHints() {\n  let table = document.getElementById(\"hint-table\");\n  Object.entries(HINTABLE_LOCATIONS).forEach(e => {\n    let row = table.insertRow(table.rows.length);\n\n    let nameCell = row.insertCell(0);\n    nameCell.innerHTML = `<td>&nbsp;${e[0]}</td>`;\n\n    let buttonCell = row.insertCell(1);\n    buttonCell.innerHTML = `<td>&nbsp;<span>Show Hint</span></td>`;\n    buttonCell.setAttribute(\"data-location\", e[1]);\n    buttonCell.setAttribute(\"data-target\", `hint-table-${e[0].replaceAll(\" \", \"-\")}`)\n    buttonCell.addEventListener(\"click\", displayHint)\n\n    let hintCell = row.insertCell(2);\n    hintCell.setAttribute(\"id\", `hint-table-${e[0].replaceAll(\" \", \"-\")}`)\n    hintCell.innerHTML = `<td>&nbsp;...</td>`;\n  })\n}\n\nfunction displayHint(e) {\n  let target = document.getElementById(e.currentTarget.getAttribute(\"data-target\"));\n  let hint = getHint(e.currentTarget.getAttribute(\"data-location\"));\n  target.innerHTML = hint;\n}\n\ndocument.addEventListener('swiped-down', e => {\n  console.log(e.detail.yEnd - e.detail.yStart)\n  if (e.detail.yEnd - e.detail.yStart > 250) { \n    toggleMenu()\n  }\n});"],"names":["fileSystem","VERSION_NUMBER","debugConsole","debounce","func","timeout","timer","args","clearTimeout","setTimeout","apply","this","initMenu","M","Carousel","init","document","querySelectorAll","numVisible","dist","noWrap","preventLoop","enableTouch","duration","forEach","e","setAttribute","onclick","getInstance","getElementById","prev","next","toggleMenu","menu","Modal","isOpen","close","open","window","dispatchEvent","Event","async","createAndLoadConfig","storageManager","find","then","initKeybinds","DEFAULT_KEYBIND_CONFIG","persist","keybinds","fileToDirPath","path","slice","lastIndexOf","dissmissUpdateDialog","setValue","populateUpdateDialog","element","innerHTML","ul","createElement","classList","add","RELEASE_NOTES","note","li","appendChild","outerHTML","addEventListener","console","info","onOpenStart","IodineGUI","isPlaying","Iodine","pause","onCloseEnd","playStatusCallback","play","dismissible","updateModal","findValue","VERSION_COMPARITOR","Autocomplete","limit","data","Object","keys","ITEM_DATA","reduce","v1","v2","KEY_LOCATION_DATA","onAutocomplete","locationParts","value","split","FormSelect","_handleSelectChangeBound","populateHints","event","userInputEnabled","doInput","code","CommandExecutor","register","Map","conf","JSON","parse","table","sort","sortCommands","binding","type","kbd","set","command","gmpd","row","insertRow","rows","length","insertCell","replace","kbdCell","listenForKbdBinding","gmpdCell","listenForGmpdBinding","listenFor","Toast","dismissAll","isGamepad","currentTarget","getAttribute","elmnt","oldCode","querySelector","toast","html","displayLength","completeCallback","freezeClic","isDown","delete","writeKeybinds","get","execute","config","Set","values","filter","v","includes","c","keybind","isButton","k","m","match","pop","push","printPrettyJson","stringify","a","b","commandToIndex","menuInput","entries","HINTABLE_LOCATIONS","buttonCell","replaceAll","displayHint","hintCell","target","hint","getHint","stopPropagation","preventDefault","log","detail","yEnd","yStart"],"version":3,"file":"build-index.5a39450a.js.map"}