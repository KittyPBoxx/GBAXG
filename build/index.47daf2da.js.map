{"mappings":"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","sources":["dist/ui/ClientUI.js"],"sourcesContent":["const fileSystem = null;//window.__TAURI__ ? window.__TAURI__.fs : null;\nconst VERSION_NUMBER = \"0.9.11-ALPHA\";\n\nvar debugConsole;\ndocument.addEventListener('DOMContentLoaded', function() {\n\n    console.info(\"Version \" + VERSION_NUMBER);\n    \n    M.Modal.init(document.getElementById('menu'), {\n      \n      onOpenStart: () => IodineGUI.isPlaying && IodineGUI.Iodine.pause(),\n      onCloseEnd: () => !IodineGUI.isPlaying && IodineGUI.Iodine.playStatusCallback && IodineGUI.Iodine.play(),\n      dismissible: false\n    \n    }).open();      \n\n    initMenu();\n\n    createAndLoadConfig();\n\n     M.Autocomplete.init(document.getElementById(\"autocomplete-items\"), { limit: 4, data : Object.keys(ITEM_DATA).reduce((v1, v2) => { v1[v2] = null; return v1 }, {}) });\n     M.Autocomplete.init(document.getElementById(\"autocomplete-locations\"), { limit: 4, data : Object.keys(KEY_LOCATION_DATA).reduce((v1, v2) => { v1[v2] = null; return v1 }, {}), onAutocomplete : () => {\n        let locationParts = KEY_LOCATION_DATA[document.getElementById(\"autocomplete-locations\").value].split(\",\");\n        document.getElementById(\"game-value-input\").value = locationParts[0];\n        document.getElementById(\"bank-value-input\").value = locationParts[1];\n        document.getElementById(\"map-value-input\").value = locationParts[2];\n        document.getElementById(\"warp-value-input\").value = locationParts[3];\n        M.FormSelect.getInstance(document.getElementById(\"game-value-input\"))._handleSelectChangeBound();\n     }});\n\n    populateHints(); \n\n    M.FormSelect.init(document.querySelectorAll('select'), {});\n    debugConsole = M.Modal.init(document.getElementById('console'), {});\n});\n\n\nfunction debounce(func, timeout = 300){\n    let timer;\n    return (...args) => {\n      clearTimeout(timer);\n      timer = setTimeout(() => { func.apply(this, args); }, timeout);\n    };\n}\n\nfunction initMenu() {\n  M.Carousel.init(document.querySelectorAll('.carousel'), { numVisible: 5, dist: -20, noWrap: true, preventLoop: true, enableTouch: false, duration: 30});\n\n  document.querySelectorAll(\".carousel-item\").forEach(e => e.setAttribute(\"draggable\", false));\n  document.querySelectorAll(\".left-menu-button\").forEach(e => e.onclick = () =>  M.Carousel.getInstance(document.getElementById(\"menuCarousel\")).prev());\n  document.querySelectorAll(\".right-menu-button\").forEach(e => e.onclick = () =>  M.Carousel.getInstance(document.getElementById(\"menuCarousel\")).next());\n}\n\nwindow.addEventListener('resize', initMenu, true);\n\nfunction toggleMenu() {\n  let menu = M.Modal.getInstance(document.getElementById('menu'));\n  menu.isOpen ? menu.close() : menu.open();\n}\n\nasync function createAndLoadConfig() {\n\n  if(fileSystem) {\n    fileSystem.readTextFile(DEFAULT_KEYBIND_CONFIG_PATH, {dir: fileSystem.BaseDirectory.App}).then(initKeybinds, e => {\n      initKeybinds(DEFAULT_KEYBIND_CONFIG);\n\n      fileSystem.createDir(fileToDirPath(DEFAULT_KEYBIND_CONFIG_PATH), { dir: fileSystem.BaseDirectory.App, recursive: true })\n      .then(fileSystem.writeTextFile(DEFAULT_KEYBIND_CONFIG_PATH, DEFAULT_KEYBIND_CONFIG, { dir: fileSystem.BaseDirectory.App }));\n    });\n  } else {\n    storageManager.find(\"keybinds\").then(initKeybinds, e => {\n      initKeybinds(DEFAULT_KEYBIND_CONFIG);\n      storageManager.persist(keybinds, DEFAULT_KEYBIND_CONFIG);\n    })\n  }\n}\n\nfunction fileToDirPath(path) {\n  return path.slice(0, path.lastIndexOf(\"/\"));\n}\n\n/* CONTROLS */\n\n\ndocument.addEventListener('keydown', e => doInput(e.code, true, false));\ndocument.addEventListener('keyup', e => doInput(e.code, false, false));\n\nCommandExecutor.register(\"toggleMenu\", args => toggleMenu());\n\nlet keybinds = new Map();\nfunction initKeybinds(conf) {\n\n  conf = JSON.parse(conf);\n\n  let table = document.getElementById(\"key-binding-table\");\n\n  conf.sort(sortCommands)\n  conf.forEach(binding => {\n    if (binding.type == \"exec\") {\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Down\", binding.command);\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Down\", binding.command);\n    }\n    else if (binding.type == \"button\") {\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Down\", binding.command + \"Down\");\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Up\"  , binding.command + \"Up\"  );\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Down\", binding.command + \"Down\");\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Up\"  , binding.command + \"Up\"  );\n    }\n\n    let row = table.insertRow(table.rows.length);\n\n    let keyCell = row.insertCell(0);\n    keyCell.innerHTML = `<td>&nbsp;${binding.command.replace(\"Key\", \"\")}</td>`;\n\n    let kbdCell = row.insertCell(1);\n    kbdCell.innerHTML = `<td>&nbsp;<span>${binding.kbd.replace(\"Key\", \"\") || \"N/A\"}</span></td>`;\n    kbdCell.setAttribute(\"data-command\", binding.command);\n    kbdCell.setAttribute(\"data-type\", binding.type);\n    kbdCell.addEventListener(\"click\", listenForKbdBinding)\n\n    let gmpdCell = row.insertCell(2);\n    gmpdCell.innerHTML = `<td>&nbsp;<span>${binding.gmpd || \"N/A\"}</span></td>`;\n    gmpdCell.setAttribute(\"data-command\", binding.command);\n    gmpdCell.setAttribute(\"data-type\", binding.type);\n    gmpdCell.addEventListener(\"click\", listenForGmpdBinding);\n  });\n}\n\nlet listenFor = false;\n\nfunction listenForKbdBinding(e) {\n  M.Toast.dismissAll();\n  listenFor = {\n    isGamepad: false, \n    command: e.currentTarget.getAttribute(\"data-command\"), \n    type: e.currentTarget.getAttribute(\"data-type\"),\n    elmnt: e.currentTarget,\n    oldCode: e.currentTarget.querySelector(\"span\").innerHTML\n  };\n  M.toast({html: 'Press any key...', displayLength:3000, completeCallback: () => freezeClic = listenFor = false });\n  freezeClic = true;\n}\n\nfunction listenForGmpdBinding(e) {\n  M.Toast.dismissAll();\n  listenFor = {\n    isGamepad: true, \n    command: e.currentTarget.getAttribute(\"data-command\"), \n    type: e.currentTarget.getAttribute(\"data-type\"),\n    elmnt: e.currentTarget,\n    oldCode: e.currentTarget.querySelector(\"span\").innerHTML\n  };\n  M.toast({html: 'Press any button...', displayLength:3000, completeCallback: () => freezeClic = listenFor = false });\n  freezeClic = true;\n}\n\nvar userInputEnabled = true;\nfunction doInput(code, isDown, isGamepad) {\n\n  if (!userInputEnabled) { return; }\n  //if (code == \"Slash\") { debugConsole.open(); return; }\n\n  if (listenFor && !listenFor.isGamepad && !isGamepad && isDown) {\n\n    if (listenFor.type == \"button\") {\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Down\");\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Up\");\n\n      keybinds.set(\"KBD-\" + code + \"-Down\", listenFor.command + \"Down\");\n      keybinds.set(\"KBD-\" + code + \"-Up\"  , listenFor.command + \"Up\"  );\n    } else if (listenFor.type == \"exec\") {\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Down\");\n\n      keybinds.set(\"KBD-\"  + code + \"-Down\", listenFor.command);\n    }\n\n    listenFor.elmnt.innerHTML = `<td>&nbsp;<span>${code.replace(\"Key\", \"\")}</span></td>`;\n    listenFor = false;\n    M.Toast.dismissAll();\n\n    writeKeybinds();\n\n  } else if (listenFor && listenFor.isGamepad && isGamepad && isDown) {\n\n    if (listenFor.type == \"button\") {\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Down\");\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Up\");\n\n      keybinds.set(\"GMPD-\" + code + \"-Down\", listenFor.command + \"Down\");\n      keybinds.set(\"GMPD-\" + code + \"-Up\"  , listenFor.command + \"Up\"  );\n    } else if (listenFor.type == \"exec\") {\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Down\");\n\n      keybinds.set(\"GMPD-\"  + code + \"-Down\", listenFor.command);\n    }\n\n    listenFor.elmnt.innerHTML = `<td>&nbsp;<span>${code}</span></td>`;\n    listenFor = false;\n    M.Toast.dismissAll();\n\n    writeKeybinds();\n\n  } else {\n\n    code = \"\" + (isGamepad ? \"GMPD-\" : \"KBD-\") + code + (isDown ? \"-Down\" : \"-Up\");\n    keybinds.get(code) && CommandExecutor.execute(keybinds.get(code));\n\n  }\n\n}\n\nfunction writeKeybinds() {\n\n  let config = [];\n\n  new Set([...keybinds.values()].filter(v => !v.includes(\"KeyUp\"))).forEach(c => {\n\n    let keybind = {};\n\n    let isButton = c.includes(\"Down\") && [...keybinds].filter(([k,v]) => v == c.replace(\"Down\", \"Up\") > 0);\n    keybind.type = isButton ? \"button\" : \"exec\";\n\n    keybind.command = isButton ? c.replace(/KeyDown$/, \"Key\") : c;\n\n    keybind.kbd = null;\n    keybind.gmpd = null;\n    [...keybinds].filter(([k,v]) => v == c).forEach(m => keybind[m[0].includes(\"KBD\") ? \"kbd\" : \"gmpd\"] = m[0].match(/-(.*)-/).pop());\n\n    config.push(keybind);\n\n  });\n  \n  config.sort(sortCommands)\n  let printPrettyJson = JSON.stringify(config, null, 2).replace(/([\\\"|(null)|\\{],?)\\n/g, \"$1\");\n\n  if (fileSystem) {\n    fileSystem.writeTextFile(DEFAULT_KEYBIND_CONFIG_PATH, printPrettyJson, { dir: fileSystem.BaseDirectory.App })\n  } else {\n    storageManager.persist(\"keybinds\", printPrettyJson);\n  }\n  \n}\n\nfunction sortCommands(a,b) {\n  return (a.type + commandToIndex(a.command) > b.type + commandToIndex(b.command)) ? 1: -1;\n}\n\nfunction commandToIndex(c) {\n  switch(c) {\n    case \"AKey\"      : return 0;\n    case \"BKey\"      : return 1;\n    case \"LKey\"      : return 2;\n    case \"RKey\"      : return 3;\n    case \"StartKey\"  : return 4;\n    case \"SelectKey\" : return 5;\n    case \"UpKey\"     : return 6;\n    case \"DownKey\"   : return 7;\n    case \"LeftKey\"   : return 8;\n    case \"RightKey\"  : return 9;\n    case \"SpeedUp\"   : return 10;\n    case \"Restart\"   : return 11;\n    case \"toggleMenu\": return 12;\n    default: return 999;\n  }\n}\n\nfunction menuInput(c) {\n  switch(c) {\n    case \"A\"      : \n    break;\n    case \"B\"      : \n    break;\n    case \"L\"      :\n      M.Carousel.getInstance(document.getElementById('menuCarousel')).prev();\n    break;\n    case \"R\"      : \n      M.Carousel.getInstance(document.getElementById('menuCarousel')).next();\n    break;\n    case \"START\"  : \n    break;\n    case \"SELECT\" : \n    break;\n    case \"UP\"     : \n    break;\n    case \"DOWN\"   : \n    break;\n    case \"LEFT\"   : \n    break;\n    case \"RIGHT\"  : \n    break;\n  }\n}\n\nlet freezeClic = false; \ndocument.addEventListener(\"click\", e => {\n    if (freezeClic) {\n        M.Toast.dismissAll();\n        e.stopPropagation();\n        e.preventDefault();\n    }\n}, true);\n\n/* Hints */\nfunction populateHints() {\n  let table = document.getElementById(\"hint-table\");\n  Object.entries(HINTABLE_LOCATIONS).forEach(e => {\n    let row = table.insertRow(table.rows.length);\n\n    let nameCell = row.insertCell(0);\n    nameCell.innerHTML = `<td>&nbsp;${e[0]}</td>`;\n\n    let buttonCell = row.insertCell(1);\n    buttonCell.innerHTML = `<td>&nbsp;<span>Show Hint</span></td>`;\n    buttonCell.setAttribute(\"data-location\", e[1]);\n    buttonCell.setAttribute(\"data-target\", `hint-table-${e[0].replaceAll(\" \", \"-\")}`)\n    buttonCell.addEventListener(\"click\", displayHint)\n\n    let hintCell = row.insertCell(2);\n    hintCell.setAttribute(\"id\", `hint-table-${e[0].replaceAll(\" \", \"-\")}`)\n    hintCell.innerHTML = `<td>&nbsp;...</td>`;\n  })\n}\n\nfunction displayHint(e) {\n  let target = document.getElementById(e.currentTarget.getAttribute(\"data-target\"));\n  let hint = getHint(e.currentTarget.getAttribute(\"data-location\"));\n  target.innerHTML = hint;\n}"],"names":["fileSystem","VERSION_NUMBER","debugConsole","debounce","func","timeout","timer","args","clearTimeout","setTimeout","apply","this","initMenu","M","Carousel","init","document","querySelectorAll","numVisible","dist","noWrap","preventLoop","enableTouch","duration","forEach","e","setAttribute","onclick","getInstance","getElementById","prev","next","toggleMenu","menu","Modal","isOpen","close","open","async","createAndLoadConfig","storageManager","find","then","initKeybinds","DEFAULT_KEYBIND_CONFIG","persist","keybinds","fileToDirPath","path","slice","lastIndexOf","addEventListener","console","info","onOpenStart","IodineGUI","isPlaying","Iodine","pause","onCloseEnd","playStatusCallback","play","dismissible","Autocomplete","limit","data","Object","keys","ITEM_DATA","reduce","v1","v2","KEY_LOCATION_DATA","onAutocomplete","locationParts","value","split","FormSelect","_handleSelectChangeBound","populateHints","window","doInput","code","CommandExecutor","register","Map","conf","JSON","parse","table","sort","sortCommands","binding","type","kbd","set","command","gmpd","row","insertRow","rows","length","insertCell","innerHTML","replace","kbdCell","listenForKbdBinding","gmpdCell","listenForGmpdBinding","listenFor","Toast","dismissAll","isGamepad","currentTarget","getAttribute","elmnt","oldCode","querySelector","toast","html","displayLength","completeCallback","freezeClic","userInputEnabled","isDown","delete","writeKeybinds","get","execute","config","Set","values","filter","v","includes","c","keybind","isButton","k","m","match","pop","push","printPrettyJson","stringify","a","b","commandToIndex","menuInput","entries","HINTABLE_LOCATIONS","buttonCell","replaceAll","displayHint","hintCell","target","hint","getHint","stopPropagation","preventDefault"],"version":3,"file":"index.47daf2da.js.map"}