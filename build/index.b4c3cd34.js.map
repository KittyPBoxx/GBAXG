{"mappings":"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","sources":["dist/ui/ClientUI.js"],"sourcesContent":["const fileSystem = null;//window.__TAURI__ ? window.__TAURI__.fs : null;\nconst VERSION_NUMBER = \"0.9.19-ALPHA\";\n\nvar debugConsole;\ndocument.addEventListener('DOMContentLoaded', function() {\n\n    console.info(\"Version \" + VERSION_NUMBER);\n    document.getElementById(\"version\").innerHTML = VERSION_NUMBER;\n    \n    M.Modal.init(document.getElementById('menu'), {\n      \n      onOpenStart: () => IodineGUI.isPlaying && IodineGUI.Iodine.pause(),\n      onCloseEnd: () => !IodineGUI.isPlaying && IodineGUI.Iodine.playStatusCallback && IodineGUI.Iodine.play(),\n      dismissible: false\n    \n    }).open();      \n\n    initMenu();\n\n    createAndLoadConfig();\n\n     M.Autocomplete.init(document.getElementById(\"autocomplete-items\"), { limit: 4, data : Object.keys(ITEM_DATA).reduce((v1, v2) => { v1[v2] = null; return v1 }, {}) });\n     M.Autocomplete.init(document.getElementById(\"autocomplete-locations\"), { limit: 4, data : Object.keys(KEY_LOCATION_DATA).reduce((v1, v2) => { v1[v2] = null; return v1 }, {}), onAutocomplete : () => {\n        let locationParts = KEY_LOCATION_DATA[document.getElementById(\"autocomplete-locations\").value].split(\",\");\n        document.getElementById(\"game-value-input\").value = locationParts[0];\n        document.getElementById(\"bank-value-input\").value = locationParts[1];\n        document.getElementById(\"map-value-input\").value = locationParts[2];\n        document.getElementById(\"warp-value-input\").value = locationParts[3];\n        M.FormSelect.getInstance(document.getElementById(\"game-value-input\"))._handleSelectChangeBound();\n     }});\n\n    populateHints(); \n\n    M.FormSelect.init(document.querySelectorAll('select'), {});\n    debugConsole = M.Modal.init(document.getElementById('console'), {});\n\n    document.querySelectorAll(\"input[type=text]\").forEach(e => e.addEventListener('focusin', (event) => userInputEnabled = false));\n    document.querySelectorAll(\"input[type=text]\").forEach(e => e.addEventListener('focusout', (event) => userInputEnabled = true));\n});\n\n\nfunction debounce(func, timeout = 300){\n    let timer;\n    return (...args) => {\n      clearTimeout(timer);\n      timer = setTimeout(() => { func.apply(this, args); }, timeout);\n    };\n}\n\nfunction initMenu() {\n  M.Carousel.init(document.querySelectorAll('.carousel'), { numVisible: 5, dist: -20, noWrap: true, preventLoop: true, enableTouch: false, duration: 30});\n\n  document.querySelectorAll(\".carousel-item\").forEach(e => e.setAttribute(\"draggable\", false));\n  document.querySelectorAll(\".left-menu-button\").forEach(e => e.onclick = () =>  M.Carousel.getInstance(document.getElementById(\"menuCarousel\")).prev());\n  document.querySelectorAll(\".right-menu-button\").forEach(e => e.onclick = () =>  M.Carousel.getInstance(document.getElementById(\"menuCarousel\")).next());\n}\n\nwindow.addEventListener('resize', initMenu, true);\n\nfunction toggleMenu() {\n  let menu = M.Modal.getInstance(document.getElementById('menu'));\n  menu.isOpen ? menu.close() : menu.open();\n}\n\nasync function createAndLoadConfig() {\n\n  if(fileSystem) {\n    fileSystem.readTextFile(DEFAULT_KEYBIND_CONFIG_PATH, {dir: fileSystem.BaseDirectory.App}).then(initKeybinds, e => {\n      initKeybinds(DEFAULT_KEYBIND_CONFIG);\n\n      fileSystem.createDir(fileToDirPath(DEFAULT_KEYBIND_CONFIG_PATH), { dir: fileSystem.BaseDirectory.App, recursive: true })\n      .then(fileSystem.writeTextFile(DEFAULT_KEYBIND_CONFIG_PATH, DEFAULT_KEYBIND_CONFIG, { dir: fileSystem.BaseDirectory.App }));\n    });\n  } else {\n    storageManager.find(\"keybinds\").then(initKeybinds, e => {\n      initKeybinds(DEFAULT_KEYBIND_CONFIG);\n      storageManager.persist(keybinds, DEFAULT_KEYBIND_CONFIG);\n    })\n  }\n}\n\nfunction fileToDirPath(path) {\n  return path.slice(0, path.lastIndexOf(\"/\"));\n}\n\n/* CONTROLS */\n\n\ndocument.addEventListener('keydown', e => doInput(e.code, true, false));\ndocument.addEventListener('keyup', e => doInput(e.code, false, false));\n\nCommandExecutor.register(\"toggleMenu\", args => toggleMenu());\n\nlet keybinds = new Map();\nfunction initKeybinds(conf) {\n\n  conf = JSON.parse(conf);\n\n  let table = document.getElementById(\"key-binding-table\");\n\n  conf.sort(sortCommands)\n  conf.forEach(binding => {\n    if (binding.type == \"exec\") {\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Down\", binding.command);\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Down\", binding.command);\n    }\n    else if (binding.type == \"button\") {\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Down\", binding.command + \"Down\");\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Up\"  , binding.command + \"Up\"  );\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Down\", binding.command + \"Down\");\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Up\"  , binding.command + \"Up\"  );\n    }\n\n    let row = table.insertRow(table.rows.length);\n\n    let keyCell = row.insertCell(0);\n    keyCell.innerHTML = `<td>&nbsp;${binding.command.replace(\"Key\", \"\")}</td>`;\n\n    let kbdCell = row.insertCell(1);\n    kbdCell.innerHTML = `<td>&nbsp;<span>${binding.kbd.replace(\"Key\", \"\") || \"N/A\"}</span></td>`;\n    kbdCell.setAttribute(\"data-command\", binding.command);\n    kbdCell.setAttribute(\"data-type\", binding.type);\n    kbdCell.addEventListener(\"click\", listenForKbdBinding)\n\n    let gmpdCell = row.insertCell(2);\n    gmpdCell.innerHTML = `<td>&nbsp;<span>${binding.gmpd || \"N/A\"}</span></td>`;\n    gmpdCell.setAttribute(\"data-command\", binding.command);\n    gmpdCell.setAttribute(\"data-type\", binding.type);\n    gmpdCell.addEventListener(\"click\", listenForGmpdBinding);\n  });\n}\n\nlet listenFor = false;\n\nfunction listenForKbdBinding(e) {\n  M.Toast.dismissAll();\n  listenFor = {\n    isGamepad: false, \n    command: e.currentTarget.getAttribute(\"data-command\"), \n    type: e.currentTarget.getAttribute(\"data-type\"),\n    elmnt: e.currentTarget,\n    oldCode: e.currentTarget.querySelector(\"span\").innerHTML\n  };\n  M.toast({html: 'Press any key...', displayLength:3000, completeCallback: () => freezeClic = listenFor = false });\n  freezeClic = true;\n}\n\nfunction listenForGmpdBinding(e) {\n  M.Toast.dismissAll();\n  listenFor = {\n    isGamepad: true, \n    command: e.currentTarget.getAttribute(\"data-command\"), \n    type: e.currentTarget.getAttribute(\"data-type\"),\n    elmnt: e.currentTarget,\n    oldCode: e.currentTarget.querySelector(\"span\").innerHTML\n  };\n  M.toast({html: 'Press any button...', displayLength:3000, completeCallback: () => freezeClic = listenFor = false });\n  freezeClic = true;\n}\n\nvar userInputEnabled = true;\nfunction doInput(code, isDown, isGamepad) {\n\n  if (!userInputEnabled) { return; }\n  //if (code == \"Slash\") { debugConsole.open(); return; }\n\n  if (listenFor && !listenFor.isGamepad && !isGamepad && isDown) {\n\n    if (listenFor.type == \"button\") {\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Down\");\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Up\");\n\n      keybinds.set(\"KBD-\" + code + \"-Down\", listenFor.command + \"Down\");\n      keybinds.set(\"KBD-\" + code + \"-Up\"  , listenFor.command + \"Up\"  );\n    } else if (listenFor.type == \"exec\") {\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Down\");\n\n      keybinds.set(\"KBD-\"  + code + \"-Down\", listenFor.command);\n    }\n\n    listenFor.elmnt.innerHTML = `<td>&nbsp;<span>${code.replace(\"Key\", \"\")}</span></td>`;\n    listenFor = false;\n    M.Toast.dismissAll();\n\n    writeKeybinds();\n\n  } else if (listenFor && listenFor.isGamepad && isGamepad && isDown) {\n\n    if (listenFor.type == \"button\") {\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Down\");\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Up\");\n\n      keybinds.set(\"GMPD-\" + code + \"-Down\", listenFor.command + \"Down\");\n      keybinds.set(\"GMPD-\" + code + \"-Up\"  , listenFor.command + \"Up\"  );\n    } else if (listenFor.type == \"exec\") {\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Down\");\n\n      keybinds.set(\"GMPD-\"  + code + \"-Down\", listenFor.command);\n    }\n\n    listenFor.elmnt.innerHTML = `<td>&nbsp;<span>${code}</span></td>`;\n    listenFor = false;\n    M.Toast.dismissAll();\n\n    writeKeybinds();\n\n  } else {\n\n    code = \"\" + (isGamepad ? \"GMPD-\" : \"KBD-\") + code + (isDown ? \"-Down\" : \"-Up\");\n    keybinds.get(code) && CommandExecutor.execute(keybinds.get(code));\n\n  }\n\n}\n\nfunction writeKeybinds() {\n\n  let config = [];\n\n  new Set([...keybinds.values()].filter(v => !v.includes(\"KeyUp\"))).forEach(c => {\n\n    let keybind = {};\n\n    let isButton = c.includes(\"Down\") && [...keybinds].filter(([k,v]) => v == c.replace(\"Down\", \"Up\") > 0);\n    keybind.type = isButton ? \"button\" : \"exec\";\n\n    keybind.command = isButton ? c.replace(/KeyDown$/, \"Key\") : c;\n\n    keybind.kbd = null;\n    keybind.gmpd = null;\n    [...keybinds].filter(([k,v]) => v == c).forEach(m => keybind[m[0].includes(\"KBD\") ? \"kbd\" : \"gmpd\"] = m[0].match(/-(.*)-/).pop());\n\n    config.push(keybind);\n\n  });\n  \n  config.sort(sortCommands)\n  let printPrettyJson = JSON.stringify(config, null, 2).replace(/([\\\"|(null)|\\{],?)\\n/g, \"$1\");\n\n  if (fileSystem) {\n    fileSystem.writeTextFile(DEFAULT_KEYBIND_CONFIG_PATH, printPrettyJson, { dir: fileSystem.BaseDirectory.App })\n  } else {\n    storageManager.persist(\"keybinds\", printPrettyJson);\n  }\n  \n}\n\nfunction sortCommands(a,b) {\n  return (a.type + commandToIndex(a.command) > b.type + commandToIndex(b.command)) ? 1: -1;\n}\n\nfunction commandToIndex(c) {\n  switch(c) {\n    case \"AKey\"      : return 0;\n    case \"BKey\"      : return 1;\n    case \"LKey\"      : return 2;\n    case \"RKey\"      : return 3;\n    case \"StartKey\"  : return 4;\n    case \"SelectKey\" : return 5;\n    case \"UpKey\"     : return 6;\n    case \"DownKey\"   : return 7;\n    case \"LeftKey\"   : return 8;\n    case \"RightKey\"  : return 9;\n    case \"SpeedUp\"   : return 10;\n    case \"Restart\"   : return 11;\n    case \"toggleMenu\": return 12;\n    default: return 999;\n  }\n}\n\nfunction menuInput(c) {\n  switch(c) {\n    case \"A\"      : \n    break;\n    case \"B\"      : \n    break;\n    case \"L\"      :\n      M.Carousel.getInstance(document.getElementById('menuCarousel')).prev();\n    break;\n    case \"R\"      : \n      M.Carousel.getInstance(document.getElementById('menuCarousel')).next();\n    break;\n    case \"START\"  : \n    break;\n    case \"SELECT\" : \n    break;\n    case \"UP\"     : \n    break;\n    case \"DOWN\"   : \n    break;\n    case \"LEFT\"   : \n    break;\n    case \"RIGHT\"  : \n    break;\n  }\n}\n\nlet freezeClic = false; \ndocument.addEventListener(\"click\", e => {\n    if (freezeClic) {\n        M.Toast.dismissAll();\n        e.stopPropagation();\n        e.preventDefault();\n    }\n}, true);\n\n/* Hints */\nfunction populateHints() {\n  let table = document.getElementById(\"hint-table\");\n  Object.entries(HINTABLE_LOCATIONS).forEach(e => {\n    let row = table.insertRow(table.rows.length);\n\n    let nameCell = row.insertCell(0);\n    nameCell.innerHTML = `<td>&nbsp;${e[0]}</td>`;\n\n    let buttonCell = row.insertCell(1);\n    buttonCell.innerHTML = `<td>&nbsp;<span>Show Hint</span></td>`;\n    buttonCell.setAttribute(\"data-location\", e[1]);\n    buttonCell.setAttribute(\"data-target\", `hint-table-${e[0].replaceAll(\" \", \"-\")}`)\n    buttonCell.addEventListener(\"click\", displayHint)\n\n    let hintCell = row.insertCell(2);\n    hintCell.setAttribute(\"id\", `hint-table-${e[0].replaceAll(\" \", \"-\")}`)\n    hintCell.innerHTML = `<td>&nbsp;...</td>`;\n  })\n}\n\nfunction displayHint(e) {\n  let target = document.getElementById(e.currentTarget.getAttribute(\"data-target\"));\n  let hint = getHint(e.currentTarget.getAttribute(\"data-location\"));\n  target.innerHTML = hint;\n}\n\ndocument.addEventListener('swiped-down', e => {\n  console.log(e.detail.yEnd - e.detail.yStart)\n  if (e.detail.yEnd - e.detail.yStart > 250) { \n    toggleMenu()\n  }\n});"],"names":["fileSystem","VERSION_NUMBER","debugConsole","debounce","func","timeout","timer","args","clearTimeout","setTimeout","apply","this","initMenu","M","Carousel","init","document","querySelectorAll","numVisible","dist","noWrap","preventLoop","enableTouch","duration","forEach","e","setAttribute","onclick","getInstance","getElementById","prev","next","toggleMenu","menu","Modal","isOpen","close","open","async","createAndLoadConfig","storageManager","find","then","initKeybinds","DEFAULT_KEYBIND_CONFIG","persist","keybinds","fileToDirPath","path","slice","lastIndexOf","addEventListener","console","info","innerHTML","onOpenStart","IodineGUI","isPlaying","Iodine","pause","onCloseEnd","playStatusCallback","play","dismissible","Autocomplete","limit","data","Object","keys","ITEM_DATA","reduce","v1","v2","KEY_LOCATION_DATA","onAutocomplete","locationParts","value","split","FormSelect","_handleSelectChangeBound","populateHints","event","userInputEnabled","window","doInput","code","CommandExecutor","register","Map","conf","JSON","parse","table","sort","sortCommands","binding","type","kbd","set","command","gmpd","row","insertRow","rows","length","insertCell","replace","kbdCell","listenForKbdBinding","gmpdCell","listenForGmpdBinding","listenFor","Toast","dismissAll","isGamepad","currentTarget","getAttribute","elmnt","oldCode","querySelector","toast","html","displayLength","completeCallback","freezeClic","isDown","delete","writeKeybinds","get","execute","config","Set","values","filter","v","includes","c","keybind","isButton","k","m","match","pop","push","printPrettyJson","stringify","a","b","commandToIndex","menuInput","entries","HINTABLE_LOCATIONS","buttonCell","replaceAll","displayHint","hintCell","target","hint","getHint","stopPropagation","preventDefault","log","detail","yEnd","yStart"],"version":3,"file":"index.b4c3cd34.js.map"}