"use strict";function GameBoyAdvanceChannel1Synth(e){this.sound=e,this.currentSampleLeft=0,this.currentSampleRight=0,this.SweepFault=!1,this.lastTimeSweep=0,this.timeSweep=0,this.frequencySweepDivider=0,this.decreaseSweep=!1,this.nr11=0,this.CachedDuty=4026531840,this.totalLength=64,this.nr12=0,this.envelopeVolume=0,this.frequency=0,this.FrequencyTracker=32768,this.nr14=0,this.consecutive=!0,this.ShadowFrequency=32768,this.canPlay=!1,this.Enabled=0,this.envelopeSweeps=0,this.envelopeSweepsLast=-1,this.FrequencyCounter=0,this.DutyTracker=0,this.Swept=!1,this.leftEnable=0,this.rightEnable=0}GameBoyAdvanceChannel1Synth.prototype.disabled=function(){this.nr10=0,this.SweepFault=!1,this.lastTimeSweep=0,this.timeSweep=0,this.frequencySweepDivider=0,this.decreaseSweep=!1,this.nr11=0,this.CachedDuty=4026531840,this.totalLength=64,this.nr12=0,this.envelopeVolume=0,this.frequency=0,this.FrequencyTracker=32768,this.nr14=0,this.consecutive=!0,this.ShadowFrequency=32768,this.canPlay=!1,this.Enabled=0,this.envelopeSweeps=0,this.envelopeSweepsLast=-1,this.FrequencyCounter=0,this.DutyTracker=0},GameBoyAdvanceChannel1Synth.prototype.clockAudioLength=function(){(0|this.totalLength)>1?this.totalLength=(0|this.totalLength)-1|0:1==(0|this.totalLength)&&(this.totalLength=0,this.enableCheck(),this.sound.unsetNR52(254))},GameBoyAdvanceChannel1Synth.prototype.enableCheck=function(){(this.consecutive||(0|this.totalLength)>0)&&!this.SweepFault&&this.canPlay?this.Enabled=15:this.Enabled=0},GameBoyAdvanceChannel1Synth.prototype.volumeEnableCheck=function(){this.canPlay=(0|this.nr12)>7,this.enableCheck()},GameBoyAdvanceChannel1Synth.prototype.outputLevelCache=function(){var e=this.CachedDuty>>(0|this.DutyTracker),t=this.envelopeVolume&this.Enabled&e;this.currentSampleLeft=this.leftEnable&t,this.currentSampleRight=this.rightEnable&t},GameBoyAdvanceChannel1Synth.prototype.setChannelOutputEnable=function(e){e|=0,this.rightEnable=e<<31>>31,this.leftEnable=e<<27>>31},GameBoyAdvanceChannel1Synth.prototype.clockAudioSweep=function(){!this.SweepFault&&(0|this.timeSweep)>0&&(this.timeSweep=(0|this.timeSweep)-1|0,0==(0|this.timeSweep)&&this.runAudioSweep())},GameBoyAdvanceChannel1Synth.prototype.runAudioSweep=function(){(0|this.lastTimeSweep)>0&&((0|this.frequencySweepDivider)>0?(this.Swept=!0,this.decreaseSweep?(this.ShadowFrequency=(0|this.ShadowFrequency)-(this.ShadowFrequency>>(0|this.frequencySweepDivider))|0,this.frequency=2047&this.ShadowFrequency,this.FrequencyTracker=2048-(0|this.frequency)<<4):(this.ShadowFrequency=(0|this.ShadowFrequency)+(this.ShadowFrequency>>(0|this.frequencySweepDivider))|0,this.frequency=0|this.ShadowFrequency,(0|this.ShadowFrequency)<=2047?(this.FrequencyTracker=2048-(0|this.frequency)<<4,((0|this.ShadowFrequency)+(this.ShadowFrequency>>(0|this.frequencySweepDivider))|0)>2047&&(this.SweepFault=!0,this.enableCheck(),this.sound.unsetNR52(254))):(this.frequency&=2047,this.SweepFault=!0,this.enableCheck(),this.sound.unsetNR52(254))),this.timeSweep=0|this.lastTimeSweep):(this.SweepFault=!0,this.enableCheck()))},GameBoyAdvanceChannel1Synth.prototype.audioSweepPerformDummy=function(){if((0|this.frequencySweepDivider)>0&&!this.decreaseSweep){var e=(0|this.ShadowFrequency)+(this.ShadowFrequency>>(0|this.frequencySweepDivider))|0;(0|e)<=2047?((0|e)+(e>>(0|this.frequencySweepDivider))|0)>2047&&(this.SweepFault=!0,this.enableCheck(),this.sound.unsetNR52(254)):(this.SweepFault=!0,this.enableCheck(),this.sound.unsetNR52(254))}},GameBoyAdvanceChannel1Synth.prototype.clockAudioEnvelope=function(){(0|this.envelopeSweepsLast)>-1&&((0|this.envelopeSweeps)>0?this.envelopeSweeps=(0|this.envelopeSweeps)-1|0:this.envelopeType?(0|this.envelopeVolume)<15?(this.envelopeVolume=1+(0|this.envelopeVolume)|0,this.envelopeSweeps=0|this.envelopeSweepsLast):this.envelopeSweepsLast=-1:(0|this.envelopeVolume)>0?(this.envelopeVolume=(0|this.envelopeVolume)-1|0,this.envelopeSweeps=0|this.envelopeSweepsLast):this.envelopeSweepsLast=-1)},GameBoyAdvanceChannel1Synth.prototype.computeAudioChannel=function(){0==(0|this.FrequencyCounter)&&(this.FrequencyCounter=0|this.FrequencyTracker,this.DutyTracker=4+(0|this.DutyTracker)&28)},GameBoyAdvanceChannel1Synth.prototype.readSOUND1CNT8_0=function(){return 0|this.nr10},GameBoyAdvanceChannel1Synth.prototype.writeSOUND1CNT8_0=function(e){e|=0,this.decreaseSweep&&0==(8&e)&&this.Swept&&(this.SweepFault=!0),this.lastTimeSweep=(112&e)>>4,this.frequencySweepDivider=7&e,this.decreaseSweep=0!=(8&e),this.nr10=255&e,this.enableCheck()},GameBoyAdvanceChannel1Synth.prototype.readSOUND1CNT8_2=function(){return 0|this.nr11},GameBoyAdvanceChannel1Synth.prototype.writeSOUND1CNT8_2=function(e){switch((e|=0)>>6&3){case 0:this.CachedDuty=4026531840;break;case 1:this.CachedDuty=4026531855;break;case 2:this.CachedDuty=4293918735;break;default:this.CachedDuty=268435440}this.totalLength=64-(63&e)|0,this.nr11=255&e,this.enableCheck()},GameBoyAdvanceChannel1Synth.prototype.readSOUND1CNT8_3=function(){return 0|this.nr12},GameBoyAdvanceChannel1Synth.prototype.writeSOUND1CNT8_3=function(e){e|=0,this.envelopeType=0!=(8&e),this.nr12=255&e,this.volumeEnableCheck()},GameBoyAdvanceChannel1Synth.prototype.writeSOUND1CNT_X0=function(e){e|=0,this.frequency=1792&this.frequency|255&e,this.FrequencyTracker=2048-(0|this.frequency)<<4},GameBoyAdvanceChannel1Synth.prototype.readSOUND1CNTX8=function(){return 0|this.nr14},GameBoyAdvanceChannel1Synth.prototype.writeSOUND1CNT_X1=function(e){e|=0,this.consecutive=0==(64&e),this.frequency=(7&e)<<8|255&this.frequency,this.FrequencyTracker=2048-(0|this.frequency)<<4,0!=(128&e)&&(this.timeSweep=0|this.lastTimeSweep,this.Swept=!1,this.envelopeVolume=this.nr12>>4,this.envelopeSweepsLast=(7&this.nr12)-1|0,0==(0|this.totalLength)&&(this.totalLength=64),(0|this.lastTimeSweep)>0||(0|this.frequencySweepDivider)>0?this.sound.setNR52(1):this.sound.unsetNR52(254),0!=(64&e)&&this.sound.setNR52(1),this.ShadowFrequency=0|this.frequency,this.SweepFault=!1,this.audioSweepPerformDummy()),this.enableCheck(),this.nr14=255&e};
//# sourceMappingURL=index.47d3991d.js.map
