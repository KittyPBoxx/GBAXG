var XAudioJSscriptsHandle=document.getElementsByTagName("script"),XAudioJSsourceHandle=XAudioJSscriptsHandle[XAudioJSscriptsHandle.length-1].src;function XAudioServer(e,i,o,a,t,u,l,d,n,r){XAudioJSChannelsAllocated=Math.max(e,1),this.XAudioJSSampleRate=Math.abs(i),XAudioJSMinBufferSize=o>=XAudioJSSamplesPerCallback*XAudioJSChannelsAllocated&&o<a?o&-XAudioJSChannelsAllocated:XAudioJSSamplesPerCallback*XAudioJSChannelsAllocated,XAudioJSMaxBufferSize=Math.floor(a)>XAudioJSMinBufferSize+XAudioJSChannelsAllocated?a&-XAudioJSChannelsAllocated:XAudioJSMinBufferSize*XAudioJSChannelsAllocated,this.underRunCallback="function"==typeof t?t:function(){},XAudioJSCallbackAPIEventNotificationCallback="function"==typeof u?u:null,XAudioJSCallbackAPIEventNotificationCallback2="function"==typeof l?l:null,XAudioJSVolume=d>=0&&d<=1?d:1,this.failureCallback="function"==typeof n?n:function(){throw new Error("XAudioJS has encountered a fatal error.")},this.userEventLatch="object"==typeof r?r:null,this.initializeAudio()}function XAudioJSFlashAudioEvent(){XAudioJSCallbackAPIEventNotificationCallbackCompatTimerClear(),XAudioJSCallbackAPIEventNotification(),XAudioJSResampleRefill();var e=XAudioJSFlashTransportEncoder();return XAudioJSCallbackAPIEventNotification2(),e}function XAudioJSGenerateFlashSurroundString(){var e=XAudioJSSamplesPerCallback<<1;XAudioJSBinaryString.length>e&&(XAudioJSBinaryString=[]),e=0;for(var i=0;i<XAudioJSSamplesPerCallback&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;++i)XAudioJSBinaryString[e++]=String.fromCharCode(12288+(16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)),XAudioJSBinaryString[e++]=String.fromCharCode(12288+(16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)),(XAudioJSResampleBufferStart+=XAudioJSChannelsAllocated-2)==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);return XAudioJSBinaryString.join("")}function XAudioJSGenerateFlashStereoString(){var e=XAudioJSSamplesPerCallback<<1;XAudioJSBinaryString.length>e&&(XAudioJSBinaryString=[]);for(var i=0;i<e&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;)XAudioJSBinaryString[i++]=String.fromCharCode(12288+(16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)),XAudioJSBinaryString[i++]=String.fromCharCode(12288+(16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)),XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);return XAudioJSBinaryString.join("")}function XAudioJSGenerateFlashMonoString(){XAudioJSBinaryString.length>XAudioJSSamplesPerCallback&&(XAudioJSBinaryString=[]);for(var e=0;e<XAudioJSSamplesPerCallback&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;)XAudioJSBinaryString[e++]=String.fromCharCode(12288+(16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)),XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);return XAudioJSBinaryString.join("")}XAudioServer.prototype.MOZWriteAudioNoCallback=function(e,i){for(var o=Math.min(e.length,i),a=0;a<o;){for(var t=Math.min(o-a,XAudioJSMaxBufferSize),u=0;u<t;++u)XAudioJSAudioContextSampleBuffer[u]=e[a++];var l=XAudioJSResampleControl.resampler(u);if(l>0){var d=XAudioJSGetArraySlice(XAudioJSResampleControl.outputBuffer,l);this.samplesAlreadyWritten+=this.audioHandleMoz.mozWriteAudio(d)}}},XAudioServer.prototype.callbackBasedWriteAudioNoCallback=function(e,i){for(var o=Math.min(e.length,i),a=0;a<o&&XAudioJSAudioBufferSize<XAudioJSMaxBufferSize;)XAudioJSAudioContextSampleBuffer[XAudioJSAudioBufferSize++]=e[a++]},XAudioServer.prototype.writeAudio=function(e,i){switch(this.audioType){case 0:this.MOZWriteAudioNoCallback(e,i),this.MOZExecuteCallback();break;case 2:this.checkFlashInit();case 1:this.callbackBasedWriteAudioNoCallback(e,i),this.callbackBasedExecuteCallback();break;default:this.failureCallback()}},XAudioServer.prototype.writeAudioNoCallback=function(e,i){switch(this.audioType){case 0:this.MOZWriteAudioNoCallback(e,i);break;case 2:this.checkFlashInit();case 1:this.callbackBasedWriteAudioNoCallback(e,i);break;default:this.failureCallback()}},XAudioServer.prototype.remainingBuffer=function(){switch(this.audioType){case 0:return Math.floor((this.samplesAlreadyWritten-this.audioHandleMoz.mozCurrentSampleOffset())*XAudioJSResampleControl.ratioWeight/XAudioJSChannelsAllocated)*XAudioJSChannelsAllocated;case 2:this.checkFlashInit();case 1:return Math.floor(XAudioJSResampledSamplesLeft()*XAudioJSResampleControl.ratioWeight/XAudioJSChannelsAllocated)*XAudioJSChannelsAllocated+XAudioJSAudioBufferSize;default:return this.failureCallback(),null}},XAudioServer.prototype.MOZExecuteCallback=function(){var e=XAudioJSMinBufferSize-this.remainingBuffer();if(e>0){var i=this.underRunCallback(e);this.MOZWriteAudioNoCallback(i,i.length)}},XAudioServer.prototype.callbackBasedExecuteCallback=function(){var e=XAudioJSMinBufferSize-this.remainingBuffer();if(e>0){var i=this.underRunCallback(e);this.callbackBasedWriteAudioNoCallback(i,i.length)}},XAudioServer.prototype.executeCallback=function(){switch(this.audioType){case 0:this.MOZExecuteCallback();break;case 2:this.checkFlashInit();case 1:this.callbackBasedExecuteCallback();break;default:this.failureCallback()}},XAudioServer.prototype.initializeAudio=function(){try{this.initializeMozAudio()}catch(e){try{this.initializeWebAudio()}catch(e){try{this.initializeFlashAudio()}catch(e){this.audioType=-1,this.failureCallback()}}}},XAudioServer.prototype.initializeMozAudio=function(){this.audioHandleMoz=new Audio,this.audioHandleMoz.mozSetup(XAudioJSChannelsAllocated,XAudioJSMozAudioSampleRate),this.audioHandleMoz.volume=XAudioJSVolume,this.samplesAlreadyWritten=0,this.audioType=0;var e=this.XAudioJSSampleRate*XAudioJSChannelsAllocated/10|0;e-=e%XAudioJSChannelsAllocated,this.samplesAlreadyWritten-=e,this.initializeResampler(XAudioJSMozAudioSampleRate)},XAudioServer.prototype.initializeWebAudio=function(){if("undefined"==typeof AudioContext||void 0===XAudioJSWebAudioContextHandle)throw null;if(this.userEventLatch){var e=this,i=0;this.userEventLatch.addEventListener("click",(function(){0==i&&(e.setupWebAudio(),i|=1)}),!1),this.userEventLatch.addEventListener("touchstart",(function(){i<2&&(e.setupWebAudio(),i|=2)}),!1),this.userEventLatch.addEventListener("touchend",(function(){i<4&&(e.setupWebAudio(),i|=4)}),!1),this.resetCallbackAPIAudioBuffer(44100)}else this.setupWebAudio();this.audioType=1},XAudioServer.prototype.setupWebAudio=function(){XAudioJSWebAudioLaunchedContext&&XAudioJSWebAudioContextHandle.close();try{XAudioJSWebAudioContextHandle=new AudioContext}catch(e){XAudioJSWebAudioContextHandle=new webkitAudioContext}XAudioJSWebAudioLaunchedContext=!0,XAudioJSWebAudioAudioNode&&(XAudioJSWebAudioAudioNode.disconnect(),XAudioJSWebAudioAudioNode.onaudioprocess=null,XAudioJSWebAudioAudioNode=null),XAudioJSSamplesPerCallback=Math.pow(2,11+Math.floor(XAudioJSWebAudioContextHandle.sampleRate/96e3)),XAudioJSMaxBufferSize=Math.max(XAudioJSSamplesPerCallback*XAudioJSChannelsAllocated,XAudioJSMaxBufferSize);try{XAudioJSWebAudioAudioNode=XAudioJSWebAudioContextHandle.createScriptProcessor(XAudioJSSamplesPerCallback,0,XAudioJSChannelsAllocated)}catch(e){XAudioJSWebAudioAudioNode=XAudioJSWebAudioContextHandle.createJavaScriptNode(XAudioJSSamplesPerCallback,0,XAudioJSChannelsAllocated)}if(XAudioJSWebAudioAudioNode.onaudioprocess=XAudioJSWebAudioEvent,XAudioJSWebAudioAudioNode.connect(XAudioJSWebAudioContextHandle.destination),this.resetCallbackAPIAudioBuffer(XAudioJSWebAudioContextHandle.sampleRate),XAudioJSWebAudioWatchDogLast=(new Date).getTime(),!XAudioJSWebAudioWatchDogTimer&&navigator.userAgent.indexOf("Gecko/")>-1){XAudioJSWebAudioWatchDogTimer&&clearInterval(XAudioJSWebAudioWatchDogTimer);var e=this;XAudioJSWebAudioWatchDogTimer=setInterval((function(){if(void 0!==XAudioJSWebAudioContextHandle.state)if("suspended"===XAudioJSWebAudioContextHandle.state){XAudioJSWebAudioWatchDogLast=(new Date).getTime();try{XAudioJSWebAudioContextHandle.resume()}catch(e){}}else{(new Date).getTime()-XAudioJSWebAudioWatchDogLast>500&&e.setupWebAudio()}}),500)}},XAudioServer.prototype.initializeFlashAudio=function(){var e=document.getElementById("XAudioJS");switch(this.flashInitialized=!1,this.resetCallbackAPIAudioBuffer(44100),XAudioJSChannelsAllocated){case 1:XAudioJSFlashTransportEncoder=XAudioJSGenerateFlashMonoString;break;case 2:XAudioJSFlashTransportEncoder=XAudioJSGenerateFlashStereoString;break;default:XAudioJSFlashTransportEncoder=XAudioJSGenerateFlashSurroundString}if(null==e){this.audioHandleFlash=null;var i=this,o=document.createElement("div");o.setAttribute("style","position: fixed; bottom: 0px; right: 0px; margin: 0px; padding: 0px; border: none; width: 8px; height: 8px; overflow: hidden; z-index: -1000; ");var a=document.createElement("div");a.setAttribute("style","position: static; border: none; width: 0px; height: 0px; visibility: hidden; margin: 8px; padding: 0px;"),a.setAttribute("id","XAudioJS"),o.appendChild(a),document.getElementsByTagName("body")[0].appendChild(o),swfobject.embedSWF(XAudioJSsourceHandle.substring(0,XAudioJSsourceHandle.length-9)+"JS.swf","XAudioJS","8","8","9.0.0","",{},{allowscriptaccess:"always"},{style:"position: static; visibility: hidden; margin: 8px; padding: 0px; border: none"},(function(e){e.success?(i.audioHandleFlash=e.ref,i.checkFlashInit()):(i.failureCallback(),i.audioType=-1)}))}else this.audioHandleFlash=e,this.checkFlashInit();this.audioType=2},XAudioServer.prototype.changeVolume=function(e){if(e>=0&&e<=1)switch(XAudioJSVolume=e,this.audioType){case 0:this.audioHandleMoz.volume=XAudioJSVolume;case 1:break;case 2:this.flashInitialized?this.audioHandleFlash.changeVolume(XAudioJSVolume):this.checkFlashInit();break;default:this.failureCallback()}},XAudioServer.prototype.checkFlashInit=function(){if(!this.flashInitialized)try{this.audioHandleFlash&&this.audioHandleFlash.initialize&&(this.flashInitialized=!0,this.audioHandleFlash.initialize(XAudioJSChannelsAllocated,XAudioJSVolume))}catch(e){this.flashInitialized=!1}},XAudioServer.prototype.resetCallbackAPIAudioBuffer=function(e){XAudioJSAudioBufferSize=XAudioJSResampleBufferEnd=XAudioJSResampleBufferStart=0,this.initializeResampler(e),XAudioJSResampledBuffer=this.getFloat32(XAudioJSResampleBufferSize)},XAudioServer.prototype.initializeResampler=function(e){XAudioJSAudioContextSampleBuffer=this.getFloat32(XAudioJSMaxBufferSize),XAudioJSResampleControl=new Resampler(this.XAudioJSSampleRate,e,XAudioJSChannelsAllocated,XAudioJSAudioContextSampleBuffer),XAudioJSResampleBufferSize=XAudioJSResampleControl.outputBuffer.length},XAudioServer.prototype.getFloat32=function(e){try{return new Float32Array(e)}catch(e){return[]}};var XAudioJSWebAudioContextHandle=null,XAudioJSWebAudioAudioNode=null,XAudioJSWebAudioWatchDogTimer=null,XAudioJSCallbackAPIEventNotificationCallback=null,XAudioJSCallbackAPIEventNotificationCallback2=null,XAudioJSCallbackAPIEventNotificationCallbackCompatTimer=setInterval(XAudioJSCallbackAPIEventNotificationDual,16),XAudioJSWebAudioWatchDogLast=!1,XAudioJSWebAudioLaunchedContext=!1,XAudioJSAudioContextSampleBuffer=[],XAudioJSResampledBuffer=[],XAudioJSMinBufferSize=15e3,XAudioJSMaxBufferSize=25e3,XAudioJSChannelsAllocated=1,XAudioJSVolume=1,XAudioJSResampleControl=null,XAudioJSAudioBufferSize=0,XAudioJSResampleBufferStart=0,XAudioJSResampleBufferEnd=0,XAudioJSResampleBufferSize=0,XAudioJSMozAudioSampleRate=44100,XAudioJSSamplesPerCallback=2048,XAudioJSFlashTransportEncoder=null,XAudioJSBinaryString=[];function XAudioJSWebAudioEvent(e){XAudioJSWebAudioWatchDogTimer&&(XAudioJSWebAudioWatchDogLast=(new Date).getTime());for(var i=0,o=[];i<XAudioJSChannelsAllocated;++i)o[i]=e.outputBuffer.getChannelData(i);XAudioJSCallbackAPIEventNotificationCallbackCompatTimerClear(),XAudioJSCallbackAPIEventNotification(),XAudioJSResampleRefill();for(var a=0;a<XAudioJSSamplesPerCallback&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;++a){for(i=0;i<XAudioJSChannelsAllocated;++i)o[i][a]=XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]*XAudioJSVolume;XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0)}for(;a<XAudioJSSamplesPerCallback;){for(i=0;i<XAudioJSChannelsAllocated;++i)o[i][a]=0;++a}XAudioJSCallbackAPIEventNotification2()}function XAudioJSResampleRefill(){if(XAudioJSAudioBufferSize>0){for(var e=XAudioJSResampleControl.resampler(XAudioJSAudioBufferSize),i=XAudioJSResampleControl.outputBuffer,o=0;o<e;)XAudioJSResampledBuffer[XAudioJSResampleBufferEnd++]=i[o++],XAudioJSResampleBufferEnd==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferEnd=0),XAudioJSResampleBufferStart==XAudioJSResampleBufferEnd&&(XAudioJSResampleBufferStart+=XAudioJSChannelsAllocated)==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);XAudioJSAudioBufferSize=0}}function XAudioJSCallbackAPIEventNotificationCallbackCompatTimerClear(){XAudioJSCallbackAPIEventNotificationCallbackCompatTimer&&clearInterval(XAudioJSCallbackAPIEventNotificationCallbackCompatTimer)}function XAudioJSCallbackAPIEventNotification(){"function"==typeof XAudioJSCallbackAPIEventNotificationCallback&&XAudioJSCallbackAPIEventNotificationCallback()}function XAudioJSCallbackAPIEventNotification2(){"function"==typeof XAudioJSCallbackAPIEventNotificationCallback2&&XAudioJSCallbackAPIEventNotificationCallback2()}function XAudioJSCallbackAPIEventNotificationDual(){XAudioJSCallbackAPIEventNotification(),XAudioJSCallbackAPIEventNotification2()}function XAudioJSResampledSamplesLeft(){return(XAudioJSResampleBufferStart<=XAudioJSResampleBufferEnd?0:XAudioJSResampleBufferSize)+XAudioJSResampleBufferEnd-XAudioJSResampleBufferStart}function XAudioJSGetArraySlice(e,i){try{return e.subarray(0,i)}catch(o){try{return e.length=i,e}catch(o){return e.slice(0,i)}}}
//# sourceMappingURL=build-index.1e28e52f.js.map
