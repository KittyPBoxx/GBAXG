{"mappings":"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","sources":["dist/IodineGBA/core/Saves.js"],"sourcesContent":["\"use strict\";\n/*\n Copyright (C) 2012-2016 Grant Galitz\n\n Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\nfunction GameBoyAdvanceSaves(IOCore) {\n    this.cartridge = IOCore.cartridge;\n}\nGameBoyAdvanceSaves.prototype.initialize = function () {\n    this.saveType = 0;\n    this.GPIOChip = new GameBoyAdvanceGPIOChip();\n    this.UNDETERMINED = new GameBoyAdvanceSaveDeterminer(this);\n    this.SRAMChip = new GameBoyAdvanceSRAMChip();\n    this.FLASHChip = new GameBoyAdvanceFLASHChip(this.cartridge.getFlash_is128(), this.cartridge.getFlash_isAtmel());\n    this.EEPROMChip = new GameBoyAdvanceEEPROMChip(this.cartridge.IOCore);\n    this.currentChip = this.UNDETERMINED;\n    this.referenceSave(this.saveType);\n}\nGameBoyAdvanceSaves.prototype.referenceSave = function (saveType) {\n    saveType = saveType | 0;\n    switch (saveType | 0) {\n        case 0:\n            this.currentChip = this.UNDETERMINED;\n            break;\n        case 1:\n            this.currentChip = this.SRAMChip;\n            break;\n        case 2:\n            this.currentChip = this.FLASHChip;\n            break;\n        case 3:\n            this.currentChip = this.EEPROMChip;\n    }\n    this.currentChip.initialize();\n    this.saveType = saveType | 0;\n}\nGameBoyAdvanceSaves.prototype.importSave = function (saves, saveType) {\n    saveType = saveType | 0;\n    this.UNDETERMINED.load(saves);\n    this.SRAMChip.load(saves);\n    this.FLASHChip.load(saves);\n    this.EEPROMChip.load(saves);\n    this.referenceSave(saveType | 0);\n}\nGameBoyAdvanceSaves.prototype.importRTC = function (saves) {\n    this.GPIOChip.loadRTC(saves);\n}\nGameBoyAdvanceSaves.prototype.importGPIOType = function (gpioType) {\n    gpioType = gpioType | 0;\n    this.GPIOChip.loadType(gpioType | 0);\n}\nGameBoyAdvanceSaves.prototype.exportSave = function () {\n    return this.currentChip.saves;\n}\nGameBoyAdvanceSaves.prototype.exportSaveType = function () {\n    return this.saveType | 0;\n}\nGameBoyAdvanceSaves.prototype.readGPIO8 = function (address) {\n    address = address | 0;\n    var data = 0;\n    if ((this.GPIOChip.getType() | 0) > 0 && this.GPIOChip.supportsRead8(address)) {\n        //GPIO:\n        data = this.GPIOChip.read8(address | 0) | 0;\n    }\n    else {\n        //ROM:\n        data = this.cartridge.readROMOnly8(address | 0) | 0;\n    }\n    return data | 0;\n}\nGameBoyAdvanceSaves.prototype.readEEPROM8 = function (address) {\n    address = address | 0;\n    var data = 0;\n    if ((this.saveType | 0) == 3) {\n        //EEPROM:\n        data = this.EEPROMChip.read8() | 0;\n    }\n    else {\n        //UNKNOWN:\n        data = this.UNDETERMINED.readEEPROM8(address | 0) | 0;\n    }\n    return data | 0;\n}\nGameBoyAdvanceSaves.prototype.readGPIO16 = function (address) {\n    address = address | 0;\n    var data = 0;\n    if ((this.GPIOChip.getType() | 0) > 0 && this.GPIOChip.supportsRead16(address)) {\n        //GPIO:\n        data = this.GPIOChip.read16(address | 0) | 0;\n    }\n    else {\n        //ROM:\n        data = this.cartridge.readROMOnly16(address | 0) | 0;\n    }\n    return data | 0;\n}\nGameBoyAdvanceSaves.prototype.readEEPROM16 = function (address) {\n    address = address | 0;\n    var data = 0;\n    if ((this.saveType | 0) == 3) {\n        //EEPROM:\n        data = this.EEPROMChip.read16() | 0;\n    }\n    else {\n        //UNKNOWN:\n        data = this.UNDETERMINED.readEEPROM16(address | 0) | 0;\n    }\n    return data | 0;\n}\nGameBoyAdvanceSaves.prototype.readGPIO32 = function (address) {\n    address = address | 0;\n    var data = 0;\n    if ((this.GPIOChip.getType() | 0) > 0 && this.GPIOChip.supportsRead32(address)) {\n        //GPIO:\n        data = this.GPIOChip.read32(address | 0) | 0;\n    }\n    else {\n        //ROM:\n        data = this.cartridge.readROMOnly32(address | 0) | 0;\n    }\n    return data | 0;\n}\nGameBoyAdvanceSaves.prototype.readEEPROM32 = function (address) {\n    address = address | 0;\n    var data = 0;\n    if ((this.saveType | 0) == 3) {\n        //EEPROM:\n        data = this.EEPROMChip.read32() | 0;\n    }\n    else {\n        //UNKNOWN:\n        data = this.UNDETERMINED.readEEPROM32(address | 0) | 0;\n    }\n    return data | 0;\n}\nGameBoyAdvanceSaves.prototype.readSRAM = function (address) {\n    address = address | 0;\n    var data = 0;\n    switch (this.saveType | 0) {\n        case 0:\n            //UNKNOWN:\n            data = this.UNDETERMINED.readSRAM(address | 0) | 0;\n            break;\n        case 1:\n            //SRAM:\n            data = this.SRAMChip.read(address | 0) | 0;\n            break;\n        case 2:\n            //FLASH:\n            data = this.FLASHChip.read(address | 0) | 0;\n    }\n    return data | 0;\n}\nGameBoyAdvanceSaves.prototype.writeGPIO8 = function (address, data) {\n    address = address | 0;\n    data = data | 0;\n    if ((this.GPIOChip.getType() | 0) > 0 && this.GPIOChip.supportsWrite8(address)) {\n        //GPIO:\n        this.GPIOChip.write8(address | 0, data | 0);\n    }\n    else {\n        //Unknown:\n        this.UNDETERMINED.writeGPIO8(address | 0, data | 0);\n    }\n}\nGameBoyAdvanceSaves.prototype.writeGPIO16 = function (address, data) {\n    address = address | 0;\n    data = data | 0;\n    if ((this.GPIOChip.getType() | 0) > 0 && this.GPIOChip.supportsWrite16(address)) {\n        //GPIO:\n        this.GPIOChip.write16(address | 0, data | 0);\n    }\n    else {\n        //Unknown:\n        this.UNDETERMINED.writeGPIO16(address | 0, data | 0);\n    }\n}\nGameBoyAdvanceSaves.prototype.writeEEPROM16 = function (address, data) {\n    address = address | 0;\n    data = data | 0;\n    if ((this.saveType | 0) == 3) {\n        //EEPROM:\n        this.EEPROMChip.write16(data | 0);\n    }\n    else {\n        //Unknown:\n        this.UNDETERMINED.writeEEPROM16(address | 0, data | 0);\n    }\n}\nGameBoyAdvanceSaves.prototype.writeGPIO32 = function (address, data) {\n    address = address | 0;\n    data = data | 0;\n    if ((this.GPIOChip.getType() | 0) > 0 && this.GPIOChip.supportsWrite32(address)) {\n        //GPIO:\n        this.GPIOChip.write32(address | 0, data | 0);\n    }\n    else {\n        //Unknown:\n        this.UNDETERMINED.writeGPIO32(address | 0, data | 0);\n    }\n}\nGameBoyAdvanceSaves.prototype.writeSRAM = function (address, data) {\n    address = address | 0;\n    data = data | 0;\n    this.saveIntercept(address, data);\n    switch (this.saveType | 0) {\n        case 0:\n            //Unknown:\n            this.UNDETERMINED.writeSRAM(address | 0, data | 0);\n            break;\n        case 1:\n            //SRAM:\n            this.SRAMChip.write(address | 0, data | 0);\n            break;\n        case 2:\n            //FLASH:\n            this.FLASHChip.write(address | 0, data | 0);\n    }\n}\nGameBoyAdvanceSaves.prototype.writeSRAMIfDefined = function (address, data) {\n    address = address | 0;\n    data = data | 0;\n    switch (this.saveType | 0) {\n        case 0:\n            //UNKNOWN:\n            this.SRAMChip.initialize();\n        case 1:\n            //SRAM:\n            this.SRAMChip.write(address | 0, data | 0);\n            break;\n        case 2:\n            //FLASH:\n            this.FLASHChip.write(address | 0, data | 0);\n    }\n}\n\nGameBoyAdvanceSaves.prototype.saveIntercept = function (address, data) {\n    /* \n        Do Nothing, Intercept this if you need to trigger somthing on save to sram\n    */\n}\n"],"names":["GameBoyAdvanceSaves","IOCore","this","cartridge","prototype","initialize","saveType","GPIOChip","GameBoyAdvanceGPIOChip","UNDETERMINED","GameBoyAdvanceSaveDeterminer","SRAMChip","GameBoyAdvanceSRAMChip","FLASHChip","GameBoyAdvanceFLASHChip","getFlash_is128","getFlash_isAtmel","EEPROMChip","GameBoyAdvanceEEPROMChip","currentChip","referenceSave","importSave","saves","load","importRTC","loadRTC","importGPIOType","gpioType","loadType","exportSave","exportSaveType","readGPIO8","address","getType","supportsRead8","read8","readROMOnly8","readEEPROM8","readGPIO16","supportsRead16","read16","readROMOnly16","readEEPROM16","readGPIO32","supportsRead32","read32","readROMOnly32","readEEPROM32","readSRAM","data","read","writeGPIO8","supportsWrite8","write8","writeGPIO16","supportsWrite16","write16","writeEEPROM16","writeGPIO32","supportsWrite32","write32","writeSRAM","saveIntercept","write","writeSRAMIfDefined"],"version":3,"file":"index.cb89d4d2.js.map"}