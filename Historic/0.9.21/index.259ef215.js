"use strict";function GameBoyAdvanceChannel2Synth(e){this.sound=e,this.currentSampleLeft=0,this.currentSampleRight=0,this.CachedDuty=4026531840,this.totalLength=64,this.envelopeVolume=0,this.frequency=0,this.FrequencyTracker=32768,this.consecutive=!0,this.ShadowFrequency=32768,this.canPlay=!1,this.Enabled=0,this.envelopeSweeps=0,this.envelopeSweepsLast=-1,this.FrequencyCounter=0,this.DutyTracker=0,this.leftEnable=0,this.rightEnable=0,this.nr21=0,this.nr22=0,this.nr23=0,this.nr24=0}GameBoyAdvanceChannel2Synth.prototype.disabled=function(){this.nr21=0,this.CachedDuty=4026531840,this.totalLength=64,this.nr22=0,this.envelopeVolume=0,this.nr23=0,this.frequency=0,this.FrequencyTracker=32768,this.nr24=0,this.consecutive=!0,this.canPlay=!1,this.Enabled=0,this.envelopeSweeps=0,this.envelopeSweepsLast=-1,this.FrequencyCounter=0,this.DutyTracker=0},GameBoyAdvanceChannel2Synth.prototype.clockAudioLength=function(){(0|this.totalLength)>1?this.totalLength=(0|this.totalLength)-1|0:1==(0|this.totalLength)&&(this.totalLength=0,this.enableCheck(),this.sound.unsetNR52(253))},GameBoyAdvanceChannel2Synth.prototype.clockAudioEnvelope=function(){(0|this.envelopeSweepsLast)>-1&&((0|this.envelopeSweeps)>0?this.envelopeSweeps=(0|this.envelopeSweeps)-1|0:this.envelopeType?(0|this.envelopeVolume)<15?(this.envelopeVolume=1+(0|this.envelopeVolume)|0,this.envelopeSweeps=0|this.envelopeSweepsLast):this.envelopeSweepsLast=-1:(0|this.envelopeVolume)>0?(this.envelopeVolume=(0|this.envelopeVolume)-1|0,this.envelopeSweeps=0|this.envelopeSweepsLast):this.envelopeSweepsLast=-1)},GameBoyAdvanceChannel2Synth.prototype.computeAudioChannel=function(){0==(0|this.FrequencyCounter)&&(this.FrequencyCounter=0|this.FrequencyTracker,this.DutyTracker=4+(0|this.DutyTracker)&28)},GameBoyAdvanceChannel2Synth.prototype.enableCheck=function(){(this.consecutive||(0|this.totalLength)>0)&&this.canPlay?this.Enabled=15:this.Enabled=0},GameBoyAdvanceChannel2Synth.prototype.volumeEnableCheck=function(){this.canPlay=(0|this.nr22)>7,this.enableCheck()},GameBoyAdvanceChannel2Synth.prototype.outputLevelCache=function(){var e=this.CachedDuty>>(0|this.DutyTracker),t=this.envelopeVolume&this.Enabled&e;this.currentSampleLeft=this.leftEnable&t,this.currentSampleRight=this.rightEnable&t},GameBoyAdvanceChannel2Synth.prototype.setChannelOutputEnable=function(e){e|=0,this.rightEnable=e<<30>>31,this.leftEnable=e<<26>>31},GameBoyAdvanceChannel2Synth.prototype.readSOUND2CNT_L0=function(){return 0|this.nr21},GameBoyAdvanceChannel2Synth.prototype.writeSOUND2CNT_L0=function(e){switch((e|=0)>>6&3){case 0:this.CachedDuty=4026531840;break;case 1:this.CachedDuty=4026531855;break;case 2:this.CachedDuty=4293918735;break;default:this.CachedDuty=268435440}this.totalLength=64-(63&e)|0,this.nr21=255&e,this.enableCheck()},GameBoyAdvanceChannel2Synth.prototype.readSOUND2CNT_L1=function(){return 0|this.nr22},GameBoyAdvanceChannel2Synth.prototype.writeSOUND2CNT_L1=function(e){e|=0,this.envelopeType=0!=(8&e),this.nr22=255&e,this.volumeEnableCheck()},GameBoyAdvanceChannel2Synth.prototype.writeSOUND2CNT_H0=function(e){e|=0,this.frequency=1792&this.frequency|255&e,this.FrequencyTracker=2048-(0|this.frequency)<<4},GameBoyAdvanceChannel2Synth.prototype.readSOUND2CNT_H=function(){return 0|this.nr24},GameBoyAdvanceChannel2Synth.prototype.writeSOUND2CNT_H1=function(e){0!=(128&(e|=0))&&(this.envelopeVolume=this.nr22>>4,this.envelopeSweepsLast=(7&this.nr22)-1|0,0==(0|this.totalLength)&&(this.totalLength=64),0!=(64&e)&&this.sound.setNR52(2)),this.consecutive=0==(64&e),this.frequency=(7&e)<<8|255&this.frequency,this.FrequencyTracker=2048-(0|this.frequency)<<4,this.nr24=255&e,this.enableCheck()};
//# sourceMappingURL=index.259ef215.js.map
