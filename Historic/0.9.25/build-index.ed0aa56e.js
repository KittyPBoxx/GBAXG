"use strict";function GameBoyAdvanceEEPROMChip(e){this.saves=null,this.largestSizePossible=512,this.mode=0,this.bitsProcessed=0,this.address=0,this.buffer=getUint8Array(8),this.IOCore=e}GameBoyAdvanceEEPROMChip.prototype.initialize=function(){this.allocate()},GameBoyAdvanceEEPROMChip.prototype.allocate=function(){if(null==this.saves||(0|this.saves.length)<(0|this.largestSizePossible)){for(var e=getUint8Array(0|this.largestSizePossible),s=0;(0|s)<(0|this.largestSizePossible);s=1+(0|s)|0)e[0|s]=255;if(null!=this.saves)for(s=0;(0|s)<(0|this.saves.length);s=1+(0|s)|0)e[0|s]=0|this.saves[0|s];this.saves=e}},GameBoyAdvanceEEPROMChip.prototype.load=function(e){512!=(0|e.length)&&8192!=(0|e.length)||(this.saves=e)},GameBoyAdvanceEEPROMChip.prototype.read8=function(){return 1},GameBoyAdvanceEEPROMChip.prototype.read16=function(){var e=1;switch(0|this.mode){case 7:e=0,(0|this.bitsProcessed)<3?this.bitsProcessed=1+(0|this.bitsProcessed)|0:(this.bitsProcessed=0,this.mode=8);break;case 8:var s=(this.bitsProcessed>>3)+(0|this.address)|0;e=this.saves[0|s]>>(7-(7&this.bitsProcessed)|0)&1,(0|this.bitsProcessed)<63?this.bitsProcessed=1+(0|this.bitsProcessed)|0:this.resetMode()}return 0|e},GameBoyAdvanceEEPROMChip.prototype.read32=function(){return 65537},GameBoyAdvanceEEPROMChip.prototype.write16=function(e){switch(e|=0,e&=1,0|this.mode){case 0:this.mode=0|e;break;case 1:this.selectMode(0|e);break;case 2:case 3:this.addressMode(0|e);break;case 4:this.writeMode(0|e);break;case 5:case 6:this.endAddressing();break;default:this.resetMode()}},GameBoyAdvanceEEPROMChip.prototype.selectMode=function(e){e|=0,this.address=0,this.bitsProcessed=0,this.mode=2|e},GameBoyAdvanceEEPROMChip.prototype.addressMode=function(e){switch(e|=0,this.address=this.address<<1|e,this.bitsProcessed=1+(0|this.bitsProcessed)|0,0|this.bitsProcessed){case 6:if((0|this.IOCore.dmaChannel3.wordCountShadow)>=(2==(0|this.mode)?74:10)){this.largestSizePossible=8192,this.allocate();break}case 14:this.changeModeToActive()}},GameBoyAdvanceEEPROMChip.prototype.changeModeToActive=function(){this.address&=1023,this.address<<=3,this.bitsProcessed=0,this.mode=2+(0|this.mode)|0},GameBoyAdvanceEEPROMChip.prototype.writeMode=function(e){e|=0,this.pushBuffer(0|e),64==(0|this.bitsProcessed)&&(this.copyBuffer(),this.mode=6)},GameBoyAdvanceEEPROMChip.prototype.pushBuffer=function(e){e|=0;var s=this.bitsProcessed>>3;this.buffer[7&s]=this.buffer[7&s]<<1&254|e,this.bitsProcessed=1+(0|this.bitsProcessed)|0},GameBoyAdvanceEEPROMChip.prototype.copyBuffer=function(){for(var e=0;(0|e)<8;e=1+(0|e)|0)this.saves[this.address|e]=255&this.buffer[7&e]},GameBoyAdvanceEEPROMChip.prototype.endAddressing=function(){this.mode=2+(0|this.mode)|0},GameBoyAdvanceEEPROMChip.prototype.resetMode=function(){this.mode=0};
//# sourceMappingURL=build-index.ed0aa56e.js.map
