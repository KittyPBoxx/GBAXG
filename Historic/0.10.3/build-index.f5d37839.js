"use strict";function GameBoyAdvanceSound(t){this.IOCore=t}GameBoyAdvanceSound.prototype.initialize=function(){this.coreExposed=this.IOCore.coreExposed,this.dmaChannel1=this.IOCore.dmaChannel1,this.dmaChannel2=this.IOCore.dmaChannel2,this.audioTicks=0,this.initializeSampling(380),this.initializeAudioStartState()},GameBoyAdvanceSound.prototype.initializeOutput=function(t){(0|(t|=0))!=(0|this.audioResamplerFirstPassFactor)&&this.initializeSampling(0|t)},GameBoyAdvanceSound.prototype.initializeSampling=function(t){t|=0,this.audioIndex=0,this.downsampleInputLeft=0,this.downsampleInputRight=0,this.audioResamplerFirstPassFactor=0|t},GameBoyAdvanceSound.prototype.initializeAudioStartState=function(){this.nr60=0,this.nr61=0,this.nr62=this.IOCore.SKIPBoot?255:0,this.nr63=this.IOCore.SKIPBoot?2:0,this.soundMasterEnabled=!!this.IOCore.SKIPBoot,this.mixerSoundBIAS=this.IOCore.SKIPBoot?512:0,this.channel1=new GameBoyAdvanceChannel1Synth(this),this.channel2=new GameBoyAdvanceChannel2Synth(this),this.channel3=new GameBoyAdvanceChannel3Synth(this),this.channel4=new GameBoyAdvanceChannel4Synth(this),this.CGBMixerOutputCacheLeft=0,this.CGBMixerOutputCacheLeftFolded=0,this.CGBMixerOutputCacheRight=0,this.CGBMixerOutputCacheRightFolded=0,this.AGBDirectSoundATimer=0,this.AGBDirectSoundBTimer=0,this.AGBDirectSoundA=0,this.AGBDirectSoundAFolded=0,this.AGBDirectSoundB=0,this.AGBDirectSoundBFolded=0,this.AGBDirectSoundAShifter=0,this.AGBDirectSoundBShifter=0,this.AGBDirectSoundALeftCanPlay=!1,this.AGBDirectSoundBLeftCanPlay=!1,this.AGBDirectSoundARightCanPlay=!1,this.AGBDirectSoundBRightCanPlay=!1,this.CGBOutputRatio=2,this.FIFOABuffer=new GameBoyAdvanceFIFO,this.FIFOBBuffer=new GameBoyAdvanceFIFO,this.audioDisabled()},GameBoyAdvanceSound.prototype.audioDisabled=function(){this.channel1.disabled(),this.channel2.disabled(),this.channel3.disabled(),this.channel4.disabled(),this.AGBDirectSoundAFIFOClear(),this.AGBDirectSoundBFIFOClear(),this.nr50=0,this.VinLeftChannelMasterVolume=1,this.VinRightChannelMasterVolume=1,this.nr51=0,this.nr52=0,this.soundMasterEnabled=!1,this.mixerOutputCacheLeft=0|this.mixerSoundBIAS,this.mixerOutputCacheRight=0|this.mixerSoundBIAS,this.audioClocksUntilNextEventCounter=0,this.audioClocksUntilNextEvent=0,this.sequencePosition=0,this.sequencerClocks=32768,this.PWMWidth=512,this.PWMWidthOld=512,this.PWMWidthShadow=512,this.PWMBitDepthMask=1022,this.PWMBitDepthMaskShadow=1022,this.channel1.outputLevelCache(),this.channel2.outputLevelCache(),this.channel3.updateCache(),this.channel4.updateCache()},GameBoyAdvanceSound.prototype.audioEnabled=function(){this.nr52=128,this.soundMasterEnabled=!0},GameBoyAdvanceSound.prototype.addClocks=function(t){t|=0,this.audioTicks=(0|this.audioTicks)+(0|t)|0},"function"==typeof Math.imul?GameBoyAdvanceSound.prototype.generateAudio=function(t){t|=0;var e=0;if(this.soundMasterEnabled&&!this.IOCore.isStopped())for(var n=0;(0|t)>0;){for(n=0|Math.min(0|this.PWMWidth,0|t),this.PWMWidth=(0|this.PWMWidth)-(0|n)|0,t=(0|t)-(0|n)|0;(0|n)>0;)n=(0|n)-(0|(e=0|Math.min(0|n,(0|this.audioResamplerFirstPassFactor)-(0|this.audioIndex)|0)))|0,this.audioIndex=(0|this.audioIndex)+(0|e)|0,this.downsampleInputLeft=(0|this.downsampleInputLeft)+Math.imul(0|this.mixerOutputCacheLeft,0|e)|0,this.downsampleInputRight=(0|this.downsampleInputRight)+Math.imul(0|this.mixerOutputCacheRight,0|e)|0,(0|this.audioIndex)==(0|this.audioResamplerFirstPassFactor)&&(this.audioIndex=0,this.coreExposed.outputAudio(0|this.downsampleInputLeft,0|this.downsampleInputRight),this.downsampleInputLeft=0,this.downsampleInputRight=0);0==(0|this.PWMWidth)&&(this.computeNextPWMInterval(),this.PWMWidthOld=0|this.PWMWidthShadow,this.PWMWidth=0|this.PWMWidthShadow)}else for(;(0|t)>0;)t=(0|t)-(0|(e=0|Math.min(0|t,(0|this.audioResamplerFirstPassFactor)-(0|this.audioIndex)|0)))|0,this.audioIndex=(0|this.audioIndex)+(0|e)|0,(0|this.audioIndex)==(0|this.audioResamplerFirstPassFactor)&&(this.audioIndex=0,this.coreExposed.outputAudio(0|this.downsampleInputLeft,0|this.downsampleInputRight),this.downsampleInputLeft=0,this.downsampleInputRight=0)}:GameBoyAdvanceSound.prototype.generateAudio=function(t){var e=0;if(this.soundMasterEnabled&&!this.IOCore.isStopped())for(var n=0;t>0;){for(n=Math.min(this.PWMWidth,t),this.PWMWidth=this.PWMWidth-n,t-=n;n>0;)n-=e=Math.min(n,this.audioResamplerFirstPassFactor-this.audioIndex),this.audioIndex+=e,this.downsampleInputLeft+=this.mixerOutputCacheLeft*e,this.downsampleInputRight+=this.mixerOutputCacheRight*e,this.audioIndex==this.audioResamplerFirstPassFactor&&(this.audioIndex=0,this.coreExposed.outputAudio(this.downsampleInputLeft,this.downsampleInputRight),this.downsampleInputLeft=0,this.downsampleInputRight=0);0==this.PWMWidth&&(this.computeNextPWMInterval(),this.PWMWidthOld=this.PWMWidthShadow,this.PWMWidth=this.PWMWidthShadow)}else for(;t>0;)t-=e=Math.min(t,this.audioResamplerFirstPassFactor-this.audioIndex),this.audioIndex+=e,this.audioIndex==this.audioResamplerFirstPassFactor&&(this.audioIndex=0,this.coreExposed.outputAudio(this.downsampleInputLeft,this.downsampleInputRight),this.downsampleInputLeft=0,this.downsampleInputRight=0)},GameBoyAdvanceSound.prototype.audioJIT=function(){this.generateAudio(0|this.audioTicks),this.audioTicks=0},GameBoyAdvanceSound.prototype.audioPSGJIT=function(){this.IOCore.updateTimerClocking(),this.audioJIT()},GameBoyAdvanceSound.prototype.computeNextPWMInterval=function(){for(var t=0|this.PWMWidthOld,e=0;(0|t)>0;t=(0|t)-1|0)e=0|Math.min(0|this.audioClocksUntilNextEventCounter,0|this.sequencerClocks,0|t),this.audioClocksUntilNextEventCounter=(0|this.audioClocksUntilNextEventCounter)-(0|e)|0,this.sequencerClocks=(0|this.sequencerClocks)-(0|e)|0,t=(0|t)-(0|e)|0,0==(0|this.sequencerClocks)&&(this.audioComputeSequencer(),this.sequencerClocks=32768),0==(0|this.audioClocksUntilNextEventCounter)&&this.computeAudioChannels();this.PWMBitDepthMask=0|this.PWMBitDepthMaskShadow,this.channel1.outputLevelCache(),this.channel2.outputLevelCache(),this.channel3.updateCache(),this.channel4.updateCache(),this.CGBMixerOutputLevelCache(),this.mixerOutputLevelCache()},GameBoyAdvanceSound.prototype.audioComputeSequencer=function(){switch(this.sequencePosition++){case 0:case 4:this.clockAudioLength();break;case 2:case 6:this.clockAudioLength(),this.channel1.clockAudioSweep();break;case 7:this.clockAudioEnvelope(),this.sequencePosition=0}},GameBoyAdvanceSound.prototype.clockAudioLength=function(){this.channel1.clockAudioLength(),this.channel2.clockAudioLength(),this.channel3.clockAudioLength(),this.channel4.clockAudioLength()},GameBoyAdvanceSound.prototype.clockAudioEnvelope=function(){this.channel1.clockAudioEnvelope(),this.channel2.clockAudioEnvelope(),this.channel4.clockAudioEnvelope()},GameBoyAdvanceSound.prototype.computeAudioChannels=function(){this.channel1.FrequencyCounter=(0|this.channel1.FrequencyCounter)-(0|this.audioClocksUntilNextEvent)|0,this.channel2.FrequencyCounter=(0|this.channel2.FrequencyCounter)-(0|this.audioClocksUntilNextEvent)|0,this.channel3.counter=(0|this.channel3.counter)-(0|this.audioClocksUntilNextEvent)|0,this.channel4.counter=(0|this.channel4.counter)-(0|this.audioClocksUntilNextEvent)|0,this.channel1.computeAudioChannel(),this.channel2.computeAudioChannel(),this.channel3.computeAudioChannel(),this.channel4.computeAudioChannel(),this.audioClocksUntilNextEventCounter=this.audioClocksUntilNextEvent=0|Math.min(0|this.channel1.FrequencyCounter,0|this.channel2.FrequencyCounter,0|this.channel3.counter,0|this.channel4.counter)},"function"==typeof Math.imul?GameBoyAdvanceSound.prototype.CGBMixerOutputLevelCache=function(){this.CGBMixerOutputCacheLeft=0|Math.imul((0|this.channel1.currentSampleLeft)+(0|this.channel2.currentSampleLeft)+(0|this.channel3.currentSampleLeft)+(0|this.channel4.currentSampleLeft)|0,0|this.VinLeftChannelMasterVolume),this.CGBMixerOutputCacheRight=0|Math.imul((0|this.channel1.currentSampleRight)+(0|this.channel2.currentSampleRight)+(0|this.channel3.currentSampleRight)+(0|this.channel4.currentSampleRight)|0,0|this.VinRightChannelMasterVolume),this.CGBFolder()}:GameBoyAdvanceSound.prototype.CGBMixerOutputLevelCache=function(){this.CGBMixerOutputCacheLeft=(this.channel1.currentSampleLeft+this.channel2.currentSampleLeft+this.channel3.currentSampleLeft+this.channel4.currentSampleLeft)*this.VinLeftChannelMasterVolume,this.CGBMixerOutputCacheRight=(this.channel1.currentSampleRight+this.channel2.currentSampleRight+this.channel3.currentSampleRight+this.channel4.currentSampleRight)*this.VinRightChannelMasterVolume,this.CGBFolder()},GameBoyAdvanceSound.prototype.writeWAVE8=function(t,e){t|=0,e|=0,this.audioPSGJIT(),this.channel3.writeWAVE8(0|t,0|e)},GameBoyAdvanceSound.prototype.readWAVE8=function(t){return t|=0,this.audioPSGJIT(),0|this.channel3.readWAVE8(0|t)},GameBoyAdvanceSound.prototype.writeWAVE16=function(t,e){t|=0,e|=0,this.audioPSGJIT(),this.channel3.writeWAVE16(t>>1,0|e)},GameBoyAdvanceSound.prototype.readWAVE16=function(t){return t|=0,this.audioPSGJIT(),0|this.channel3.readWAVE16(t>>1)},GameBoyAdvanceSound.prototype.writeWAVE32=function(t,e){t|=0,e|=0,this.audioPSGJIT(),this.channel3.writeWAVE32(t>>2,0|e)},GameBoyAdvanceSound.prototype.readWAVE32=function(t){return t|=0,this.audioPSGJIT(),0|this.channel3.readWAVE32(t>>2)},GameBoyAdvanceSound.prototype.writeFIFOA8=function(t){t|=0,this.IOCore.updateTimerClocking(),this.FIFOABuffer.push8(0|t),this.checkFIFOAPendingSignal()},GameBoyAdvanceSound.prototype.writeFIFOB8=function(t){t|=0,this.IOCore.updateTimerClocking(),this.FIFOBBuffer.push8(0|t),this.checkFIFOBPendingSignal()},GameBoyAdvanceSound.prototype.writeFIFOA16=function(t){t|=0,this.IOCore.updateTimerClocking(),this.FIFOABuffer.push16(0|t),this.checkFIFOAPendingSignal()},GameBoyAdvanceSound.prototype.writeFIFOB16=function(t){t|=0,this.IOCore.updateTimerClocking(),this.FIFOBBuffer.push16(0|t),this.checkFIFOBPendingSignal()},GameBoyAdvanceSound.prototype.writeFIFOA32=function(t){t|=0,this.IOCore.updateTimerClocking(),this.FIFOABuffer.push32(0|t),this.checkFIFOAPendingSignal()},GameBoyAdvanceSound.prototype.writeFIFOB32=function(t){t|=0,this.IOCore.updateTimerClocking(),this.FIFOBBuffer.push32(0|t),this.checkFIFOBPendingSignal()},GameBoyAdvanceSound.prototype.checkFIFOAPendingSignal=function(){this.FIFOABuffer.requestingDMA()&&this.dmaChannel1.soundFIFOARequest()},GameBoyAdvanceSound.prototype.checkFIFOBPendingSignal=function(){this.FIFOBBuffer.requestingDMA()&&this.dmaChannel2.soundFIFOBRequest()},GameBoyAdvanceSound.prototype.AGBDirectSoundAFIFOClear=function(){this.FIFOABuffer.clear(),this.AGBDirectSoundATimerIncrement()},GameBoyAdvanceSound.prototype.AGBDirectSoundBFIFOClear=function(){this.FIFOBBuffer.clear(),this.AGBDirectSoundBTimerIncrement()},GameBoyAdvanceSound.prototype.AGBDirectSoundTimer0ClockTick=function(){this.audioJIT(),this.soundMasterEnabled&&(0==(0|this.AGBDirectSoundATimer)&&this.AGBDirectSoundATimerIncrement(),0==(0|this.AGBDirectSoundBTimer)&&this.AGBDirectSoundBTimerIncrement())},GameBoyAdvanceSound.prototype.AGBDirectSoundTimer1ClockTick=function(){this.audioJIT(),this.soundMasterEnabled&&(1==(0|this.AGBDirectSoundATimer)&&this.AGBDirectSoundATimerIncrement(),1==(0|this.AGBDirectSoundBTimer)&&this.AGBDirectSoundBTimerIncrement())},GameBoyAdvanceSound.prototype.nextFIFOAEventTime=function(){var t=2147483647;if(this.soundMasterEnabled)if(this.FIFOABuffer.requestingDMA())t=0;else{var e=0|this.FIFOABuffer.samplesUntilDMATrigger();t=0==(0|this.AGBDirectSoundATimer)?0|this.IOCore.timer.nextTimer0Overflow(0|e):0|this.IOCore.timer.nextTimer1Overflow(0|e)}return 0|t},GameBoyAdvanceSound.prototype.nextFIFOBEventTime=function(){var t=2147483647;if(this.soundMasterEnabled)if(this.FIFOBBuffer.requestingDMA())t=0;else{var e=0|this.FIFOBBuffer.samplesUntilDMATrigger();t=0==(0|this.AGBDirectSoundBTimer)?0|this.IOCore.timer.nextTimer0Overflow(0|e):0|this.IOCore.timer.nextTimer1Overflow(0|e)}return 0|t},GameBoyAdvanceSound.prototype.AGBDirectSoundATimerIncrement=function(){this.AGBDirectSoundA=0|this.FIFOABuffer.shift(),this.checkFIFOAPendingSignal(),this.AGBFIFOAFolder()},GameBoyAdvanceSound.prototype.AGBDirectSoundBTimerIncrement=function(){this.AGBDirectSoundB=0|this.FIFOBBuffer.shift(),this.checkFIFOBPendingSignal(),this.AGBFIFOBFolder()},GameBoyAdvanceSound.prototype.AGBFIFOAFolder=function(){this.AGBDirectSoundAFolded=this.AGBDirectSoundA>>(0|this.AGBDirectSoundAShifter)},GameBoyAdvanceSound.prototype.AGBFIFOBFolder=function(){this.AGBDirectSoundBFolded=this.AGBDirectSoundB>>(0|this.AGBDirectSoundBShifter)},GameBoyAdvanceSound.prototype.CGBFolder=function(){this.CGBMixerOutputCacheLeftFolded=this.CGBMixerOutputCacheLeft<<(0|this.CGBOutputRatio)>>1,this.CGBMixerOutputCacheRightFolded=this.CGBMixerOutputCacheRight<<(0|this.CGBOutputRatio)>>1},GameBoyAdvanceSound.prototype.mixerOutputLevelCache=function(){this.mixerOutputCacheLeft=Math.min(0|Math.max((this.AGBDirectSoundALeftCanPlay?0|this.AGBDirectSoundAFolded:0)+(this.AGBDirectSoundBLeftCanPlay?0|this.AGBDirectSoundBFolded:0)+(0|this.CGBMixerOutputCacheLeftFolded)+(0|this.mixerSoundBIAS)|0,0),1023)&this.PWMBitDepthMask,this.mixerOutputCacheRight=Math.min(0|Math.max((this.AGBDirectSoundARightCanPlay?0|this.AGBDirectSoundAFolded:0)+(this.AGBDirectSoundBRightCanPlay?0|this.AGBDirectSoundBFolded:0)+(0|this.CGBMixerOutputCacheRightFolded)+(0|this.mixerSoundBIAS)|0,0),1023)&this.PWMBitDepthMask},GameBoyAdvanceSound.prototype.setNR52=function(t){t|=0,this.nr52=t|this.nr52},GameBoyAdvanceSound.prototype.unsetNR52=function(t){t|=0,this.nr52=t&this.nr52},GameBoyAdvanceSound.prototype.readSOUND1CNT8_0=function(){return 0|this.channel1.readSOUND1CNT8_0()},GameBoyAdvanceSound.prototype.writeSOUND1CNT8_0=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT8_0(0|t))},GameBoyAdvanceSound.prototype.readSOUND1CNT8_2=function(){return 0|this.channel1.readSOUND1CNT8_2()},GameBoyAdvanceSound.prototype.writeSOUND1CNT8_2=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT8_2(0|t))},GameBoyAdvanceSound.prototype.readSOUND1CNT8_3=function(){return 0|this.channel1.readSOUND1CNT8_3()},GameBoyAdvanceSound.prototype.writeSOUND1CNT8_3=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT8_3(0|t))},GameBoyAdvanceSound.prototype.writeSOUND1CNT16=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT8_2(0|t),this.channel1.writeSOUND1CNT8_3(t>>8))},GameBoyAdvanceSound.prototype.writeSOUND1CNT32=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT8_0(0|t),this.channel1.writeSOUND1CNT8_2(t>>16),this.channel1.writeSOUND1CNT8_3(t>>24))},GameBoyAdvanceSound.prototype.readSOUND1CNT32=function(){return this.channel1.readSOUND1CNT8_0()|this.channel1.readSOUND1CNT8_2()<<16|this.channel1.readSOUND1CNT8_3()<<24},GameBoyAdvanceSound.prototype.writeSOUND1CNTX8_0=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT_X0(0|t))},GameBoyAdvanceSound.prototype.readSOUND1CNTX8=function(){return 0|this.channel1.readSOUND1CNTX8()},GameBoyAdvanceSound.prototype.readSOUND1CNTX16=function(){return this.channel1.readSOUND1CNTX8()<<8},GameBoyAdvanceSound.prototype.writeSOUND1CNTX8_1=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT_X1(0|t))},GameBoyAdvanceSound.prototype.writeSOUND1CNTX16=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT_X0(0|t),this.channel1.writeSOUND1CNT_X1(t>>8))},GameBoyAdvanceSound.prototype.readSOUND2CNTL8_0=function(){return 0|this.channel2.readSOUND2CNT_L0()},GameBoyAdvanceSound.prototype.writeSOUND2CNTL8_0=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_L0(0|t))},GameBoyAdvanceSound.prototype.readSOUND2CNTL8_1=function(){return 0|this.channel2.readSOUND2CNT_L1()},GameBoyAdvanceSound.prototype.writeSOUND2CNTL8_1=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_L1(0|t))},GameBoyAdvanceSound.prototype.writeSOUND2CNTL16=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_L0(0|t),this.channel2.writeSOUND2CNT_L1(t>>8))},GameBoyAdvanceSound.prototype.writeSOUND2CNTH8_0=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_H0(0|t))},GameBoyAdvanceSound.prototype.readSOUND2CNTH8=function(){return 0|this.channel2.readSOUND2CNT_H()},GameBoyAdvanceSound.prototype.writeSOUND2CNTH8_1=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_H1(0|t))},GameBoyAdvanceSound.prototype.readSOUND2CNTL16=function(){var t=0|this.channel2.readSOUND2CNT_L0();return 0|(t|=this.channel2.readSOUND2CNT_L1()<<8)},GameBoyAdvanceSound.prototype.readSOUND2CNTH16=function(){return this.channel2.readSOUND2CNT_H()<<8},GameBoyAdvanceSound.prototype.writeSOUND2CNTH16=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_H0(0|t),this.channel2.writeSOUND2CNT_H1(t>>8))},GameBoyAdvanceSound.prototype.readSOUND3CNT8_0=function(){return 0|this.channel3.readSOUND3CNT_L()},GameBoyAdvanceSound.prototype.writeSOUND3CNT8_0=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_L(0|t))},GameBoyAdvanceSound.prototype.writeSOUND3CNT8_2=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_H0(0|t))},GameBoyAdvanceSound.prototype.readSOUND3CNT8_3=function(){return 0|this.channel3.readSOUND3CNT_H()},GameBoyAdvanceSound.prototype.writeSOUND3CNT8_3=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_H1(0|t))},GameBoyAdvanceSound.prototype.readSOUND3CNT16_1=function(){return this.channel3.readSOUND3CNT_H()<<8},GameBoyAdvanceSound.prototype.readSOUND3CNT32=function(){var t=0|this.channel3.readSOUND3CNT_L();return 0|(t|=this.channel3.readSOUND3CNT_H()<<24)},GameBoyAdvanceSound.prototype.writeSOUND3CNT16=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_H0(0|t),this.channel3.writeSOUND3CNT_H1(t>>8))},GameBoyAdvanceSound.prototype.writeSOUND3CNT32=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_L(0|t),this.channel3.writeSOUND3CNT_H0(t>>16),this.channel3.writeSOUND3CNT_H1(t>>24))},GameBoyAdvanceSound.prototype.writeSOUND3CNTX8_0=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_X0(0|t))},GameBoyAdvanceSound.prototype.readSOUND3CNTX8=function(){return 0|this.channel3.readSOUND3CNT_X()},GameBoyAdvanceSound.prototype.readSOUND3CNTX16=function(){return this.channel3.readSOUND3CNT_X()<<8},GameBoyAdvanceSound.prototype.writeSOUND3CNTX8_1=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_X1(0|t))},GameBoyAdvanceSound.prototype.writeSOUND3CNTX16=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_X0(0|t),this.channel3.writeSOUND3CNT_X1(t>>8))},GameBoyAdvanceSound.prototype.writeSOUND4CNTL8_0=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_L0(0|t))},GameBoyAdvanceSound.prototype.writeSOUND4CNTL8_1=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_L1(0|t))},GameBoyAdvanceSound.prototype.writeSOUND4CNTL16=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_L0(0|t),this.channel4.writeSOUND4CNT_L1(t>>8))},GameBoyAdvanceSound.prototype.readSOUND4CNTL8=function(){return 0|this.channel4.readSOUND4CNT_L()},GameBoyAdvanceSound.prototype.readSOUND4CNTL16=function(){return this.channel4.readSOUND4CNT_L()<<8},GameBoyAdvanceSound.prototype.writeSOUND4CNTH8_0=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_H0(0|t))},GameBoyAdvanceSound.prototype.readSOUND4CNTH8_0=function(){return 0|this.channel4.readSOUND4CNT_H0()},GameBoyAdvanceSound.prototype.writeSOUND4CNTH8_1=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_H1(0|t))},GameBoyAdvanceSound.prototype.writeSOUND4CNTH16=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_H0(0|t),this.channel4.writeSOUND4CNT_H1(t>>8))},GameBoyAdvanceSound.prototype.readSOUND4CNTH8_1=function(){return 0|this.channel4.readSOUND4CNT_H1()},GameBoyAdvanceSound.prototype.readSOUND4CNTH16=function(){var t=0|this.channel4.readSOUND4CNT_H0();return 0|(t|=this.channel4.readSOUND4CNT_H1()<<8)},GameBoyAdvanceSound.prototype.writeSOUNDCNTL8_0=function(t){t|=0,t&=255,this.soundMasterEnabled&&(0|this.nr50)!=(0|t)&&(this.audioPSGJIT(),this.nr50=0|t,this.VinLeftChannelMasterVolume=1+(t>>4&7)|0,this.VinRightChannelMasterVolume=1+(7&t)|0)},GameBoyAdvanceSound.prototype.readSOUNDCNTL8_0=function(){return 136|this.nr50},GameBoyAdvanceSound.prototype.writeSOUNDCNTL8_1=function(t){t|=0,t&=255,this.soundMasterEnabled&&(0|this.nr51)!=(0|t)&&(this.audioPSGJIT(),this.nr51=0|t,this.channel1.setChannelOutputEnable(0|t),this.channel2.setChannelOutputEnable(0|t),this.channel3.setChannelOutputEnable(0|t),this.channel4.setChannelOutputEnable(0|t))},GameBoyAdvanceSound.prototype.readSOUNDCNTL8_1=function(){return 0|this.nr51},GameBoyAdvanceSound.prototype.writeSOUNDCNTL16=function(t){t|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),(0|this.nr50)!=(255&t)&&(this.nr50=255&t,this.VinLeftChannelMasterVolume=1+(t>>4&7)|0,this.VinRightChannelMasterVolume=1+(7&t)|0),t=t>>8&255,(0|this.nr51)!=(0|t)&&(this.nr51=0|t,this.channel1.setChannelOutputEnable(0|t),this.channel2.setChannelOutputEnable(0|t),this.channel3.setChannelOutputEnable(0|t),this.channel4.setChannelOutputEnable(0|t)))},GameBoyAdvanceSound.prototype.readSOUNDCNTL16=function(){var t=136|this.nr50;return 0|(t|=this.nr51<<8)},GameBoyAdvanceSound.prototype.writeSOUNDCNTH8_0=function(t){t|=0,this.audioPSGJIT(),this.CGBOutputRatio=3&t,this.AGBDirectSoundAShifter=(4&t)>>2,this.AGBDirectSoundBShifter=(8&t)>>3,this.nr60=255&t},GameBoyAdvanceSound.prototype.readSOUNDCNTH8_0=function(){return 0|this.nr60},GameBoyAdvanceSound.prototype.writeSOUNDCNTH8_1=function(t){t|=0,this.audioPSGJIT(),this.AGBDirectSoundARightCanPlay=0!=(1&t),this.AGBDirectSoundALeftCanPlay=0!=(2&t),this.AGBDirectSoundATimer=(4&t)>>2,0!=(8&t)&&this.AGBDirectSoundAFIFOClear(),this.AGBDirectSoundBRightCanPlay=0!=(16&t),this.AGBDirectSoundBLeftCanPlay=0!=(32&t),this.AGBDirectSoundBTimer=(64&t)>>6,0!=(128&t)&&this.AGBDirectSoundBFIFOClear(),this.nr61=255&t,this.IOCore.updateCoreClocking()},GameBoyAdvanceSound.prototype.readSOUNDCNTH8_1=function(){return 0|this.nr61},GameBoyAdvanceSound.prototype.writeSOUNDCNTH16=function(t){t|=0,this.audioPSGJIT(),this.CGBOutputRatio=3&t,this.AGBDirectSoundAShifter=(4&t)>>2,this.AGBDirectSoundBShifter=(8&t)>>3,this.nr60=255&t,t>>=8,this.AGBDirectSoundARightCanPlay=0!=(1&t),this.AGBDirectSoundALeftCanPlay=0!=(2&t),this.AGBDirectSoundATimer=(4&t)>>2,0!=(8&t)&&this.AGBDirectSoundAFIFOClear(),this.AGBDirectSoundBRightCanPlay=0!=(16&t),this.AGBDirectSoundBLeftCanPlay=0!=(32&t),this.AGBDirectSoundBTimer=(64&t)>>6,0!=(128&t)&&this.AGBDirectSoundBFIFOClear(),this.nr61=255&t,this.IOCore.updateCoreClocking()},GameBoyAdvanceSound.prototype.readSOUNDCNTH16=function(){var t=0|this.nr60;return 0|(t|=this.nr61<<8)},GameBoyAdvanceSound.prototype.writeSOUNDCNT32=function(t){if(t|=0,this.audioPSGJIT(),this.soundMasterEnabled){(0|this.nr50)!=(255&t)&&(this.nr50=255&t,this.VinLeftChannelMasterVolume=1+(t>>4&7)|0,this.VinRightChannelMasterVolume=1+(7&t)|0);var e=t>>8&255;(0|this.nr51)!=(0|e)&&(this.nr51=0|e,this.channel1.setChannelOutputEnable(0|e),this.channel2.setChannelOutputEnable(0|e),this.channel3.setChannelOutputEnable(0|e),this.channel4.setChannelOutputEnable(0|e))}t>>=16,this.CGBOutputRatio=3&t,this.AGBDirectSoundAShifter=(4&t)>>2,this.AGBDirectSoundBShifter=(8&t)>>3,this.nr60=255&t,t>>=8,this.AGBDirectSoundARightCanPlay=0!=(1&t),this.AGBDirectSoundALeftCanPlay=0!=(2&t),this.AGBDirectSoundATimer=(4&t)>>2,0!=(8&t)&&this.AGBDirectSoundAFIFOClear(),this.AGBDirectSoundBRightCanPlay=0!=(16&t),this.AGBDirectSoundBLeftCanPlay=0!=(32&t),this.AGBDirectSoundBTimer=(64&t)>>6,0!=(128&t)&&this.AGBDirectSoundBFIFOClear(),this.nr61=255&t,this.IOCore.updateCoreClocking()},GameBoyAdvanceSound.prototype.readSOUNDCNT32=function(){var t=136|this.nr50;return t|=this.nr51<<8,t|=this.nr60<<16,0|(t|=this.nr61<<24)},GameBoyAdvanceSound.prototype.writeSOUNDCNTX8=function(t){t|=0,this.soundMasterEnabled||0==(128&t)?this.soundMasterEnabled&&0==(128&t)&&(this.audioPSGJIT(),this.audioDisabled(),this.IOCore.updateCoreClocking()):(this.audioPSGJIT(),this.audioEnabled(),this.IOCore.updateCoreClocking())},GameBoyAdvanceSound.prototype.readSOUNDCNTX8=function(){return this.audioPSGJIT(),0|this.nr52},GameBoyAdvanceSound.prototype.writeSOUNDBIAS8_0=function(t){t|=0,this.audioPSGJIT(),this.mixerSoundBIAS=768&this.mixerSoundBIAS,this.mixerSoundBIAS=this.mixerSoundBIAS|255&t,this.nr62=255&t},GameBoyAdvanceSound.prototype.readSOUNDBIAS8_0=function(){return 0|this.nr62},GameBoyAdvanceSound.prototype.writeSOUNDBIAS8_1=function(t){t|=0,this.audioPSGJIT(),this.mixerSoundBIAS=255&this.mixerSoundBIAS,this.mixerSoundBIAS=this.mixerSoundBIAS|(3&t)<<8,this.PWMWidthShadow=512>>((192&t)>>6),this.PWMBitDepthMaskShadow=(0|this.PWMWidthShadow)-1<<1+((192&t)>>6),this.nr63=255&t},GameBoyAdvanceSound.prototype.writeSOUNDBIAS16=function(t){t|=0,this.audioPSGJIT(),this.mixerSoundBIAS=1023&t,this.nr62=255&t,this.PWMWidthShadow=512>>((49152&t)>>14),this.PWMBitDepthMaskShadow=(0|this.PWMWidthShadow)-1<<1+((49152&t)>>14),this.nr63=t>>8&255},GameBoyAdvanceSound.prototype.readSOUNDBIAS8_1=function(){return 0|this.nr63},GameBoyAdvanceSound.prototype.readSOUNDBIAS16=function(){var t=0|this.nr62;return 0|(t|=this.nr63<<8)};
//# sourceMappingURL=build-index.f5d37839.js.map
