"use strict";function GameBoyAdvanceChannel3Synth(t){this.sound=t,this.currentSampleLeft=0,this.currentSampleRight=0,this.lastSampleLookup=0,this.canPlay=!1,this.WAVERAMBankSpecified=0,this.WAVERAMBankAccessed=32,this.WaveRAMBankSize=31,this.totalLength=256,this.patternType=4,this.frequency=0,this.FrequencyPeriod=16384,this.consecutive=!0,this.Enabled=0,this.leftEnable=0,this.rightEnable=0,this.nr30=0,this.nr31=0,this.nr32=0,this.nr33=0,this.nr34=0,this.cachedSample=0,this.PCM=getInt8Array(64),this.PCM16=getUint16View(this.PCM),this.PCM32=getInt32View(this.PCM),this.WAVERAM8=getUint8Array(32),this.WAVERAM16=getUint16View(this.WAVERAM8),this.WAVERAM32=getInt32View(this.WAVERAM8)}GameBoyAdvanceChannel3Synth.prototype.disabled=function(){this.nr30=0,this.lastSampleLookup=0,this.canPlay=!1,this.WAVERAMBankSpecified=0,this.WAVERAMBankAccessed=32,this.WaveRAMBankSize=31,this.totalLength=256,this.nr32=0,this.patternType=4,this.nr33=0,this.frequency=0,this.FrequencyPeriod=16384,this.nr34=0,this.consecutive=!0,this.Enabled=0,this.counter=0},"function"==typeof Math.imul?GameBoyAdvanceChannel3Synth.prototype.updateCache=function(){3!=(0|this.patternType)?this.cachedSample=this.PCM[0|this.lastSampleLookup]>>(0|this.patternType):this.cachedSample=Math.imul(0|this.PCM[0|this.lastSampleLookup],3)>>2,this.outputLevelCache()}:GameBoyAdvanceChannel3Synth.prototype.updateCache=function(){3!=(0|this.patternType)?this.cachedSample=this.PCM[0|this.lastSampleLookup]>>(0|this.patternType):this.cachedSample=.75*this.PCM[0|this.lastSampleLookup]|0,this.outputLevelCache()},GameBoyAdvanceChannel3Synth.prototype.outputLevelCache=function(){var t=this.cachedSample&this.Enabled;this.currentSampleLeft=this.leftEnable&t,this.currentSampleRight=this.rightEnable&t},GameBoyAdvanceChannel3Synth.prototype.setChannelOutputEnable=function(t){t|=0,this.rightEnable=t<<29>>31,this.leftEnable=t<<25>>31},GameBoyAdvanceChannel3Synth.prototype.readWAVE8=function(t){return t=(0|t)+(this.WAVERAMBankAccessed>>1)|0,0|this.WAVERAM8[0|t]},__LITTLE_ENDIAN__?(GameBoyAdvanceChannel3Synth.prototype.writeWAVE8=function(t,e){e|=0,t=(0|(t|=0))+(this.WAVERAMBankAccessed>>1)|0,this.WAVERAM8[0|t]=255&e;var n=e>>4&15;n|=(15&e)<<8,this.PCM16[0|t]=0|n},GameBoyAdvanceChannel3Synth.prototype.writeWAVE16=function(t,e){e|=0,t=(0|(t|=0))+(this.WAVERAMBankAccessed>>2)|0,this.WAVERAM16[0|t]=65535&e;var n=e>>4&15;n|=(15&e)<<8,n|=(61440&e)<<4,n|=(3840&e)<<16,this.PCM32[0|t]=0|n},GameBoyAdvanceChannel3Synth.prototype.writeWAVE32=function(t,e){e|=0,t=(0|(t|=0))+(this.WAVERAMBankAccessed>>3)|0,this.WAVERAM32[0|t]=0|e;var n=e>>4&15;n|=(15&e)<<8,n|=(61440&e)<<4,n|=(3840&e)<<16,t<<=1,this.PCM32[0|t]=0|n,n=e>>20&15,n|=e>>8&3840,n|=e>>12&983040,n|=251658240&e,this.PCM32[1|t]=0|n},GameBoyAdvanceChannel3Synth.prototype.readWAVE16=function(t){return t=(0|t)+(this.WAVERAMBankAccessed>>2)|0,0|this.WAVERAM16[0|t]},GameBoyAdvanceChannel3Synth.prototype.readWAVE32=function(t){return t=(0|t)+(this.WAVERAMBankAccessed>>3)|0,0|this.WAVERAM32[0|t]}):(GameBoyAdvanceChannel3Synth.prototype.writeWAVE8=function(t,e){t+=this.WAVERAMBankAccessed>>1,this.WAVERAM8[t]=255&e,t<<=1,this.PCM[t]=e>>4&15,this.PCM[1|t]=15&e},GameBoyAdvanceChannel3Synth.prototype.writeWAVE16=function(t,e){t+=this.WAVERAMBankAccessed>>2,t<<=1,this.WAVERAM8[t]=255&e,this.WAVERAM8[1|t]=e>>8&255,t<<=1,this.PCM[t]=e>>4&15,this.PCM[1|t]=15&e,this.PCM[2|t]=e>>12&15,this.PCM[3|t]=e>>8&15},GameBoyAdvanceChannel3Synth.prototype.writeWAVE32=function(t,e){t+=this.WAVERAMBankAccessed>>3,t<<=2,this.WAVERAM8[t]=255&e,this.WAVERAM8[1|t]=e>>8&255,this.WAVERAM8[2|t]=e>>16&255,this.WAVERAM8[3|t]=e>>>24,t<<=1,this.PCM[t]=e>>4&15,this.PCM[1|t]=15&e,this.PCM[2|t]=e>>12&15,this.PCM[3|t]=e>>8&15,this.PCM[4|t]=e>>20&15,this.PCM[5|t]=e>>16&15,this.PCM[6|t]=e>>>28,this.PCM[7|t]=e>>24&15},GameBoyAdvanceChannel3Synth.prototype.readWAVE16=function(t){return t+=this.WAVERAMBankAccessed>>1,this.WAVERAM8[t]|this.WAVERAM8[1|t]<<8},GameBoyAdvanceChannel3Synth.prototype.readWAVE32=function(t){return t+=this.WAVERAMBankAccessed>>1,this.WAVERAM8[t]|this.WAVERAM8[1|t]<<8|this.WAVERAM8[2|t]<<16|this.WAVERAM8[3|t]<<24}),GameBoyAdvanceChannel3Synth.prototype.enableCheck=function(){this.consecutive||(0|this.totalLength)>0?this.Enabled=15:this.Enabled=0},GameBoyAdvanceChannel3Synth.prototype.clockAudioLength=function(){(0|this.totalLength)>1?this.totalLength=(0|this.totalLength)-1|0:1==(0|this.totalLength)&&(this.totalLength=0,this.enableCheck(),this.sound.unsetNR52(251))},GameBoyAdvanceChannel3Synth.prototype.computeAudioChannel=function(){0==(0|this.counter)&&(this.canPlay&&(this.lastSampleLookup=1+(0|this.lastSampleLookup)&this.WaveRAMBankSize|this.WAVERAMBankSpecified),this.counter=0|this.FrequencyPeriod)},GameBoyAdvanceChannel3Synth.prototype.readSOUND3CNT_L=function(){return 0|this.nr30},GameBoyAdvanceChannel3Synth.prototype.writeSOUND3CNT_L=function(t){t|=0,this.canPlay||0==(128&t)||(this.lastSampleLookup=0),this.canPlay=0!=(128&t),this.WaveRAMBankSize=32&t|31,this.WAVERAMBankSpecified=(64&t)>>1^32&t,this.WAVERAMBankAccessed=(64&t)>>1^32,this.canPlay&&0!=(128&this.nr30)&&!this.consecutive&&this.sound.setNR52(4),this.nr30=255&t},GameBoyAdvanceChannel3Synth.prototype.writeSOUND3CNT_H0=function(t){t|=0,this.totalLength=256-(255&t)|0,this.enableCheck()},GameBoyAdvanceChannel3Synth.prototype.readSOUND3CNT_H=function(){return 0|this.nr32},GameBoyAdvanceChannel3Synth.prototype.writeSOUND3CNT_H1=function(t){switch(t|=0,(t&=255)>>5){case 0:this.patternType=4;break;case 1:this.patternType=0;break;case 2:this.patternType=1;break;case 3:this.patternType=2;break;default:this.patternType=3}this.nr32=0|t},GameBoyAdvanceChannel3Synth.prototype.writeSOUND3CNT_X0=function(t){t|=0,this.frequency=1792&this.frequency|255&t,this.FrequencyPeriod=2048-(0|this.frequency)<<3},GameBoyAdvanceChannel3Synth.prototype.readSOUND3CNT_X=function(){return 0|this.nr34},GameBoyAdvanceChannel3Synth.prototype.writeSOUND3CNT_X1=function(t){0!=(128&(t|=0))&&(0==(0|this.totalLength)&&(this.totalLength=256),this.lastSampleLookup=0,0!=(64&t)&&this.sound.setNR52(4)),this.consecutive=0==(64&t),this.frequency=(7&t)<<8|255&this.frequency,this.FrequencyPeriod=2048-(0|this.frequency)<<3,this.enableCheck(),this.nr34=255&t};
//# sourceMappingURL=build-index.64ea1569.js.map
