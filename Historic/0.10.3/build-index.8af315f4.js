var isWarping=!1,switchingGameState=0,randomWarpsEnabled=!0;const FIRE_RED_LAST_BANK=33758644,FIRE_RED_CURRENT_BANK=33758652,FIRE_RED_CURRENT_MAP=33758653,FIRE_RED_CURRENT_WARP=33758654,EMERALD_LAST_BANK=33759964,EMERALD_CURRENT_BANK=33759972,EMERALD_CURRENT_MAP=33759973,EMERALD_CURRENT_WARP=33759974,EMERALD_MAP_TYPE=33780527,FIRE_RED_MAP_TYPE=33779219,EMERALD_gMapHeader=33780504,FIRE_RED_gMapHeader=33779196;var flagManager,isInSafari=!1,volumeBeforeWarp=null,originalBeforeWarpId=null;function getDesitnation(){if("FR"===IodineGUI.Iodine.IOCore.cartridge.romCode){return"FR,"+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33758652)+","+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33758653)+","+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33758654)}if("E"===IodineGUI.Iodine.IOCore.cartridge.romCode){let e=IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759972),t=IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759973),i=IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759974);return destination="E,"+e+","+t+","+i}if("C"===IodineGUI.Iodine.IOCore.cartridge.romCode){let e=IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759972),t=IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759973),i=IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759974);return destination="C,"+e+","+t+","+i}return null}function fixPlayerPositionInWarp(){let e=warpsNeedingPositionForces.get(getDesitnation())||null,t=escalatorTriggers.has(originalBeforeWarpId);if(null==e&&!t)return;let i=null,r=null;if("FR"===IodineGUI.Iodine.IOCore.cartridge.romCode){let e=IodineGUI.Iodine.IOCore.cpu.read32(FIRE_RED_SAVE_1_PTR);i=e,r=e+2}else{let e=IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_1_PTR);i=e,r=e+2}let a=null,o=null;null!=e?(a=e[0],o=e[1]):(a=IodineGUI.Iodine.IOCore.cpu.read16(i),o=IodineGUI.Iodine.IOCore.cpu.read16(r)),t&&(a-=1),IodineGUI.Iodine.IOCore.cpu.write16(i,a),IodineGUI.Iodine.IOCore.cpu.write16(r,o),originalBeforeWarpId=null}GameBoyAdvanceCPU.prototype.write32WithoutIntercept=GameBoyAdvanceCPU.prototype.write32,GameBoyAdvanceCPU.prototype.write32=function(e,t){if(0!=switchingGameState){if(1==switchingGameState&&(33758644==e&&"FR"===IodineGUI.Iodine.IOCore.cartridge.romCode||33759964==e&&("E"===IodineGUI.Iodine.IOCore.cartridge.romCode||"C"===IodineGUI.Iodine.IOCore.cartridge.romCode))){IodineGUI.Iodine.pause();let e=IodineGUI.Iodine.IOCore.cartridge.romCode,t=readWRAMSlice("E"==e||"C"==e?EMERALD_PARTY_OFFSET:FIRE_RED_PARTY_OFFSET,PLAYER_PARTY_LENGTH),i=dynamicMemorySlice("E"==e||"C"==e?EMERALD_SAVE_2_PTR:FIRE_RED_SAVE_2_PTR,NAME_STATE_OFFSET,NAME_STATE_LENGTH),r=dynamicMemorySlice("E"==e||"C"==e?EMERALD_SAVE_2_PTR:FIRE_RED_SAVE_2_PTR,ID_TIME_OFFSET,ID_TIME_LENGTH),a=dynamicMemorySlice("E"==e||"C"==e?EMERALD_SAVE_3_PTR:FIRE_RED_SAVE_3_PTR,4,BOX_LENGTH),o=new BagStoreage;o.readData(e),(flagManager=new FlagManager(o.hasBike(),o.hasFlute())).readFlags(e),IodineGUI.Iodine.saveStateManager.loadState(gameSwitchingWarp.toRomCode),"E"==gameSwitchingWarp.toRomCode||"C"==gameSwitchingWarp.toRomCode?(originalBeforeWarpId=getDesitnation(),this.write8(33759972,gameSwitchingWarp.toBank),this.write8(33759973,gameSwitchingWarp.toMap),this.write8(33759974,gameSwitchingWarp.toWarpNo)):(originalBeforeWarpId=getDesitnation(),this.write8(33758652,gameSwitchingWarp.toBank),this.write8(33758653,gameSwitchingWarp.toMap),this.write8(33758654,gameSwitchingWarp.toWarpNo));let s=IodineGUI.Iodine.IOCore.cartridge.romCode;return spliceWRAM("E"==s||"C"==s?EMERALD_PARTY_OFFSET:FIRE_RED_PARTY_OFFSET,PLAYER_PARTY_LENGTH,t),dynamicMemorySplice("E"==s||"C"==s?EMERALD_SAVE_2_PTR:FIRE_RED_SAVE_2_PTR,NAME_STATE_OFFSET,NAME_STATE_LENGTH,i),dynamicMemorySplice("E"==s||"C"==s?EMERALD_SAVE_2_PTR:FIRE_RED_SAVE_2_PTR,ID_TIME_OFFSET,ID_TIME_LENGTH,r),dynamicMemorySplice("E"==s||"C"==s?EMERALD_SAVE_3_PTR:FIRE_RED_SAVE_3_PTR,4,BOX_LENGTH,a),o.writeData(s,e,!0),flagManager.writeFlags(s,e,!0),IodineGUI.mixerInput.volume=0,switchingGameState=2,document.getElementById("emulator_target").classList.add("faded"),void IodineGUI.Iodine.play()}if(2==switchingGameState&&(33758644==e&&"FR"===IodineGUI.Iodine.IOCore.cartridge.romCode||33759964==e&&("E"===IodineGUI.Iodine.IOCore.cartridge.romCode||"C"===IodineGUI.Iodine.IOCore.cartridge.romCode))&&(switchingGameState=3,isWarping=!1,gameSwitchingWarp=null),3!=switchingGameState&&4!=switchingGameState||33779196!=e||"FR"!==IodineGUI.Iodine.IOCore.cartridge.romCode){if(!(3!=switchingGameState&&4!=switchingGameState||33780504!=e||"E"!==IodineGUI.Iodine.IOCore.cartridge.romCode&&"C"!==IodineGUI.Iodine.IOCore.cartridge.romCode))if(4==switchingGameState){fixPlayerPositionInWarp(),switchingGameState=0,IodineGUI.mixerInput.volume=volumeBeforeWarp,document.getElementById("emulator_target").classList.remove("faded")}else switchingGameState=4}else if(4==switchingGameState){fixPlayerPositionInWarp(),switchingGameState=0,IodineGUI.mixerInput.volume=volumeBeforeWarp,document.getElementById("emulator_target").classList.remove("faded")}else switchingGameState=4}33758644==e&&"FR"===IodineGUI.Iodine.IOCore.cartridge.romCode?(isInSafari=(new FlagManager).getFlag(IodineGUI.Iodine.IOCore.cpu.read32(FIRE_RED_SAVE_1_PTR),FIRE_RED_SYS_FLAGS_OFFSET,0),specialPostWarpHandling()):33759964==e&&"E"===IodineGUI.Iodine.IOCore.cartridge.romCode?(isInSafari=(new FlagManager).getFlag(IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_1_PTR),EMERALD_SYS_FLAGS_OFFSET,44),specialPostWarpHandling()):33759964==e&&"C"===IodineGUI.Iodine.IOCore.cartridge.romCode&&specialPostWarpHandling(),this.write32WithoutIntercept(e,t)};var warpsNeedingPositionForces=new Map;warpsNeedingPositionForces.set("E,0,1,5",[30,27]),warpsNeedingPositionForces.set("E,0,5,0",[27,7]),warpsNeedingPositionForces.set("E,0,2,0",[8,6]),warpsNeedingPositionForces.set("E,0,7,5",[45,7]),warpsNeedingPositionForces.set("E,0,7,9",[53,29]),warpsNeedingPositionForces.set("E,0,7,4",[9,7]),warpsNeedingPositionForces.set("E,0,8,2",[18,42]),warpsNeedingPositionForces.set("E,0,11,3",[17,14]),warpsNeedingPositionForces.set("E,0,12,5",[9,2]),warpsNeedingPositionForces.set("E,0,14,4",[8,2]),warpsNeedingPositionForces.set("E,0,15,0",[8,16]),warpsNeedingPositionForces.set("E,0,26,0",[13,114]),warpsNeedingPositionForces.set("E,11,0,2",[14,2]),warpsNeedingPositionForces.set("E,14,9,2",[13,2]),warpsNeedingPositionForces.set("E,14,10,2",[13,2]),warpsNeedingPositionForces.set("E,16,10,2",[9,2]),warpsNeedingPositionForces.set("E,24,8,2",[29,13]),warpsNeedingPositionForces.set("E,24,8,3",[28,21]),warpsNeedingPositionForces.set("E,24,9,0",[29,13]),warpsNeedingPositionForces.set("E,24,9,1",[28,21]),warpsNeedingPositionForces.set("E,24,13,4",[16,19]),warpsNeedingPositionForces.set("E,24,16,4",[11,9]),warpsNeedingPositionForces.set("E,24,16,2",[10,12]),warpsNeedingPositionForces.set("E,24,17,5",[6,12]),warpsNeedingPositionForces.set("E,24,17,4",[10,12]),warpsNeedingPositionForces.set("E,24,18,2",[12,10]),warpsNeedingPositionForces.set("E,24,18,3",[12,12]),warpsNeedingPositionForces.set("E,24,19,3",[12,10]),warpsNeedingPositionForces.set("E,24,19,4",[12,12]),warpsNeedingPositionForces.set("E,24,24,10",[32,19]),warpsNeedingPositionForces.set("E,24,25,5",[5,8]),warpsNeedingPositionForces.set("E,24,25,9",[32,20]),warpsNeedingPositionForces.set("E,24,29,2",[6,1]),warpsNeedingPositionForces.set("E,24,78,0",[17,13]),warpsNeedingPositionForces.set("E,24,81,0",[3,1]),warpsNeedingPositionForces.set("E,24,82,1",[7,1]),warpsNeedingPositionForces.set("E,24,95,0",[18,12]),warpsNeedingPositionForces.set("E,24,96,0",[18,12]),warpsNeedingPositionForces.set("E,26,74,1",[5,5]),warpsNeedingPositionForces.set("E,26,87,0",[14,19]),warpsNeedingPositionForces.set("E,0,10,5",[10,9]),warpsNeedingPositionForces.set("E,16,0,1",[6,3]),warpsNeedingPositionForces.set("E,16,1,1",[6,3]),warpsNeedingPositionForces.set("E,16,2,1",[6,3]),warpsNeedingPositionForces.set("E,16,3,1",[6,3]),warpsNeedingPositionForces.set("FR,3,3,7",[1,13]),warpsNeedingPositionForces.set("FR,3,10,3",[46,13]),warpsNeedingPositionForces.set("FR,3,10,1",[22,15]),warpsNeedingPositionForces.set("FR,3,10,4",[27,22]),warpsNeedingPositionForces.set("C,0,11,2",[17,18]),warpsNeedingPositionForces.set("C,0,11,6",[37,10]),warpsNeedingPositionForces.set("C,0,13,1",[7,14]),warpsNeedingPositionForces.set("C,0,5,7",[22,4]),warpsNeedingPositionForces.set("C,0,5,1",[21,15]);var escalatorTriggers=new Set;escalatorTriggers.add("E,8,5,0"),escalatorTriggers.add("E,9,12,0"),escalatorTriggers.add("E,10,6,0"),escalatorTriggers.add("E,11,6,0"),escalatorTriggers.add("E,12,3,0"),escalatorTriggers.add("E,13,7,0"),escalatorTriggers.add("E,14,4,0"),escalatorTriggers.add("E,15,3,0"),escalatorTriggers.add("E,16,13,0"),escalatorTriggers.add("E,16,14,0"),escalatorTriggers.add("E,2,3,0"),escalatorTriggers.add("E,3,2,0"),escalatorTriggers.add("E,4,6,0"),escalatorTriggers.add("E,5,5,0"),escalatorTriggers.add("E,6,5,0"),escalatorTriggers.add("E,7,1,0"),escalatorTriggers.add("FR,5,5,0"),escalatorTriggers.add("FR,6,6,0"),escalatorTriggers.add("FR,7,4,0"),escalatorTriggers.add("FR,8,1,0"),escalatorTriggers.add("FR,10,13,0"),escalatorTriggers.add("FR,11,6,0"),escalatorTriggers.add("FR,12,6,0"),escalatorTriggers.add("FR,13,1,0"),escalatorTriggers.add("FR,16,1,0"),escalatorTriggers.add("FR,21,1,0"),escalatorTriggers.add("C,8,5,0"),escalatorTriggers.add("C,24,94,0"),escalatorTriggers.add("C,3,2,0"),escalatorTriggers.add("C,11,6,0"),escalatorTriggers.add("C,9,12,0"),escalatorTriggers.add("C,10,6,0"),escalatorTriggers.add("C,4,6,0"),escalatorTriggers.add("C,5,5,0"),escalatorTriggers.add("C,13,7,0"),escalatorTriggers.add("C,16,14,0"),GameBoyAdvanceCPU.prototype.write8WithoutIntercept=GameBoyAdvanceCPU.prototype.write8,GameBoyAdvanceCPU.prototype.write8=function(e,t){33758654==e&&"FR"===IodineGUI.Iodine.IOCore.cartridge.romCode?isWarping=randomWarpsEnabled||forceNextWarp:33759974!=e||"E"!==IodineGUI.Iodine.IOCore.cartridge.romCode&&"C"!==IodineGUI.Iodine.IOCore.cartridge.romCode||(isWarping=randomWarpsEnabled||forceNextWarp),this.write8WithoutIntercept(e,t)};const EMERALD_MOVEMENT_MODE_OFFSET=33781136,FIRE_RED_MOVEMENT_MODE_OFFSET=33779832,MOVEMENT_MODE_WALK=1,MOVEMENT_MODE_BIKE=2,MOVEMENT_MODE_SURF=8;var autoBike=!1,teleportAnywhere=!1;GameBoyAdvanceCPU.prototype.read8WithoutIntercept=GameBoyAdvanceCPU.prototype.read8,GameBoyAdvanceCPU.prototype.read8=function(e){if(autoBike){if(33779832==e&&"FR"===IodineGUI.Iodine.IOCore.cartridge.romCode){let t=this.read8WithoutIntercept(e);return t<=1?2:t}if(33781136==e){let t=this.read8WithoutIntercept(e);return t<=1?2:t}}if(teleportAnywhere){if(33779219==e&&"FR"===IodineGUI.Iodine.IOCore.cartridge.romCode)return 2;if(33780527==e)return 2}return isWarping?(33758652==e&&"FR"===IodineGUI.Iodine.IOCore.cartridge.romCode?e=this.handleWarpRedirection(e,IodineGUI.Iodine.IOCore.cartridge.romCode):33759972!=e||"E"!==IodineGUI.Iodine.IOCore.cartridge.romCode&&"C"!==IodineGUI.Iodine.IOCore.cartridge.romCode||(e=this.handleWarpRedirection(e,IodineGUI.Iodine.IOCore.cartridge.romCode)),this.read8WithoutIntercept(e)):this.read8WithoutIntercept(e)};var gameSwitchingWarp=null,reverseNextWarp=!1,forceNextWarp=null;function specialPreWarpHandling(e){return e}function specialDuringWarpHandling(e){let t=e.toRomCode+","+e.toBank+","+e.toMap+","+e.toWarpNo;if("E"==e.toRomCode){if("E,8,1,0"==t){writeGameVar("E",16517,readGameVar("E",16471)<1?0:6),writeGameVar("E",16471,1)}"E,10,0,0"==t&&(new FlagManager).setFlag(IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_1_PTR),4720,913,0),"E,29,1,0"==t||"E,29,1,1"==t?readGameVar("E",16452)>7&&writeGameVar("E",16452,7):"E,14,7,0"==t&&0==readGameVar("E",16582)&&(writeGameVar("E",16582,1),modifyBaseFlag("E",967,0))}}function specialPostWarpHandling(){if("E"===IodineGUI.Iodine.IOCore.cartridge.romCode){let e="E,"+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759972)+","+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759973)+","+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759974);"E,24,33,2"==e?forceStateAfterDelay(8,1e3):"E,0,4,1"==e||"E,0,4,4"==e||"E,0,4,5"==e||"E,0,4,6"==e||"E,0,4,7"==e||"E,0,4,8"==e||"E,0,15,0"==e||"E,0,15,1"==e||"E,0,15,2"==e||"E,0,15,3"==e||"E,0,15,4"==e||"E,0,15,"==e?(document.getElementById("autoBike").checked&&(M.toast({html:"Auto Bike Off",displayLength:1e3}),document.getElementById("autoBike").click()),forceStateAfterDelay(1,1e3)):"E,16,0,0"==e?writeGameVar("E",16540,0):"E,16,0,1"==e||"E,16,1,0"==e?writeGameVar("E",16540,1):"E,16,1,1"==e||"E,16,2,0"==e?writeGameVar("E",16540,2):"E,16,2,1"==e||"E,16,3,0"==e?writeGameVar("E",16540,3):"E,16,3,1"==e&&writeGameVar("E",16540,4)}if("C"===IodineGUI.Iodine.IOCore.cartridge.romCode){let e="C,"+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759972)+","+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759973)+","+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33759974);"C,16,0,0"==e||"C,16,0,1"==e?writeGameVar("C",16540,1):"C,16,1,0"==e||"C,16,1,1"==e?writeGameVar("C",16540,2):"C,16,2,0"==e||"C,16,2,1"==e?writeGameVar("C",16540,3):("C,16,3,0"==e||"C,16,3,1"==e)&&writeGameVar("C",16540,4)}if("FR"===IodineGUI.Iodine.IOCore.cartridge.romCode){let e="FR,"+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33758652)+","+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33758653)+","+IodineGUI.Iodine.IOCore.cpu.read8WithoutIntercept(33758654);"FR,1,86,6"==e||"FR,1,86,5"==e||"FR,1,87,2"==e||"FR,1,87,3"==e?forceStateAfterDelay(8,3800):"FR,1,75,0"==e?writeGameVar("FR",16488,0):"FR,1,75,1"==e||"FR,1,76,0"==e?writeGameVar("FR",16488,1):"FR,1,76,1"==e||"FR,1,77,0"==e?writeGameVar("FR",16488,2):"FR,1,77,1"==e||"FR,1,78,0"==e?writeGameVar("FR",16488,3):("FR,1,78,1"==e||"FR,1,79,0"==e)&&writeGameVar("FR",16488,4)}}async function forceStateAfterDelay(e,t){await delay(t/IodineGUI.Iodine.getSpeed()),forcePlayerState(e)}async function quickSpeedUp(e){let t=IodineGUI.Iodine.getSpeed();IodineGUI.Iodine.setSpeed(4);let i=IodineGUI.mixerInput.volume;IodineGUI.mixerInput.volume=0,await delay(e),IodineGUI.Iodine.setSpeed(t),IodineGUI.mixerInput.volume=i}function quickHideScreen(){let e=document.getElementById("emulator_target");e.classList.remove("quick-hide"),e.offsetWidth,e.classList.add("quick-hide")}function readWRAMSlice(e,t){let i=e-33554432,r=i+t;return IodineGUI.Iodine.IOCore.memory.externalRAM.slice(i,r)}function spliceWRAM(e,t,i){let r=e-33554432;for(let e=0;e<t;e++)IodineGUI.Iodine.IOCore.memory.externalRAM[r+e]=i[e]}GameBoyAdvanceCPU.prototype.handleWarpRedirection=function(e,t){let i=this.read8WithoutIntercept(e),r=this.read8WithoutIntercept(e+1),a=this.read8WithoutIntercept(e+2),o=this.handelHomeWarp(t,i,r,a);if(255==a&&!o)return t+","+i+","+r+","+a=="E,8,1,255"&&(writeGameVar("E",16517,6),modifyBaseFlag("E",726,1),modifyBaseFlag("E",866,1)),originalBeforeWarpId=null,e;if(2==switchingGameState||1==switchingGameState)return e;volumeBeforeWarp=IodineGUI.mixerInput.volume;let s=null,E=t+","+i+","+r+","+a;if(forceNextWarp){let e=forceNextWarp.split(",");s=new PKWarp(E,e[0],e[1],e[2],e[3],forceNextWarp),reverseNextWarp=!1,forceNextWarp=null,originalBeforeWarpId=null}else if(reverseNextWarp&&warpList.get(E)){let e=warpList.get(E).source,t=e.split(",");s=new PKWarp(E,t[0],t[1],t[2],t[3],e),reverseNextWarp=!1}else s=warpList.get(E),console.log("Warping triggered for "+E);return s?(s=specialPreWarpHandling(s),IodineGUI.Iodine.pause(),IodineGUI.Iodine.saveStateManager.saveState(t,!0),s.toRomCode[0]!=s.trigger[0]?(switchingGameState=1,gameSwitchingWarp=s,e="E"==s.toRomCode||"C"==s.toRomCode?33759972:33758652):("E"==s.toRomCode||"C"==s.toRomCode?(originalBeforeWarpId=getDesitnation(),this.write8(33759972,s.toBank),this.write8(33759973,s.toMap),this.write8(33759974,s.toWarpNo),e=33759972):(originalBeforeWarpId=getDesitnation(),this.write8(33758652,s.toBank),this.write8(33758653,s.toMap),this.write8(33758654,s.toWarpNo),e=33758652),switchingGameState=3),specialDuringWarpHandling(s),IodineGUI.Iodine.play(),console.log("Warping sending to "+s.toRomCode+","+s.toBank+","+s.toMap+","+s.toWarpNo)):console.log("Warping sending to vanilla"),isWarping=!1,e},GameBoyAdvanceCPU.prototype.handelHomeWarp=function(e,t,i,r){if("FR"==e&&11==t&&0==i&&255==r){if(!isInSafari)return forceNextWarp=forceNextWarp||"FR,4,1,0",writeGameVar("FR",16494,0),!0}else if("E"==e&&23==t&&0==i&&255==r){if(!isInSafari)return forceNextWarp=forceNextWarp||"E,1,3,0",writeGameVar("E",16548,0),!0}else if("C"==e&&23==t&&0==i&&255==r)return forceNextWarp=forceNextWarp||"C,1,1,0",!0;return!1};var walkThroughWalls=!1,runIndoors=!0,frWallsOffset=364078,frRunIndoorsOffset=775316;GameBoyAdvanceMultiCartridge.prototype.initializeWithoutIntercept=GameBoyAdvanceMultiCartridge.prototype.initialize,GameBoyAdvanceMultiCartridge.prototype.initialize=function(e){this.initializeWithoutIntercept(e),this.cartriges.get("FR")&&this.cartriges.get("FR").ROM[188]&&(frWallsOffset=364098,frRunIndoorsOffset=775336)},GameBoyAdvanceMultiCartridge.prototype.readROM16WithoutIntercept=GameBoyAdvanceMultiCartridge.prototype.readROM16,GameBoyAdvanceMultiCartridge.prototype.readROM16=function(e){if(!walkThroughWalls&&!runIndoors)return this.readROM16WithoutIntercept(e);if(walkThroughWalls){if(e==frWallsOffset&&"FR"==this.romCode)return 8448;if(601094==e&&"C"==this.romCode)return 8192;if(601094==e&&"E"==this.romCode)return 8192}if(runIndoors){if(e==frRunIndoorsOffset&&"FR"==this.romCode)return 0;if(1155560==e&&"C"==this.romCode)return 0;if(1155560==e&&"E"==this.romCode)return 0}return this.readROM16WithoutIntercept(e)};var currentlySaving=!1;async function saveAfterDelay(){currentlySaving=!0,await delay(3e3),syncSaveStateSaves()}GameBoyAdvanceMultiCartridge.prototype.readROM8WithoutIntercept=GameBoyAdvanceMultiCartridge.prototype.readROM8,GameBoyAdvanceMultiCartridge.prototype.readROM8=function(e){return currentlySaving&&(this.cartriges.get("FR")&&this.cartriges.get("FR").ROM[188]&&(1857210==e||4305130==e||4306233==e||4284728==e)?syncSaveStateSaves():!this.cartriges.get("FR")||1857098!=e&&4305018!=e&&4306121!=e&&4284728!=e?2681225==e||2918453==e||6214600==e?syncSaveStateSaves():6196244==e&&saveAfterDelay():syncSaveStateSaves()),this.readROM8WithoutIntercept(e)};const FIRE_RED_CURRENT_GROUND_OFFSET=33779267,EMERALD_CURRENT_GROUND_OFFSET=33780571,CURRENT_GROUND_LAND=51,CURRENT_GROUND_WATER=17,CURRENT_GROUND_LADDER=48,CURRENT_GROUND_ELEVATED=68,EMERALD_STATE_OFFSET=33781137,FIRE_RED_STATE_OFFSET=33779833;function forcePlayerState(e){IodineGUI.Iodine.IOCore&&("FR"===IodineGUI.Iodine.IOCore.cartridge.romCode?(IodineGUI.Iodine.IOCore.cpu.write8(33779833,e),8==e?IodineGUI.Iodine.IOCore.cpu.write8(33779267,17):IodineGUI.Iodine.IOCore.cpu.write8(33779267,51)):"C"===IodineGUI.Iodine.IOCore.cartridge.romCode?(IodineGUI.Iodine.IOCore.cpu.write8(33781136,e),IodineGUI.Iodine.IOCore.cpu.write8(33781137,e),8==e?IodineGUI.Iodine.IOCore.cpu.write8(33780571,17):IodineGUI.Iodine.IOCore.cpu.write8(33780571,51)):"E"===IodineGUI.Iodine.IOCore.cartridge.romCode&&(IodineGUI.Iodine.IOCore.cpu.write8(33781136,e),IodineGUI.Iodine.IOCore.cpu.write8(33781137,e),8==e?IodineGUI.Iodine.IOCore.cpu.write8(33780571,17):68==IodineGUI.Iodine.IOCore.cpu.read8(33780571)?IodineGUI.Iodine.IOCore.cpu.write8(33780571,68):IodineGUI.Iodine.IOCore.cpu.write8(33780571,48)))}function whiteoutTeam(){"FR"===IodineGUI.Iodine.IOCore.cartridge.romCode?(IodineGUI.Iodine.IOCore.cpu.write8(FIRE_RED_PARTY_OFFSET+80,8),IodineGUI.Iodine.IOCore.cpu.write16(FIRE_RED_PARTY_OFFSET+86,1),IodineGUI.Iodine.IOCore.cpu.write16(FIRE_RED_PARTY_OFFSET+86+100,0),IodineGUI.Iodine.IOCore.cpu.write16(FIRE_RED_PARTY_OFFSET+86+200,0),IodineGUI.Iodine.IOCore.cpu.write16(FIRE_RED_PARTY_OFFSET+86+300,0),IodineGUI.Iodine.IOCore.cpu.write16(FIRE_RED_PARTY_OFFSET+86+400,0),IodineGUI.Iodine.IOCore.cpu.write16(FIRE_RED_PARTY_OFFSET+86+500,0)):"C"!==IodineGUI.Iodine.IOCore.cartridge.romCode&&"E"!==IodineGUI.Iodine.IOCore.cartridge.romCode||(IodineGUI.Iodine.IOCore.cpu.write8(EMERALD_PARTY_OFFSET+80,8),IodineGUI.Iodine.IOCore.cpu.write16(EMERALD_PARTY_OFFSET+86,1),IodineGUI.Iodine.IOCore.cpu.write16(EMERALD_PARTY_OFFSET+86+100,0),IodineGUI.Iodine.IOCore.cpu.write16(EMERALD_PARTY_OFFSET+86+200,0),IodineGUI.Iodine.IOCore.cpu.write16(EMERALD_PARTY_OFFSET+86+300,0),IodineGUI.Iodine.IOCore.cpu.write16(EMERALD_PARTY_OFFSET+86+400,0),IodineGUI.Iodine.IOCore.cpu.write16(EMERALD_PARTY_OFFSET+86+500,0))}function dynamicMemorySlice(e,t,i){let r=IodineGUI.Iodine.IOCore.cpu.read32(e)+t-33554432,a=r+i;return IodineGUI.Iodine.IOCore.memory.externalRAM.slice(r,a)}function dynamicMemorySplice(e,t,i,r){let a=IodineGUI.Iodine.IOCore.cpu.read32(e)+t-33554432;for(let e=0;e<i;e++)IodineGUI.Iodine.IOCore.memory.externalRAM[a+e]=r[e]}const EMERALD_PARTY_OFFSET=33703148,FIRE_RED_PARTY_OFFSET=33702532,PLAYER_PARTY_LENGTH=600,FIRE_RED_SAVE_1_PTR=50352136,EMERALD_SAVE_1_PTR=50355596,FIRE_RED_OBSF_MONEY_OFFSET=656,FIRE_RED_OBSF_MONEY_LENGTH=4,EMERALD_OBSF_MONEY_OFFSET=1168,EMERALD_OBSF_MONEY_LENGTH=4,FIRE_RED_SAVE_2_PTR=50352140,EMERALD_SAVE_2_PTR=50355600,NAME_STATE_OFFSET=0,NAME_STATE_LENGTH=9,ID_TIME_OFFSET=10,ID_TIME_LENGTH=12,FIRE_RED_XOR_KEY_OFFSET=3872,FIRE_RED_XOR_KEY_LENGTH=4,EMERALD_XOR_KEY_OFFSET=172,EMERALD_XOR_KEY_LENGTH=4,FIRE_RED_ITEM_OFFSET=784,FIRE_RED_ITEM_LENGTH=168,EMERALD_ITEM_OFFSET=1376,EMERALD_ITEM_LENGTH=120,FIRE_RED_KEY_ITEM_OFFSET=952,FIRE_RED_KEY_ITEM_LENGTH=120,EMERALD_KEY_ITEM_OFFSET=1496,EMERALD_KEY_ITEM_LENGTH=120,FIRE_RED_BALL_OFFSET=1072,FIRE_RED_BALL_LENGTH=52,EMERALD_BALL_OFFSET=1616,EMERALD_BALL_LENGTH=64,FIRE_RED_TM_OFFSET=1124,FIRE_RED_TM_LENGTH=232,EMERALD_TM_OFFSET=1680,EMERALD_TM_LENGTH=256,FIRE_RED_BERRIES_OFFSET=1356,FIRE_RED_BERRIES_LENGTH=172,EMERALD_BERRIES_OFFSET=1936,EMERALD_BERRIES_LENGTH=184,FIRE_RED_SAVE_3_PTR=50352144,EMERALD_SAVE_3_PTR=50355604,BOX_LENGTH=2400;function BagStoreage(){this.money=null,this.itemPocket=new Map,this.keyItemsPocket=new Map,this.ballItemPocket=new Map,this.tmCase=new Map,this.berryPocket=new Map}BagStoreage.prototype.readData=function(e){"E"==e||"C"==e?this.readEmeraldData():this.readFireRedData()},BagStoreage.prototype.readFireRedData=function(){this.itemPocket.clear(),this.keyItemsPocket.clear(),this.ballItemPocket.clear(),this.tmCase.clear(),this.berryPocket.clear();let e=IodineGUI.Iodine.IOCore.cpu.read32(FIRE_RED_SAVE_2_PTR),t=IodineGUI.Iodine.IOCore.cpu.read32(e+3872),i=IodineGUI.Iodine.IOCore.cpu.read16(e+3872),r=IodineGUI.Iodine.IOCore.cpu.read32(FIRE_RED_SAVE_1_PTR);this.money=IodineGUI.Iodine.IOCore.cpu.read32(r+656)^t,this.readItemSection(r,784,168,this.itemPocket,i),this.readItemSection(r,952,120,this.keyItemsPocket,i),this.readItemSection(r,1072,52,this.ballItemPocket,i),this.readItemSection(r,1124,232,this.tmCase,i),this.readItemSection(r,1356,172,this.berryPocket,i)},BagStoreage.prototype.readEmeraldData=function(){this.itemPocket.clear(),this.keyItemsPocket.clear(),this.ballItemPocket.clear(),this.tmCase.clear(),this.berryPocket.clear();let e=IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_2_PTR),t=IodineGUI.Iodine.IOCore.cpu.read32(e+172),i=IodineGUI.Iodine.IOCore.cpu.read16(e+172),r=IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_1_PTR);this.money=IodineGUI.Iodine.IOCore.cpu.read32(r+1168)^t,this.readItemSection(r,1376,120,this.itemPocket,i),this.readItemSection(r,1496,120,this.keyItemsPocket,i),this.readItemSection(r,1616,64,this.ballItemPocket,i),this.readItemSection(r,1680,256,this.tmCase,i),this.readItemSection(r,1936,184,this.berryPocket,i)},BagStoreage.prototype.writeData=function(e,t,i){"E"==e||"C"==e?this.writeDataToEmerald(e,t,i):this.writeDataToFireRed(e,t,i)},BagStoreage.prototype.writeDataToFireRed=function(e,t,i){let r=IodineGUI.Iodine.IOCore.cpu.read32(FIRE_RED_SAVE_2_PTR),a=IodineGUI.Iodine.IOCore.cpu.read32(r+3872),o=IodineGUI.Iodine.IOCore.cpu.read16(r+3872),s=IodineGUI.Iodine.IOCore.cpu.read32(FIRE_RED_SAVE_1_PTR);if(IodineGUI.Iodine.IOCore.cpu.write32(s+656,this.money^a),this.berryPocket.size>=1&&this.keyItemsPocket.set(365,1),this.tmCase.size>=1&&this.keyItemsPocket.set(364,1),this.itemPocket.get(39)&&this.keyItemsPocket.set(350,1),"C"==t){let e=this.tmCase.get(296),t=this.tmCase.get(344),i=this.keyItemsPocket.get(347);this.tmCase.delete(296),this.tmCase.delete(344),this.keyItemsPocket.delete(347),e&&this.tmCase.set(344,1),t&&this.keyItemsPocket.set(347,1),i&&this.tmCase.set(296,1)}this.writeItemSection(s,784,168,this.itemPocket,o,i),this.writeItemSection(s,952,120,this.keyItemsPocket,o,!1),this.writeItemSection(s,1072,52,this.ballItemPocket,o,i),this.writeItemSection(s,1124,232,this.tmCase,o,i),this.writeItemSection(s,1356,172,this.berryPocket,o,i)},BagStoreage.prototype.writeDataToEmerald=function(e,t,i){let r=IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_2_PTR),a=IodineGUI.Iodine.IOCore.cpu.read32(r+172),o=IodineGUI.Iodine.IOCore.cpu.read16(r+172),s=IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_1_PTR);if(IodineGUI.Iodine.IOCore.cpu.write32(s+1168,this.money^a),!this.keyItemsPocket.get(360)||this.keyItemsPocket.get(259)||this.keyItemsPocket.get(272)||(this.keyItemsPocket.set(259,1),this.keyItemsPocket.get(272,1)),"E"==e&&"C"==t){let e=this.tmCase.get(296),t=this.tmCase.get(344),i=this.keyItemsPocket.get(347);this.tmCase.delete(296),this.tmCase.delete(344),this.keyItemsPocket.delete(347),e&&this.tmCase.set(344,1),t&&this.keyItemsPocket.set(347,1),i&&this.tmCase.set(296,1)}else if("C"==e&&t&&"C"!=t){let e=this.tmCase.get(344),t=this.keyItemsPocket.get(347),i=this.tmCase.get(296);this.tmCase.delete(296),this.tmCase.delete(344),this.keyItemsPocket.delete(347),e&&this.tmCase.set(296,1),t&&this.tmCase.set(344,1),i&&this.keyItemsPocket.set(347,1)}this.writeItemSection(s,1376,120,this.itemPocket,o,i),this.writeItemSection(s,1496,120,this.keyItemsPocket,o,!1),this.writeItemSection(s,1616,64,this.ballItemPocket,o,i),this.writeItemSection(s,1680,256,this.tmCase,o,i),this.writeItemSection(s,1936,184,this.berryPocket,o,i)},BagStoreage.prototype.readItemSection=function(e,t,i,r,a){for(let o=0;o<t+i;o+=4){let i=IodineGUI.Iodine.IOCore.cpu.read16(e+t+o);if(0==i)break;let s=IodineGUI.Iodine.IOCore.cpu.read16(e+t+o+2)^a;r.set(i,s)}},BagStoreage.prototype.writeItemSection=function(e,t,i,r,a,o){var s=[...r];for(let r=0;r<t+i;r+=4){if(s.length>r/4){let i=s[r/4][0],o=s[r/4][1]^a;IodineGUI.Iodine.IOCore.cpu.write16(e+t+r,i),IodineGUI.Iodine.IOCore.cpu.write16(e+t+r+2,o)}else{if(!o)break;{let i=ITEM_DATA.Nothing.number,o=0^a;IodineGUI.Iodine.IOCore.cpu.write16(e+t+r,i),IodineGUI.Iodine.IOCore.cpu.write16(e+t+r+2,o)}}}},BagStoreage.prototype.hasBike=function(){return(this.keyItemsPocket.get(259)||0)+(this.keyItemsPocket.get(272)||0)+(this.keyItemsPocket.get(360)||0)>0},BagStoreage.prototype.hasFlute=function(){return(this.keyItemsPocket.get(36)||0)+(this.keyItemsPocket.get(350)||0)>0};var badgeSync=!0;const FIRE_RED_BASE_FLAG_OFFSET=3808,FIRE_RED_SYS_FLAGS_OFFSET=4064,FIRE_RED_BADGE1_OFFSET=32,FIRE_RED_BADGE2_OFFSET=33,FIRE_RED_BADGE3_OFFSET=34,FIRE_RED_BADGE4_OFFSET=35,FIRE_RED_BADGE5_OFFSET=36,FIRE_RED_BADGE6_OFFSET=37,FIRE_RED_BADGE7_OFFSET=38,FIRE_RED_BADGE8_OFFSET=39,FIRE_RED_RUNNING_SHOE_OFFSET=47,FIRE_RED_POKEDEX_OFFSET=41,FIRE_RED_NATIONAL_DEX_OFFSET=64,FIRE_RED_BADGE_OFFSETS=[32,33,34,35,36,37,38,39],FIRE_RED_BIKE_OBTAINED_OFFSET=625,FIRE_RED_FLUTE_OBTAINED_OFFSET=573,EMERALD_BASE_FLAGS_OFFSET=4720,EMERALD_SYS_FLAGS_OFFSET=4988,EMERALD_BADGE1_OFFSET=7,EMERALD_BADGE2_OFFSET=8,EMERALD_BADGE3_OFFSET=9,EMERALD_BADGE4_OFFSET=10,EMERALD_BADGE5_OFFSET=11,EMERALD_BADGE6_OFFSET=12,EMERALD_BADGE7_OFFSET=13,EMERALD_BADGE8_OFFSET=14,EMERALD_RUNNING_SHOE_OFFSET=96,EMERALD_POKEDEX_OFFSET=1,EMERALD_NATIONAL_DEX_OFFSET=54,EMERALD_BADGE_OFFSETS=[7,8,9,10,11,12,13,14],EMERALD_BASE_VAR_OFFSET=5020,FIRE_RED_BASE_VAR_OFFSET=4096,EMERALD_REPEL_STEPS_OFFSET=16417,FIRE_RED_REPEL_STEPS_OFFSET=16416,EMERALD_STARTER_CHOICE_OFFSET=16419,FIRE_RED_STARTER_CHOICE_OFFSET=16433;function FlagManager(e,t){this.badge1=null,this.badge2=null,this.badge3=null,this.badge4=null,this.badge5=null,this.badge6=null,this.badge7=null,this.badge8=null,this.hasRunningShoes=null,this.hasFlute=t,this.HMState=null,this.hasBike=e,this.repelSteps=null,this.starterChoice=null}function modifyBadge(e,t,i){modifySystemFlag(e,("FR"==e?FIRE_RED_BADGE_OFFSETS:EMERALD_BADGE_OFFSETS)[t-1],i)}function modifyRunningShoes(e,t){modifySystemFlag(e,"FR"==e?47:96,t)}function modifySystemFlag(e,t,i){let r=new FlagManager;r.readFlags(e);let a="FR"==e?FIRE_RED_SAVE_1_PTR:EMERALD_SAVE_1_PTR,o=IodineGUI.Iodine.IOCore.cpu.read32(a),s="FR"==e?FIRE_RED_SYS_FLAGS_OFFSET:EMERALD_SYS_FLAGS_OFFSET;r.setFlag(o,s,t,i)}function modifyBaseFlag(e,t,i){let r=new FlagManager;r.readFlags(e);let a="FR"==e?FIRE_RED_SAVE_1_PTR:EMERALD_SAVE_1_PTR,o=IodineGUI.Iodine.IOCore.cpu.read32(a),s="FR"==e?3808:4720;r.setFlag(o,s,t,i)}function readSystemFlag(e,t){let i=new FlagManager;i.readFlags(e);let r="FR"==e?FIRE_RED_SAVE_1_PTR:EMERALD_SAVE_1_PTR,a=IodineGUI.Iodine.IOCore.cpu.read32(r),o="FR"==e?FIRE_RED_SYS_FLAGS_OFFSET:EMERALD_SYS_FLAGS_OFFSET;return i.getFlag(a,o,t)}function writeGameVar(e,t,i){let r="FR"==e?FIRE_RED_SAVE_1_PTR:EMERALD_SAVE_1_PTR,a=IodineGUI.Iodine.IOCore.cpu.read32(r),o="FR"==e?4096:5020;IodineGUI.Iodine.IOCore.cpu.write16(a+o+2*(t-16384),i)}function readGameVar(e,t){let i="FR"==e?FIRE_RED_SAVE_1_PTR:EMERALD_SAVE_1_PTR,r=IodineGUI.Iodine.IOCore.cpu.read32(i),a="FR"==e?4096:5020;return IodineGUI.Iodine.IOCore.cpu.read16(r+a+2*(t-16384))}function HMState(){this.canFlash=!1,this.canCut=!1,this.canFly=!1,this.canStrength=!1,this.canSurf=!1,this.canSmash=!1,this.canWaterfall=!1,this.canDive=!1,this.canWhirlpool=!1}FlagManager.prototype.getFlag=function(e,t,i){let r=i%8;return!!+IodineGUI.Iodine.IOCore.cpu.read8(e+t+Math.ceil((i+1)/8)-1).toString(2).padStart(8,0).split("").reverse()[r]},FlagManager.prototype.setFlag=function(e,t,i,r){let a=i%8,o=IodineGUI.Iodine.IOCore.cpu.read8(e+t+Math.ceil((i+1)/8)-1).toString(2).padStart(8,0).split("").reverse();o[a]=r,IodineGUI.Iodine.IOCore.cpu.write8(e+t+Math.ceil((i+1)/8)-1,parseInt(o.reverse().join(""),2))},FlagManager.prototype.readFlags=function(e){"E"==e?this.readEmeraldFlags():"C"==e?this.readCrystalFlags():this.readFireRedFlags()},FlagManager.prototype.readEmeraldFlags=function(){let e=IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_1_PTR);this.badge1=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,7),this.badge2=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,8),this.badge3=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,9),this.badge4=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,10),this.badge5=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,11),this.badge6=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,12),this.badge7=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,13),this.badge8=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,14),this.hasRunningShoes=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,96),this.HMState=new HMState,this.HMState.evaluate("E",this.badge1,this.badge2,this.badge3,this.badge4,this.badge5,this.badge6,this.badge7,this.badge8),this.repelSteps=readGameVar("E",16417)},FlagManager.prototype.readCrystalFlags=function(){let e=IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_1_PTR);this.badge1=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,7),this.badge2=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,8),this.badge3=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,9),this.badge4=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,10),this.badge5=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,11),this.badge6=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,12),this.badge7=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,13),this.badge8=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,14),this.hasRunningShoes=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,96),this.HMState=new HMState,this.HMState.evaluate("C",this.badge1,this.badge2,this.badge3,this.badge4,this.badge5,this.badge6,this.badge7,this.badge8),this.repelSteps=readGameVar("C",16417)},FlagManager.prototype.readFireRedFlags=function(){let e=IodineGUI.Iodine.IOCore.cpu.read32(FIRE_RED_SAVE_1_PTR);this.badge1=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,32),this.badge2=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,33),this.badge3=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,34),this.badge4=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,35),this.badge5=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,36),this.badge6=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,37),this.badge7=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,38),this.badge8=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,39),this.hasRunningShoes=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,47),this.HMState=new HMState,this.HMState.evaluate("FR",this.badge1,this.badge2,this.badge3,this.badge4,this.badge5,this.badge6,this.badge7,this.badge8),this.repelSteps=readGameVar("FR",16416),this.starterChoice=readGameVar("FR",16433)},FlagManager.prototype.writeFlags=function(e,t){"E"==e?this.writeEmeraldFlags():"C"==e?this.writeCrystalFlags():this.writeFireRedFlags()},FlagManager.prototype.writeEmeraldFlags=function(){let e=IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_1_PTR);this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,96,+this.hasRunningShoes),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,54,1),writeGameVar("E",16462,770);let t=IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_2_PTR);if(IodineGUI.Iodine.IOCore.cpu.write8(t+26,218),this.setFlag(e,4720,228,1),this.setFlag(e,4720,144,1),modifySystemFlag("E",43,0),this.setFlag(e,4720,158,1),writeGameVar("E",4720,16478,0),this.setFlag(e,4720,129,1),this.setFlag(e,4720,973,1),this.setFlag(e,4720,816,1),writeGameVar("E",4720,16599,0),this.setFlag(e,4720,80,0),this.setFlag(e,4720,972,0),this.setFlag(e,4720,847,1),writeGameVar("E",4720,16569,0),this.setFlag(e,4720,143,1),this.setFlag(e,4720,144,1),this.setFlag(e,4720,970,1),writeGameVar("E",4720,16472,0),this.setFlag(e,4720,882,1),this.setFlag(e,4720,900,1),badgeSync){let t=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,7),i=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,8),r=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,9),a=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,10),o=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,11),s=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,12),E=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,13),n=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,14),I=this.HMState.updateBadges("E",t,i,r,a,o,s,E,n);this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,7,+(I[0]||t)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,8,+(I[1]||i)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,9,+(I[2]||r)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,10,+(I[3]||a)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,11,+(I[4]||o)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,12,+(I[5]||s)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,13,+(I[6]||E)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,14,+(I[7]||n))}writeGameVar("E",16417,this.repelSteps),this.starterChoice&&writeGameVar("E",16419,this.starterChoice)},FlagManager.prototype.writeCrystalFlags=function(){let e=IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_1_PTR);this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,96,+this.hasRunningShoes),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,54,1),writeGameVar("E",16462,770);let t=IodineGUI.Iodine.IOCore.cpu.read32(EMERALD_SAVE_2_PTR);if(IodineGUI.Iodine.IOCore.cpu.write8(t+26,218),badgeSync){let t=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,7),i=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,8),r=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,9),a=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,10),o=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,11),s=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,12),E=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,13),n=this.getFlag(e,EMERALD_SYS_FLAGS_OFFSET,14),I=this.HMState.updateBadges("C",t,i,r,a,o,s,E,n);this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,7,+(I[0]||t)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,8,+(I[1]||i)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,9,+(I[2]||r)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,10,+(I[3]||a)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,11,+(I[4]||o)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,12,+(I[5]||s)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,13,+(I[6]||E)),this.setFlag(e,EMERALD_SYS_FLAGS_OFFSET,14,+(I[7]||n))}writeGameVar("C",16417,this.repelSteps)},FlagManager.prototype.writeFireRedFlags=function(){let e=IodineGUI.Iodine.IOCore.cpu.read32(FIRE_RED_SAVE_1_PTR);this.setFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,47,+this.hasRunningShoes),this.setFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,64,1),writeGameVar("FR",16462,25176);let t=IodineGUI.Iodine.IOCore.cpu.read32(FIRE_RED_SAVE_2_PTR);if(IodineGUI.Iodine.IOCore.cpu.write8(t+27,185),modifySystemFlag("FR",48,0),this.hasBike&&this.setFlag(e,3808,625,1),this.hasFlute&&this.setFlag(e,3808,573,1),badgeSync){let t=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,32),i=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,33),r=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,34),a=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,35),o=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,36),s=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,37),E=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,38),n=this.getFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,39),I=this.HMState.updateBadges("FR",t,i,r,a,o,s,E,n);this.setFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,32,+(I[0]||t)),this.setFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,33,+(I[1]||i)),this.setFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,34,+(I[2]||r)),this.setFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,35,+(I[3]||a)),this.setFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,36,+(I[4]||o)),this.setFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,37,+(I[5]||s)),this.setFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,38,+(I[6]||E)),this.setFlag(e,FIRE_RED_SYS_FLAGS_OFFSET,39,+(I[7]||n))}writeGameVar("FR",16416,this.repelSteps)},HMState.prototype.evaluate=function(e,t,i,r,a,o,s,E,n){"E"==e?(this.canFlash=i,this.canCut=t,this.canFly=s,this.canStrength=a,this.canSurf=o,this.canSmash=r,this.canWaterfall=n,this.canDive=E,this.canWhirlpool=!1):"C"==e?(this.canFlash=t,this.canCut=i,this.canFly=o,this.canStrength=r,this.canSurf=a,this.canSmash=!1,this.canWaterfall=n,this.canDive=!1,this.canWhirlpool=E):(this.canFlash=t,this.canCut=i,this.canFly=r,this.canStrength=a,this.canSurf=o,this.canSmash=s,this.canWaterfall=E,this.canDive=!1,this.canWhirlpool=!1)},HMState.prototype.updateBadges=function(e,t,i,r,a,o,s,E,n){let I=[];return"E"==e?(I[0]=+(t||this.canCut),I[1]=+(i||this.canFlash),I[2]=+(r||this.canSmash),I[3]=+(a||this.canStrength),I[4]=+(o||this.canSurf),I[5]=+(s||this.canFly),I[6]=+(E||this.canDive),I[7]=+(n||this.canWaterfall)):"C"==e?(I[0]=+(t||this.canFlash),I[1]=+(i||this.canCut),I[2]=+(r||this.canStrength),I[3]=+(a||this.canSurf),I[4]=+(o||this.canFly),I[7]=+(n||this.canWaterfall)):(I[0]=+(t||this.canFlash),I[1]=+(i||this.canCut),I[2]=+(r||this.canFly),I[3]=+(a||this.canStrength),I[4]=+(o||this.canSurf),I[5]=+(s||this.canSmash),I[6]=+(E||this.canWaterfall)),I};
//# sourceMappingURL=build-index.8af315f4.js.map
