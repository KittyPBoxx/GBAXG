{"mappings":"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","sources":["dist/ui/ClientUI.js"],"sourcesContent":["const VERSION_NUMBER = \"0.10.3-ALPHA\";\n\nvar debugConsole;\ndocument.addEventListener('DOMContentLoaded', function() {\n\n    console.info(\"Version \" + VERSION_NUMBER);\n    document.getElementById(\"version\").innerHTML = VERSION_NUMBER;\n    \n    M.Modal.init(document.getElementById('menu'), {\n      \n      onOpenStart: () => IodineGUI.isPlaying && IodineGUI.Iodine.pause(),\n      onCloseEnd: () => !IodineGUI.isPlaying && IodineGUI.Iodine.playStatusCallback && IodineGUI.Iodine.play(),\n      dismissible: false\n    \n    }).open();      \n\n    initMenu();\n\n    let updateModal = M.Modal.init(document.getElementById('updateModal'), {\n      \n      onOpenStart: () => populateUpdateDialog(),\n      onCloseEnd: () => dissmissUpdateDialog(),\n      dismissible: true\n    \n    })\n    \n    if (!findValue(\"GBAXG_lastVersionMessage\") || VERSION_COMPARITOR.apply(this, [findValue(\"GBAXG_lastVersionMessage\"), VERSION_NUMBER]) < 0) {\n      updateModal.open();\n    }\n\n    createAndLoadConfig();\n\n     M.Autocomplete.init(document.getElementById(\"autocomplete-items\"), { limit: 4, data : Object.keys(ITEM_DATA).reduce((v1, v2) => { v1[v2] = null; return v1 }, {}) });\n     M.Autocomplete.init(document.getElementById(\"autocomplete-locations\"), { limit: 4, data : Object.keys(KEY_LOCATION_DATA).reduce((v1, v2) => { v1[v2] = null; return v1 }, {}), onAutocomplete : () => {\n        let locationParts = KEY_LOCATION_DATA[document.getElementById(\"autocomplete-locations\").value].split(\",\");\n        document.getElementById(\"game-value-input\").value = locationParts[0];\n        document.getElementById(\"bank-value-input\").value = locationParts[1];\n        document.getElementById(\"map-value-input\").value = locationParts[2];\n        document.getElementById(\"warp-value-input\").value = locationParts[3];\n        M.FormSelect.getInstance(document.getElementById(\"game-value-input\"))._handleSelectChangeBound();\n     }});\n\n    populateHints(); \n\n    M.FormSelect.init(document.querySelectorAll('select'), {});\n    debugConsole = M.Modal.init(document.getElementById('console'), {});\n\n    document.querySelectorAll(\"input[type=text]\").forEach(e => e.addEventListener('focusin', (event) => userInputEnabled = false));\n    document.querySelectorAll(\"input[type=text]\").forEach(e => e.addEventListener('focusout', (event) => userInputEnabled = true));\n});\n\n\nfunction debounce(func, timeout = 300){\n    let timer;\n    return (...args) => {\n      clearTimeout(timer);\n      timer = setTimeout(() => { func.apply(this, args); }, timeout);\n    };\n}\n\nfunction initMenu() {\n  M.Carousel.init(document.querySelectorAll('.carousel'), { numVisible: 5, dist: -20, noWrap: true, preventLoop: true, enableTouch: false, duration: 30});\n\n  document.querySelectorAll(\".carousel-item\").forEach(e => e.setAttribute(\"draggable\", false));\n  document.querySelectorAll(\".left-menu-button\").forEach(e => e.onclick = () =>  M.Carousel.getInstance(document.getElementById(\"menuCarousel\")).prev());\n  document.querySelectorAll(\".right-menu-button\").forEach(e => e.onclick = () =>  M.Carousel.getInstance(document.getElementById(\"menuCarousel\")).next());\n}\n\nwindow.addEventListener('resize', initMenu, true);\n\nfunction toggleMenu() {\n  let menu = M.Modal.getInstance(document.getElementById('menu'));\n  menu.isOpen ? menu.close() : menu.open();\n\n  // Fixes bug in materialize.js when resizing modals\n  window.dispatchEvent(new Event('resize'));\n}\n\nasync function createAndLoadConfig() {\n  storageManager.find(\"keybinds\").then(initKeybinds, e => {\n    initKeybinds(DEFAULT_KEYBIND_CONFIG);\n    storageManager.persist(keybinds, DEFAULT_KEYBIND_CONFIG);\n  })\n}\n\nfunction fileToDirPath(path) {\n  return path.slice(0, path.lastIndexOf(\"/\"));\n}\n\nfunction dissmissUpdateDialog() {\n  setValue(\"GBAXG_lastVersionMessage\", VERSION_NUMBER);\n}\n\nfunction populateUpdateDialog() {\n  let element = document.getElementById(\"updateModalText\");\n  element.innerHTML += \"<h5 class='card-panel red darken-1 white-text'>UPDATE: \" + VERSION_NUMBER + \"</h5>\";\n\n  let ul = document.createElement('ul');\n  ul.classList.add(\"updateList\");\n  RELEASE_NOTES[VERSION_NUMBER].forEach(note => {\n      let li = document.createElement('li');\n      li.innerHTML=note;\n      ul.appendChild(li);\n  });\n\n  element.innerHTML += ul.outerHTML;\n\n  element.innerHTML += \"<div class='olderVersions'>\" + \n                       \"<a href='https://kittypboxx.github.io/GBAXG/dist/'>Latest Nightly Version (Unstable)</a> <br>\" + \n                       \"<a href='../Historic/index.html'>Older Versions</a> <br>\" + \n                       \"<a href='https://trello.com/b/esQs4wx3/multi-game-random-warps'>See Development Progress</a>\" + \n                       \"</div>\";\n}\n\n/* CONTROLS */\n\n\ndocument.addEventListener('keydown', e => doInput(e.code, true, false));\ndocument.addEventListener('keyup', e => doInput(e.code, false, false));\n\nCommandExecutor.register(\"toggleMenu\", args => toggleMenu());\n\nlet keybinds = new Map();\nfunction initKeybinds(conf) {\n\n  conf = JSON.parse(conf);\n\n  conf = addNewConfigOptions(conf);\n\n  let table = document.getElementById(\"key-binding-table\");\n\n  conf.sort(sortCommands)\n  conf.forEach(binding => {\n    if (binding.type == \"exec\") {\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Down\", binding.command);\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Down\", binding.command);\n    }\n    else if (binding.type == \"button\") {\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Down\", binding.command + \"Down\");\n      binding.kbd  && keybinds.set(\"KBD-\"  + binding.kbd  + \"-Up\"  , binding.command + \"Up\"  );\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Down\", binding.command + \"Down\");\n      binding.gmpd && keybinds.set(\"GMPD-\" + binding.gmpd + \"-Up\"  , binding.command + \"Up\"  );\n    }\n\n    let row = table.insertRow(table.rows.length);\n\n    let keyCell = row.insertCell(0);\n    keyCell.innerHTML = `<td>&nbsp;${binding.command.replace(\"Key\", \"\")}</td>`;\n\n    let kbdCell = row.insertCell(1);\n    kbdCell.innerHTML = `<td>&nbsp;<span>${binding.kbd.replace(\"Key\", \"\") || \"N/A\"}</span></td>`;\n    kbdCell.setAttribute(\"data-command\", binding.command);\n    kbdCell.setAttribute(\"data-type\", binding.type);\n    kbdCell.addEventListener(\"click\", listenForKbdBinding)\n\n    let gmpdCell = row.insertCell(2);\n    gmpdCell.innerHTML = `<td>&nbsp;<span>${binding.gmpd || \"N/A\"}</span></td>`;\n    gmpdCell.setAttribute(\"data-command\", binding.command);\n    gmpdCell.setAttribute(\"data-type\", binding.type);\n    gmpdCell.addEventListener(\"click\", listenForGmpdBinding);\n  });\n}\n\nfunction addNewConfigOptions(conf) {\n  let defaultConf = JSON.parse(DEFAULT_KEYBIND_CONFIG);\n  let existingCommandSet = new Set(conf.map(c => c.command));\n\n  defaultConf = defaultConf.filter(c => !existingCommandSet.has(c.command));\n  \n  return conf.concat(defaultConf);\n}\n\nlet listenFor = false;\n\nfunction listenForKbdBinding(e) {\n  M.Toast.dismissAll();\n  listenFor = {\n    isGamepad: false, \n    command: e.currentTarget.getAttribute(\"data-command\"), \n    type: e.currentTarget.getAttribute(\"data-type\"),\n    elmnt: e.currentTarget,\n    oldCode: e.currentTarget.querySelector(\"span\").innerHTML\n  };\n  M.toast({html: 'Press any key...', displayLength:3000, completeCallback: () => freezeClic = listenFor = false });\n  freezeClic = true;\n}\n\nfunction listenForGmpdBinding(e) {\n  M.Toast.dismissAll();\n  listenFor = {\n    isGamepad: true, \n    command: e.currentTarget.getAttribute(\"data-command\"), \n    type: e.currentTarget.getAttribute(\"data-type\"),\n    elmnt: e.currentTarget,\n    oldCode: e.currentTarget.querySelector(\"span\").innerHTML\n  };\n  M.toast({html: 'Press any button...', displayLength:3000, completeCallback: () => freezeClic = listenFor = false });\n  freezeClic = true;\n}\n\nvar userInputEnabled = true;\nfunction doInput(code, isDown, isGamepad) {\n\n  if (!userInputEnabled) { return; }\n  //if (code == \"Slash\") { debugConsole.open(); return; }\n\n  if (listenFor && !listenFor.isGamepad && !isGamepad && isDown) {\n\n    if (listenFor.type == \"button\") {\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Down\");\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Up\");\n\n      keybinds.set(\"KBD-\" + code + \"-Down\", listenFor.command + \"Down\");\n      keybinds.set(\"KBD-\" + code + \"-Up\"  , listenFor.command + \"Up\"  );\n    } else if (listenFor.type == \"exec\") {\n      keybinds.delete(\"KBD-\" + listenFor.oldCode + \"-Down\");\n\n      keybinds.set(\"KBD-\"  + code + \"-Down\", listenFor.command);\n    }\n\n    listenFor.elmnt.innerHTML = `<td>&nbsp;<span>${code.replace(\"Key\", \"\")}</span></td>`;\n    listenFor = false;\n    M.Toast.dismissAll();\n\n    writeKeybinds();\n\n  } else if (listenFor && listenFor.isGamepad && isGamepad && isDown) {\n\n    if (listenFor.type == \"button\") {\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Down\");\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Up\");\n\n      keybinds.set(\"GMPD-\" + code + \"-Down\", listenFor.command + \"Down\");\n      keybinds.set(\"GMPD-\" + code + \"-Up\"  , listenFor.command + \"Up\"  );\n    } else if (listenFor.type == \"exec\") {\n      keybinds.delete(\"GMPD-\" + listenFor.oldCode + \"-Down\");\n\n      keybinds.set(\"GMPD-\"  + code + \"-Down\", listenFor.command);\n    }\n\n    listenFor.elmnt.innerHTML = `<td>&nbsp;<span>${code}</span></td>`;\n    listenFor = false;\n    M.Toast.dismissAll();\n\n    writeKeybinds();\n\n  } else {\n\n    code = \"\" + (isGamepad ? \"GMPD-\" : \"KBD-\") + code + (isDown ? \"-Down\" : \"-Up\");\n    keybinds.get(code) && CommandExecutor.execute(keybinds.get(code));\n\n  }\n\n}\n\nfunction writeKeybinds() {\n\n  let config = [];\n\n  new Set([...keybinds.values()].filter(v => !v.includes(\"KeyUp\"))).forEach(c => {\n\n    let keybind = {};\n\n    let isButton = c.includes(\"Down\") && [...keybinds].filter(([k,v]) => v == c.replace(\"Down\", \"Up\") > 0);\n    keybind.type = isButton ? \"button\" : \"exec\";\n\n    keybind.command = isButton ? c.replace(/KeyDown$/, \"Key\") : c;\n\n    keybind.kbd = null;\n    keybind.gmpd = null;\n    [...keybinds].filter(([k,v]) => v == c).forEach(m => keybind[m[0].includes(\"KBD\") ? \"kbd\" : \"gmpd\"] = m[0].match(/-(.*)-/).pop());\n\n    config.push(keybind);\n\n  });\n  \n  config.sort(sortCommands)\n  let printPrettyJson = JSON.stringify(config, null, 2).replace(/([\\\"|(null)|\\{],?)\\n/g, \"$1\");\n  storageManager.persist(\"keybinds\", printPrettyJson);\n  \n}\n\nfunction sortCommands(a,b) {\n  return (a.type + commandToIndex(a.command) > b.type + commandToIndex(b.command)) ? 1: -1;\n}\n\nfunction commandToIndex(c) {\n  switch(c) {\n    case \"AKey\"      : return 0;\n    case \"BKey\"      : return 1;\n    case \"LKey\"      : return 2;\n    case \"RKey\"      : return 3;\n    case \"StartKey\"  : return 4;\n    case \"SelectKey\" : return 5;\n    case \"UpKey\"     : return 6;\n    case \"DownKey\"   : return 7;\n    case \"LeftKey\"   : return 8;\n    case \"RightKey\"  : return 9;\n    case \"SpeedUp\"   : return 10;\n    case \"Restart\"   : return 11;\n    case \"toggleMenu\": return 12;\n    default: return 999;\n  }\n}\n\nfunction menuInput(c) {\n  switch(c) {\n    case \"A\"      : \n    break;\n    case \"B\"      : \n    break;\n    case \"L\"      :\n      M.Carousel.getInstance(document.getElementById('menuCarousel')).prev();\n    break;\n    case \"R\"      : \n      M.Carousel.getInstance(document.getElementById('menuCarousel')).next();\n    break;\n    case \"START\"  : \n    break;\n    case \"SELECT\" : \n    break;\n    case \"UP\"     : \n    break;\n    case \"DOWN\"   : \n    break;\n    case \"LEFT\"   : \n    break;\n    case \"RIGHT\"  : \n    break;\n  }\n}\n\nlet freezeClic = false; \ndocument.addEventListener(\"click\", e => {\n    if (freezeClic) {\n        M.Toast.dismissAll();\n        e.stopPropagation();\n        e.preventDefault();\n    }\n}, true);\n\n/* Hints */\nfunction populateHints() {\n  let table = document.getElementById(\"hint-table\");\n  Object.entries(HINTABLE_LOCATIONS).forEach(e => {\n    let row = table.insertRow(table.rows.length);\n\n    let nameCell = row.insertCell(0);\n    nameCell.innerHTML = `<td>&nbsp;${e[0]}</td>`;\n\n    let buttonCell = row.insertCell(1);\n    buttonCell.innerHTML = `<td>&nbsp;<span>Show Hint</span></td>`;\n    buttonCell.setAttribute(\"data-location\", e[1]);\n    buttonCell.setAttribute(\"data-target\", `hint-table-${e[0].replaceAll(\" \", \"-\")}`)\n    buttonCell.addEventListener(\"click\", displayHint)\n\n    let hintCell = row.insertCell(2);\n    hintCell.setAttribute(\"id\", `hint-table-${e[0].replaceAll(\" \", \"-\")}`)\n    hintCell.innerHTML = `<td>&nbsp;...</td>`;\n  })\n}\n\nfunction displayHint(e) {\n  let target = document.getElementById(e.currentTarget.getAttribute(\"data-target\"));\n  let hint = getHint(e.currentTarget.getAttribute(\"data-location\"));\n  target.innerHTML = hint;\n}\n\ndocument.addEventListener('swiped-down', e => {\n  console.log(e.detail.yEnd - e.detail.yStart)\n  if (e.detail.yEnd - e.detail.yStart > 250) { \n    toggleMenu()\n  }\n});"],"names":["VERSION_NUMBER","debugConsole","debounce","func","timeout","timer","args","clearTimeout","setTimeout","apply","this","initMenu","M","Carousel","init","document","querySelectorAll","numVisible","dist","noWrap","preventLoop","enableTouch","duration","forEach","e","setAttribute","onclick","getInstance","getElementById","prev","next","toggleMenu","menu","Modal","isOpen","close","open","window","dispatchEvent","Event","async","createAndLoadConfig","storageManager","find","then","initKeybinds","DEFAULT_KEYBIND_CONFIG","persist","keybinds","fileToDirPath","path","slice","lastIndexOf","dissmissUpdateDialog","setValue","populateUpdateDialog","element","innerHTML","ul","createElement","classList","add","RELEASE_NOTES","note","li","appendChild","outerHTML","addEventListener","console","info","onOpenStart","IodineGUI","isPlaying","Iodine","pause","onCloseEnd","playStatusCallback","play","dismissible","updateModal","findValue","VERSION_COMPARITOR","Autocomplete","limit","data","Object","keys","ITEM_DATA","reduce","v1","v2","KEY_LOCATION_DATA","onAutocomplete","locationParts","value","split","FormSelect","_handleSelectChangeBound","populateHints","event","userInputEnabled","doInput","code","CommandExecutor","register","Map","conf","addNewConfigOptions","JSON","parse","table","sort","sortCommands","binding","type","kbd","set","command","gmpd","row","insertRow","rows","length","insertCell","replace","kbdCell","listenForKbdBinding","gmpdCell","listenForGmpdBinding","defaultConf","existingCommandSet","Set","map","c","filter","has","concat","listenFor","Toast","dismissAll","isGamepad","currentTarget","getAttribute","elmnt","oldCode","querySelector","toast","html","displayLength","completeCallback","freezeClic","isDown","delete","writeKeybinds","get","execute","config","values","v","includes","keybind","isButton","k","m","match","pop","push","printPrettyJson","stringify","a","b","commandToIndex","menuInput","entries","HINTABLE_LOCATIONS","buttonCell","replaceAll","displayHint","hintCell","target","hint","getHint","stopPropagation","preventDefault","log","detail","yEnd","yStart"],"version":3,"file":"build-index.27c1a108.js.map"}