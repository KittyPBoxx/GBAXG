"use strict";function THUMBInstructionSet(t){this.CPUCore=t,this.initialize()}function compileTHUMBInstructionDecodeMap(){var t=0,e=getUint8Array(1024);function r(r){for(var s=0;s<32;++s)e[t++]=r}function s(r){for(var s=0;s<8;++s)e[t++]=r}function i(r){for(var s=0;s<4;++s)e[t++]=r}function o(r,s,i,o){e[t++]=r,e[t++]=s,e[t++]=i,e[t++]=o}r(6),r(7),r(30),s(12),s(18),s(11),s(60),r(8),r(0),r(17),r(42),o(4,59,55,57),o(69,71,72,43),o(48,46,9,75),o(21,31,66,68),o(82,61,27,77),o(82,58,63,78),o(82,2,16,54),o(37,49,82,82),r(15),s(74),s(35),s(79),s(65),s(70),s(36),s(76),s(44),r(20),r(3),r(45),r(5),r(28),r(22),r(13),r(10),r(64),r(67),i(39),i(82),i(82),i(82),i(41),i(40),i(82),i(82),i(82),i(82),i(82),i(82),i(26),i(56),i(82),i(82),r(50),r(53),i(1),i(24),i(23),i(19),i(73),i(62),i(80),i(81),i(47),i(51),i(25),i(38),i(34),i(29),i(82),i(52),r(14),r(82),r(32),r(33),THUMBInstructionSet.prototype.instructionMap=e}THUMBInstructionSet.prototype.initialize=function(){this.wait=this.CPUCore.wait,this.registers=this.CPUCore.registers,this.branchFlags=this.CPUCore.branchFlags,this.fetch=0,this.decode=0,this.execute=0,this.memory=this.CPUCore.memory},THUMBInstructionSet.prototype.executeIteration=function(){this.fetch=0|this.memory.memoryReadCPU16(0|this.readPC()),this.executeDecoded(),this.execute=0|this.decode,this.decode=0|this.fetch},THUMBInstructionSet.prototype.executeDecoded=function(){switch(255&this.instructionMap[this.execute>>6]){case 0:this.CMPimm8();break;case 1:this.BEQ();break;case 2:this.MOVH_LH();break;case 3:this.LDRimm5();break;case 4:this.AND();break;case 5:this.LDRBimm5();break;case 6:this.LSLimm();break;case 7:this.LSRimm();break;case 8:this.MOVimm8();break;case 9:this.CMP();break;case 10:this.LDRSP();break;case 11:this.ADDimm3();break;case 12:this.ADDreg();break;case 13:this.STRSP();break;case 14:this.B();break;case 15:this.LDRPC();break;case 16:this.MOVH_HL();break;case 17:this.ADDimm8();break;case 18:this.SUBreg();break;case 19:this.BCC();break;case 20:this.STRimm5();break;case 21:this.ORR();break;case 22:this.LDRHimm5();break;case 23:this.BCS();break;case 24:this.BNE();break;case 25:this.BGE();break;case 26:this.POP();break;case 27:this.ADDH_HL();break;case 28:this.STRHimm5();break;case 29:this.BLE();break;case 30:this.ASRimm();break;case 31:this.MUL();break;case 32:this.BLsetup();break;case 33:this.BLoff();break;case 34:this.BGT();break;case 35:this.STRHreg();break;case 36:this.LDRHreg();break;case 37:this.BX_L();break;case 38:this.BLT();break;case 39:this.ADDSPimm7();break;case 40:this.PUSHlr();break;case 41:this.PUSH();break;case 42:this.SUBimm8();break;case 43:this.ROR();break;case 44:this.LDRSHreg();break;case 45:this.STRBimm5();break;case 46:this.NEG();break;case 47:this.BHI();break;case 48:this.TST();break;case 49:this.BX_H();break;case 50:this.STMIA();break;case 51:this.BLS();break;case 52:this.SWI();break;case 53:this.LDMIA();break;case 54:this.MOVH_HH();break;case 55:this.LSL();break;case 56:this.POPpc();break;case 57:this.LSR();break;case 58:this.CMPH_LH();break;case 59:this.EOR();break;case 60:this.SUBimm3();break;case 61:this.ADDH_LH();break;case 62:this.BPL();break;case 63:this.CMPH_HL();break;case 64:this.ADDPC();break;case 65:this.LDRSBreg();break;case 66:this.BIC();break;case 67:this.ADDSP();break;case 68:this.MVN();break;case 69:this.ASR();break;case 70:this.LDRreg();break;case 71:this.ADC();break;case 72:this.SBC();break;case 73:this.BMI();break;case 74:this.STRreg();break;case 75:this.CMN();break;case 76:this.LDRBreg();break;case 77:this.ADDH_HH();break;case 78:this.CMPH_HH();break;case 79:this.STRBreg();break;case 80:this.BVS();break;case 81:this.BVC();break;default:this.UNDEFINED()}},THUMBInstructionSet.prototype.executeBubble=function(){this.fetch=0|this.memory.memoryReadCPU16(0|this.readPC()),this.incrementProgramCounter(),this.execute=0|this.decode,this.decode=0|this.fetch},THUMBInstructionSet.prototype.incrementProgramCounter=function(){this.registers[15]=2+(0|this.registers[15])|0},THUMBInstructionSet.prototype.readLowRegister=function(t){return t|=0,0|this.registers[7&t]},THUMBInstructionSet.prototype.read0OffsetLowRegister=function(){return 0|this.readLowRegister(0|this.execute)},THUMBInstructionSet.prototype.read3OffsetLowRegister=function(){return 0|this.readLowRegister(this.execute>>3)},THUMBInstructionSet.prototype.read6OffsetLowRegister=function(){return 0|this.readLowRegister(this.execute>>6)},THUMBInstructionSet.prototype.read8OffsetLowRegister=function(){return 0|this.readLowRegister(this.execute>>8)},THUMBInstructionSet.prototype.readHighRegister=function(t){return t|=8,0|this.registers[15&t]},THUMBInstructionSet.prototype.writeLowRegister=function(t,e){t|=0,e|=0,this.registers[7&t]=0|e},THUMBInstructionSet.prototype.write0OffsetLowRegister=function(t){t|=0,this.writeLowRegister(0|this.execute,0|t)},THUMBInstructionSet.prototype.write8OffsetLowRegister=function(t){t|=0,this.writeLowRegister(this.execute>>8,0|t)},THUMBInstructionSet.prototype.guardHighRegisterWrite=function(t){t|=0;var e=8|7&this.execute;15==(0|e)?this.CPUCore.branch(-2&t):(this.registers[15&e]=0|t,this.incrementProgramCounter())},THUMBInstructionSet.prototype.writeSP=function(t){t|=0,this.registers[13]=0|t},THUMBInstructionSet.prototype.SPDecrementWord=function(){this.registers[13]=(0|this.registers[13])-4|0},THUMBInstructionSet.prototype.SPIncrementWord=function(){this.registers[13]=4+(0|this.registers[13])|0},THUMBInstructionSet.prototype.writeLR=function(t){t|=0,this.registers[14]=0|t},THUMBInstructionSet.prototype.writePC=function(t){t|=0,this.CPUCore.branch(-2&t)},THUMBInstructionSet.prototype.offsetPC=function(){this.CPUCore.branch((0|this.readPC())+(this.execute<<24>>23)|0)},THUMBInstructionSet.prototype.getLR=function(){return(0|this.readPC())-2|0},THUMBInstructionSet.prototype.getIRQLR=function(){return 0|this.readPC()},THUMBInstructionSet.prototype.readSP=function(){return 0|this.registers[13]},THUMBInstructionSet.prototype.readLR=function(){return 0|this.registers[14]},THUMBInstructionSet.prototype.readPC=function(){return 0|this.registers[15]},THUMBInstructionSet.prototype.getCurrentFetchValue=function(){return this.fetch|this.fetch<<16},THUMBInstructionSet.prototype.getSWICode=function(){return 255&this.execute},THUMBInstructionSet.prototype.LSLimm=function(){var t=0|this.read3OffsetLowRegister(),e=this.execute>>6&31;(0|e)>0&&(this.branchFlags.setCarry(t<<((0|e)-1|0)|0),t<<=0|e),this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LSRimm=function(){var t=0|this.read3OffsetLowRegister(),e=this.execute>>6&31;(0|e)>0?(this.branchFlags.setCarry(t>>((0|e)-1|0)<<31),t=t>>>(0|e)|0):(this.branchFlags.setCarry(0|t),t=0),this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ASRimm=function(){var t=0|this.read3OffsetLowRegister(),e=this.execute>>6&31;(0|e)>0?(this.branchFlags.setCarry(t>>((0|e)-1|0)<<31),t>>=0|e):(this.branchFlags.setCarry(0|t),t>>=31),this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDreg=function(){var t=0|this.read3OffsetLowRegister(),e=0|this.read6OffsetLowRegister();this.write0OffsetLowRegister(0|this.branchFlags.setADDFlags(0|t,0|e)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.SUBreg=function(){var t=0|this.read3OffsetLowRegister(),e=0|this.read6OffsetLowRegister();this.write0OffsetLowRegister(0|this.branchFlags.setSUBFlags(0|t,0|e)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDimm3=function(){var t=0|this.read3OffsetLowRegister(),e=this.execute>>6&7;this.write0OffsetLowRegister(0|this.branchFlags.setADDFlags(0|t,0|e)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.SUBimm3=function(){var t=0|this.read3OffsetLowRegister(),e=this.execute>>6&7;this.write0OffsetLowRegister(0|this.branchFlags.setSUBFlags(0|t,0|e)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.MOVimm8=function(){var t=255&this.execute;this.branchFlags.setNegativeFalse(),this.branchFlags.setZero(0|t),this.write8OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.CMPimm8=function(){var t=0|this.read8OffsetLowRegister(),e=255&this.execute;this.branchFlags.setCMPFlags(0|t,0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDimm8=function(){var t=0|this.read8OffsetLowRegister(),e=255&this.execute;this.write8OffsetLowRegister(0|this.branchFlags.setADDFlags(0|t,0|e)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.SUBimm8=function(){var t=0|this.read8OffsetLowRegister(),e=255&this.execute;this.write8OffsetLowRegister(0|this.branchFlags.setSUBFlags(0|t,0|e)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.AND=function(){var t=(0|this.read3OffsetLowRegister())&(0|this.read0OffsetLowRegister());this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.EOR=function(){var t=(0|this.read3OffsetLowRegister())^(0|this.read0OffsetLowRegister());this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LSL=function(){var t=255&this.read3OffsetLowRegister(),e=0|this.read0OffsetLowRegister();(0|t)>0&&((0|t)<32?(this.branchFlags.setCarry(e<<((0|t)-1|0)),e<<=0|t):32==(0|t)?(this.branchFlags.setCarry(e<<31),e=0):(this.branchFlags.setCarryFalse(),e=0)),this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LSR=function(){var t=255&this.read3OffsetLowRegister(),e=0|this.read0OffsetLowRegister();(0|t)>0&&((0|t)<32?(this.branchFlags.setCarry(e>>((0|t)-1|0)<<31),e=e>>>(0|t)|0):32==t?(this.branchFlags.setCarry(0|e),e=0):(this.branchFlags.setCarryFalse(),e=0)),this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ASR=function(){var t=255&this.read3OffsetLowRegister(),e=0|this.read0OffsetLowRegister();(0|t)>0&&((0|t)<32?(this.branchFlags.setCarry(e>>((0|t)-1|0)<<31),e>>=0|t):(this.branchFlags.setCarry(0|e),e>>=31)),this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADC=function(){var t=0|this.read0OffsetLowRegister(),e=0|this.read3OffsetLowRegister();this.write0OffsetLowRegister(0|this.branchFlags.setADCFlags(0|t,0|e)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.SBC=function(){var t=0|this.read0OffsetLowRegister(),e=0|this.read3OffsetLowRegister();this.write0OffsetLowRegister(0|this.branchFlags.setSBCFlags(0|t,0|e)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ROR=function(){var t=255&this.read3OffsetLowRegister(),e=0|this.read0OffsetLowRegister();(0|t)>0&&((0|(t&=31))>0?(this.branchFlags.setCarry(e>>(t-1|0)<<31),e=e<<(32-(0|t)|0)|e>>>(0|t)):this.branchFlags.setCarry(0|e)),this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.TST=function(){var t=(0|this.read3OffsetLowRegister())&(0|this.read0OffsetLowRegister());this.branchFlags.setNZInt(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.NEG=function(){var t=0|this.read3OffsetLowRegister();-2147483648!=(0|t)?(t=0|-(0|t),this.branchFlags.setOverflowFalse()):this.branchFlags.setOverflowTrue(),this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.CMP=function(){var t=0|this.read0OffsetLowRegister(),e=0|this.read3OffsetLowRegister();this.branchFlags.setCMPFlags(0|t,0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.CMN=function(){var t=0|this.read0OffsetLowRegister(),e=0|this.read3OffsetLowRegister();this.branchFlags.setCMNFlags(0|t,0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ORR=function(){var t=0|this.read3OffsetLowRegister()|(0|this.read0OffsetLowRegister());this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.MUL=function(){var t=0|this.read3OffsetLowRegister(),e=0|this.read0OffsetLowRegister(),r=0|this.CPUCore.performMUL32(0|t,0|e,0);this.branchFlags.setCarryFalse(),this.branchFlags.setNZInt(0|r),this.write0OffsetLowRegister(0|r),this.incrementProgramCounter()},THUMBInstructionSet.prototype.BIC=function(){var t=~(0|this.read3OffsetLowRegister())&(0|this.read0OffsetLowRegister());this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.MVN=function(){var t=~this.read3OffsetLowRegister();this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDH_LH=function(){var t=0|this.read0OffsetLowRegister(),e=0|this.readHighRegister(this.execute>>3);this.write0OffsetLowRegister((0|t)+(0|e)|0),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDH_HL=function(){var t=0|this.readHighRegister(0|this.execute),e=0|this.read3OffsetLowRegister();this.guardHighRegisterWrite((0|t)+(0|e)|0)},THUMBInstructionSet.prototype.ADDH_HH=function(){var t=0|this.readHighRegister(0|this.execute),e=0|this.readHighRegister(this.execute>>3);this.guardHighRegisterWrite((0|t)+(0|e)|0)},THUMBInstructionSet.prototype.CMPH_LH=function(){var t=0|this.read0OffsetLowRegister(),e=0|this.readHighRegister(this.execute>>3);this.branchFlags.setCMPFlags(0|t,0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.CMPH_HL=function(){var t=0|this.readHighRegister(0|this.execute),e=0|this.read3OffsetLowRegister();this.branchFlags.setCMPFlags(0|t,0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.CMPH_HH=function(){var t=0|this.readHighRegister(0|this.execute),e=0|this.readHighRegister(this.execute>>3);this.branchFlags.setCMPFlags(0|t,0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.MOVH_LH=function(){this.write0OffsetLowRegister(0|this.readHighRegister(this.execute>>3)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.MOVH_HL=function(){this.guardHighRegisterWrite(0|this.read3OffsetLowRegister())},THUMBInstructionSet.prototype.MOVH_HH=function(){this.guardHighRegisterWrite(0|this.readHighRegister(this.execute>>3))},THUMBInstructionSet.prototype.BX_L=function(){var t=0|this.read3OffsetLowRegister();0==(1&t)?(this.CPUCore.enterARM(),this.CPUCore.branch(-4&t)):this.CPUCore.branch(-2&t)},THUMBInstructionSet.prototype.BX_H=function(){var t=0|this.readHighRegister(this.execute>>3);0==(1&t)?(this.CPUCore.enterARM(),this.CPUCore.branch(-4&t)):this.CPUCore.branch(-2&t)},THUMBInstructionSet.prototype.LDRPC=function(){var t=0|this.CPUCore.read32((-3&this.readPC())+((255&this.execute)<<2)|0);this.write8OffsetLowRegister(0|t),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STRreg=function(){var t=(0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write32(0|t,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.STRHreg=function(){var t=(0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write16(0|t,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.STRBreg=function(){var t=(0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write8(0|t,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDRSBreg=function(){var t=this.CPUCore.read8((0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0)<<24>>24;this.write0OffsetLowRegister(0|t),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.LDRreg=function(){var t=0|this.CPUCore.read32((0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|t),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.LDRHreg=function(){var t=0|this.CPUCore.read16((0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|t),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.LDRBreg=function(){var t=0|this.CPUCore.read8((0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|t),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.LDRSHreg=function(){var t=this.CPUCore.read16((0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0)<<16>>16;this.write0OffsetLowRegister(0|t),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STRimm5=function(){var t=(this.execute>>4&124)+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write32(0|t,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDRimm5=function(){var t=0|this.CPUCore.read32((this.execute>>4&124)+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|t),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STRBimm5=function(){var t=(this.execute>>6&31)+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write8(0|t,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDRBimm5=function(){var t=0|this.CPUCore.read8((this.execute>>6&31)+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|t),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STRHimm5=function(){var t=(this.execute>>5&62)+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write16(0|t,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDRHimm5=function(){var t=0|this.CPUCore.read16((this.execute>>5&62)+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|t),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STRSP=function(){var t=((255&this.execute)<<2)+(0|this.readSP())|0;this.CPUCore.write32(0|t,0|this.read8OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDRSP=function(){var t=0|this.CPUCore.read32(((255&this.execute)<<2)+(0|this.readSP())|0);this.write8OffsetLowRegister(0|t),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.ADDPC=function(){var t=(-3&this.readPC())+((255&this.execute)<<2)|0;this.write8OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDSP=function(){var t=((255&this.execute)<<2)+(0|this.readSP())|0;this.write8OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDSPimm7=function(){0!=(128&this.execute)?this.writeSP((0|this.readSP())-((127&this.execute)<<2)|0):this.writeSP((0|this.readSP())+((127&this.execute)<<2)|0),this.incrementProgramCounter()},THUMBInstructionSet.prototype.PUSH=function(){if((255&this.execute)>0){this.wait.NonSequentialBroadcast();for(var t=7;(0|t)>-1;t=(0|t)-1|0)0!=(this.execute&1<<t)&&(this.SPDecrementWord(),this.memory.memoryWrite32(0|this.readSP(),0|this.readLowRegister(0|t)));this.wait.NonSequentialBroadcast()}this.incrementProgramCounter()},THUMBInstructionSet.prototype.PUSHlr=function(){this.wait.NonSequentialBroadcast(),this.SPDecrementWord(),this.memory.memoryWrite32(0|this.readSP(),0|this.readLR());for(var t=7;(0|t)>-1;t=(0|t)-1|0)0!=(this.execute&1<<t)&&(this.SPDecrementWord(),this.memory.memoryWrite32(0|this.readSP(),0|this.readLowRegister(0|t)));this.wait.NonSequentialBroadcast(),this.incrementProgramCounter()},THUMBInstructionSet.prototype.POP=function(){if((255&this.execute)>0){this.wait.NonSequentialBroadcast();for(var t=0;(0|t)<8;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.writeLowRegister(0|t,0|this.memory.memoryRead32(0|this.readSP())),this.SPIncrementWord());this.wait.NonSequentialBroadcast()}this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.POPpc=function(){this.wait.NonSequentialBroadcast();for(var t=0;(0|t)<8;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.writeLowRegister(0|t,0|this.memory.memoryRead32(0|this.readSP())),this.SPIncrementWord());this.writePC(0|this.memory.memoryRead32(0|this.readSP())),this.SPIncrementWord(),this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STMIA=function(){if((255&this.execute)>0){var t=0|this.read8OffsetLowRegister();this.wait.NonSequentialBroadcast();for(var e=0;(0|e)<8;e=1+(0|e)|0)0!=(this.execute&1<<e)&&(this.memory.memoryWrite32(0|t,0|this.readLowRegister(0|e)),t=4+(0|t)|0);this.write8OffsetLowRegister(0|t),this.wait.NonSequentialBroadcast()}this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDMIA=function(){if((255&this.execute)>0){var t=0|this.read8OffsetLowRegister();this.wait.NonSequentialBroadcast();for(var e=0;(0|e)<8;e=1+(0|e)|0)0!=(this.execute&1<<e)&&(this.writeLowRegister(0|e,0|this.memory.memoryRead32(0|t)),t=4+(0|t)|0);this.write8OffsetLowRegister(0|t),this.wait.NonSequentialBroadcast()}this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.BEQ=function(){0==(0|this.branchFlags.getZero())?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BNE=function(){0!=(0|this.branchFlags.getZero())?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BCS=function(){(0|this.branchFlags.getCarry())<0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BCC=function(){(0|this.branchFlags.getCarry())>=0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BMI=function(){(0|this.branchFlags.getNegative())<0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BPL=function(){(0|this.branchFlags.getNegative())>=0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BVS=function(){(0|this.branchFlags.getOverflow())<0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BVC=function(){(0|this.branchFlags.getOverflow())>=0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BHI=function(){(0|this.branchFlags.getCarry())<0&&0!=(0|this.branchFlags.getZero())?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BLS=function(){(0|this.branchFlags.getCarry())<0&&0!=(0|this.branchFlags.getZero())?this.incrementProgramCounter():this.offsetPC()},THUMBInstructionSet.prototype.BGE=function(){(0|this.branchFlags.BGE())>=0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BLT=function(){(0|this.branchFlags.BGE())<0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BGT=function(){0!=(0|this.branchFlags.getZero())&&(0|this.branchFlags.BGE())>=0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BLE=function(){0!=(0|this.branchFlags.getZero())&&(0|this.branchFlags.BGE())>=0?this.incrementProgramCounter():this.offsetPC()},THUMBInstructionSet.prototype.SWI=function(){this.CPUCore.SWI()},THUMBInstructionSet.prototype.B=function(){this.CPUCore.branch((0|this.readPC())+(this.execute<<21>>20)|0)},THUMBInstructionSet.prototype.BLsetup=function(){this.writeLR((0|this.readPC())+(this.execute<<21>>9)|0),this.incrementProgramCounter()},THUMBInstructionSet.prototype.BLoff=function(){this.writeLR((0|this.readLR())+((2047&this.execute)<<1)|0);var t=0|this.readPC();this.CPUCore.branch(-2&this.readLR()),this.writeLR((0|t)-2|1)},THUMBInstructionSet.prototype.UNDEFINED=function(){this.CPUCore.UNDEFINED()},compileTHUMBInstructionDecodeMap();
//# sourceMappingURL=build-index.cc1eee75.js.map
